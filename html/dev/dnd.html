<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Developer's Edition 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><link rel="stylesheet" href="https://html.spec.whatwg.org/dev/styles.css" crossorigin=""><body>
  <script async="" src="search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><h2 id="dev-edition-h2" class="no-num no-toc">Developer's Edition — Last Updated <span class="pubdate">20 March 2020</span></h2></hgroup>
   

   <div id="search"><input placeholder="Search. Press '/'" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="interaction.html">← 6 ユーザーとの対話処理</a> — <a href="./">目次</a> — <a href="browsers.html">7 ウェブページの読み込み →</a></nav><ol class="toc"><li><ol><li><a href="dnd.html#dnd"><span class="secno">6.8</span> Drag and drop</a><ol><li><a href="dnd.html#event-drag"><span class="secno">6.8.1</span> Introduction</a><li><a href="dnd.html#the-drag-data-store"><span class="secno">6.8.2</span> The drag data store</a><li><a href="dnd.html#the-datatransfer-interface"><span class="secno">6.8.3</span> The <code>DataTransfer</code> interface</a><ol><li><a href="dnd.html#the-datatransferitemlist-interface"><span class="secno">6.8.3.1</span> The <code>DataTransferItemList</code> interface</a><li><a href="dnd.html#the-datatransferitem-interface"><span class="secno">6.8.3.2</span> The <code>DataTransferItem</code> interface</a></ol><li><a href="dnd.html#the-dragevent-interface"><span class="secno">6.8.4</span> The <code>DragEvent</code> interface</a><li><a href="dnd.html#dndevents"><span class="secno">6.8.5</span> Events summary</a><li><a href="dnd.html#the-draggable-attribute"><span class="secno">6.8.6</span> The <code>draggable</code> attribute</a></ol></ol></ol><h3 id="dnd"><span class="secno">6.8</span> <dfn>Drag and drop</dfn><a href="#dnd" class="self-link"></a></h3><div class="status"><input onclick="toggleStatus(this)" value="⋰" type="button"><p class="support"><strong>Support:</strong> dragndrop<span class="and_chr yes"><span>Chrome for Android</span> <span>80+</span></span><span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>11.0+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.5+</span></span><span class="safari yes"><span>Safari</span> <span>3.1+</span></span><span class="samsung no"><span>Samsung Internet</span> <span>None</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="edge yes"><span>Edge</span> <span>18+</span></span><span class="ie partial"><span>IE (limited)</span> <span>5.5+</span></span><span class="opera yes"><span>Opera</span> <span>12+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android no"><span>Android Browser</span> <span>None</span></span><p class="caniuse">Source: <a href="https://caniuse.com/#feat=dragndrop">caniuse.com</a></div>



  <p>このセクションは、イベントベースのドラッグアンドドロップのメカニズムを定義する。</p>

  <p>この仕様は、<em>ドラッグアンドドロップ操作</em>が実際に何であるかを正確に定義しない。</p>

  <p>ポインティングデバイスをもつ視覚メディア上に、ドラッグ操作は一連の<code id="dnd:event-mousemove"><a data-x-internal="event-mousemove" href="https://w3c.github.io/uievents/#event-type-mousemove">mousemove</a></code>イベントが続く<code id="dnd:event-mousedown"><a data-x-internal="event-mousedown" href="https://w3c.github.io/uievents/#event-type-mousedown">mousedown</a></code>イベントのデフォルトアクションであるかもしれず、ドロップは解放されているマウスによって引き起こされるかもしれない。</p>

  <p>ポインティングデバイス以外の入力モダリティを使用する場合、ユーザーはおそらくドラッグアンドドロップ操作を実行するために明示的に意思表示する必要があり、それらがドラッグを望み、ドロップを望む場所を、それぞれ主張する。</p>

  


  <h4 id="event-drag"><span class="secno">6.8.1</span> Introduction<a href="#event-drag" class="self-link"></a></h4>

  

  <p>要素をドラッグ可能にするためには、要素に<code id="event-drag:the-draggable-attribute"><a href="#the-draggable-attribute">draggable</a></code>属性を与え、ドラッグされているデータを格納する<code id="event-drag:event-dnd-dragstart"><a href="#event-dnd-dragstart">dragstart</a></code>ドラッグに対してイベントリスナーを設定する。</p>

  <p>イベントハンドラーは典型的に、それがドラッグされているテキスト選択でないことをチェックする必要があり、次に<code>DataTransfer</code>オブジェクトにデータを格納し、許可される効果（コピー、移動、リンク、またはいくつかの組み合わせ）を設定する必要がある。</p>

  <p>たとえば：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->What fruits do you like?<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>ol</c-> <c- e>ondragstart</c-><c- o>=</c-><c- s>"dragStartHandler(event)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-> <c- e>draggable</c-><c- o>=</c-><c- s>"true"</c-> <c- e>data-value</c-><c- o>=</c-><c- s>"fruit-apple"</c-><c- p>></c->Apples<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-> <c- e>draggable</c-><c- o>=</c-><c- s>"true"</c-> <c- e>data-value</c-><c- o>=</c-><c- s>"fruit-orange"</c-><c- p>></c->Oranges<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-> <c- e>draggable</c-><c- o>=</c-><c- s>"true"</c-> <c- e>data-value</c-><c- o>=</c-><c- s>"fruit-pear"</c-><c- p>></c->Pears<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ol</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>var</c-> internalDNDType <c- o>=</c-> <c- t>'text/x-example'</c-><c- p>;</c-> <c- c1>// set this to something specific to your site</c->
  <c- a>function</c-> dragStartHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- k>if</c-> <c- p>(</c->event<c- p>.</c->target <c- k>instanceof</c-> HTMLLIElement<c- p>)</c-> <c- p>{</c->
      <c- c1>// use the element's data-value="" attribute as the value to be moving:</c->
      event<c- p>.</c->dataTransfer<c- p>.</c->setData<c- p>(</c->internalDNDType<c- p>,</c-> event<c- p>.</c->target<c- p>.</c->dataset<c- p>.</c->value<c- p>);</c->
      event<c- p>.</c->dataTransfer<c- p>.</c->effectAllowed <c- o>=</c-> <c- t>'move'</c-><c- p>;</c-> <c- c1>// only allow moves</c->
    <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
      event<c- p>.</c->preventDefault<c- p>();</c-> <c- c1>// don't allow selection to be dragged</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  <hr>

  <p>ドロップを受け入れるために、次のイベントをリッスンする必要がある：</p>

  <ol><li><code id="event-drag:event-dnd-dragenter"><a href="#event-dnd-dragenter">dragenter</a></code>イベントハンドラーは、イベントをキャンセルすることによって、ドロップターゲットが潜在的にドロップを受け入れる可能性があるかどうかを報告する。<li><code id="event-drag:event-dnd-dragover"><a href="#event-dnd-dragover">dragover</a></code>イベントハンドラーは、イベントに関連付けられた<code>DataTransfer</code>の<code id="event-drag:dom-datatransfer-dropeffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>属性を設定することによって、ユーザーに表示されるフィードバックを指定する。このイベントはまたキャンセルする必要がある。<li><code id="event-drag:event-dnd-drop"><a href="#event-dnd-drop">drop</a></code>イベントハンドラーは、ドロップを受け入れるまたは拒否する最終選択を持つ。ドロップが受け入れられる場合、イベントハンドラーはターゲットに対してドロップ操作を実行しなければならない。このイベントはキャンセルする必要があるため、<code id="event-drag:dom-datatransfer-dropeffect-2"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code>属性の値をソースによって使用できるようにする。そうでなければ、ドロップ操作は拒否される。</ol>

  <p>たとえば：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Drop your favorite fruits below:<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>ol</c-> <c- e>ondragenter</c-><c- o>=</c-><c- s>"dragEnterHandler(event)"</c-> <c- e>ondragover</c-><c- o>=</c-><c- s>"dragOverHandler(event)"</c->
    <c- e>ondrop</c-><c- o>=</c-><c- s>"dropHandler(event)"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ol</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>var</c-> internalDNDType <c- o>=</c-> <c- t>'text/x-example'</c-><c- p>;</c-> <c- c1>// set this to something specific to your site</c->
  <c- a>function</c-> dragEnterHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- a>var</c-> items <c- o>=</c-> event<c- p>.</c->dataTransfer<c- p>.</c->items<c- p>;</c->
    <c- k>for</c-> <c- p>(</c-><c- a>var</c-> i <c- o>=</c-> <c- mi>0</c-><c- p>;</c-> i <c- o>&lt;</c-> items<c- p>.</c->length<c- p>;</c-> <c- o>++</c->i<c- p>)</c-> <c- p>{</c->
      <c- a>var</c-> item <c- o>=</c-> items<c- p>[</c->i<c- p>];</c->
      <c- k>if</c-> <c- p>(</c->item<c- p>.</c->kind <c- o>==</c-> <c- t>'string'</c-> <c- o>&amp;&amp;</c-> item<c- p>.</c->type <c- o>==</c-> internalDNDType<c- p>)</c-> <c- p>{</c->
        event<c- p>.</c->preventDefault<c- p>();</c->
        <c- k>return</c-><c- p>;</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>}</c->
  <c- a>function</c-> dragOverHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    event<c- p>.</c->dataTransfer<c- p>.</c->dropEffect <c- o>=</c-> <c- t>'move'</c-><c- p>;</c->
    event<c- p>.</c->preventDefault<c- p>();</c->
  <c- p>}</c->
  <c- a>function</c-> dropHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- a>var</c-> li <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- t>'li'</c-><c- p>);</c->
    <c- a>var</c-> data <c- o>=</c-> event<c- p>.</c->dataTransfer<c- p>.</c->getData<c- p>(</c->internalDNDType<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->data <c- o>==</c-> <c- t>'fruit-apple'</c-><c- p>)</c-> <c- p>{</c->
      li<c- p>.</c->textContent <c- o>=</c-> <c- t>'Apples'</c-><c- p>;</c->
    <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->data <c- o>==</c-> <c- t>'fruit-orange'</c-><c- p>)</c-> <c- p>{</c->
      li<c- p>.</c->textContent <c- o>=</c-> <c- t>'Oranges'</c-><c- p>;</c->
    <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->data <c- o>==</c-> <c- t>'fruit-pear'</c-><c- p>)</c-> <c- p>{</c->
      li<c- p>.</c->textContent <c- o>=</c-> <c- t>'Pears'</c-><c- p>;</c->
    <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
      li<c- p>.</c->textContent <c- o>=</c-> <c- t>'Unknown Fruit'</c-><c- p>;</c->
    <c- p>}</c->
    event<c- p>.</c->target<c- p>.</c->appendChild<c- p>(</c->li<c- p>);</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  <hr>

  <p>ディスプレイからオリジナルの要素（ドラッグされたもの）を削除するために、<code id="event-drag:event-dnd-dragend"><a href="#event-dnd-dragend">dragend</a></code>イベントを使用できる。</p>

  <p>ここで私たちの例のために、それはそのイベントを処理するために元のマークアップを更新することを意味する：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->What fruits do you like?<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>ol</c-> <c- e>ondragstart</c-><c- o>=</c-><c- s>"dragStartHandler(event)"</c-> <c- e>ondragend</c-><c- o>=</c-><c- s>"dragEndHandler(event)"</c-><c- p>></c->
 <em>...as before...</em>
<c- p>&lt;/</c-><c- f>ol</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>function</c-> dragStartHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- c1>// </c-><em><c- c1>...as before...</c-></em>
  <c- p>}</c->
  <c- a>function</c-> dragEndHandler<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- k>if</c-> <c- p>(</c->event<c- p>.</c->dataTransfer<c- p>.</c->dropEffect <c- o>==</c-> <c- t>'move'</c-><c- p>)</c-> <c- p>{</c->
      <c- c1>// remove the dragged element</c->
      event<c- p>.</c->target<c- p>.</c->parentNode<c- p>.</c->removeChild<c- p>(</c->event<c- p>.</c->target<c- p>);</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>



  <h4 id="the-drag-data-store"><span class="secno">6.8.2</span> The drag data store<a href="#the-drag-data-store" class="self-link"></a></h4>

  <p><dfn id="drag-data-store">ドラッグデータストア</dfn>として知られる、ドラッグアンドドロップ操作を支えるデータは次の情報で構成される：</p>

  <ul><li><p>ドラッグされたデータを表すアイテムのリストである<dfn id="drag-data-store-item-list">ドラッグデータストアアイテムリスト</dfn>は、次の情報で構成される：</p>

    <dl><dt><dfn id="the-drag-data-item-kind">ドラッグデータアイテムの種類</dfn><dd><p>データの種類：</p>

      <dl><dt><i>テキスト</i><dd><p>テキスト。</p>
       <dt><i>File</i><dd><p>ファイル名をもつバイナリーデータ。</p>
       </dl>

     <dt><dfn id="the-drag-data-item-type-string">ドラッグデータ項目型文字列</dfn><dd><p>一般に<a id="the-drag-data-store:mime-type" href="https://mimesniff.spec.whatwg.org/#mime-type" data-x-internal="mime-type">MIMEタイプ</a>で指定される、データ型やフォーマットを与えるユニコード文字列。<a href="https://mimesniff.spec.whatwg.org/#mime-type" id="the-drag-data-store:mime-type-2" data-x-internal="mime-type">MIMEタイプ</a>でない一部の値は、レガシー理由により特別扱いされる。APIは<a href="https://mimesniff.spec.whatwg.org/#mime-type" id="the-drag-data-store:mime-type-3" data-x-internal="mime-type">MIMEタイプ</a>の使用を強制しない。他の値も同様に使用できる。しかし、すべての場合において値は、APIによってすべて<a id="the-drag-data-store:converted-to-ascii-lowercase" href="https://triple-underscore.github.io/infra-ja.html#ascii-lowercase" data-x-internal="converted-to-ascii-lowercase">ASCII小文字に変換される</a>。</p>

      <p>There is a limit of one <i>text</i> item per <a href="#the-drag-data-item-type-string" id="the-drag-data-store:the-drag-data-item-type-string">item type string</a>.</p> 

     <dt>実際のデータ<dd><p>ファイル名（それ自体Unicode文字列）をもつ一部の場合において、<a href="#the-drag-data-item-kind" id="the-drag-data-store:the-drag-data-item-kind">ドラッグデータアイテムの種類</a>ごとのように、Unicodeまたはバイナリー文字列。</dl>

    <p><a href="#drag-data-store-item-list" id="the-drag-data-store:drag-data-store-item-list">ドラッグデータストア項目リスト</a>は、項目がリストに追加された順序で並べられ、最近では最後に追加された。</p>

   <li><p>ドラッグ中のUIフィードバックを生成するために使用される、以下の情報：</p>

    <ul><li><dfn id="drag-data-store-default-feedback">ドラッグデータストアのデフォルトフィードバック</dfn>として知られる、ユーザーエージェント定義のデフォルトフィードバック情報。<li>任意で、<dfn id="drag-data-store-bitmap">ドラッグデータストアビットマップ</dfn>および<dfn id="drag-data-store-hot-spot-coordinate">ドラッグデータストアホットスポット座標</dfn>として知られる、そのイメージ内にあるビットマップ画像とポイント座標。</ul>

   <li><p>次のいずれかである<dfn id="drag-data-store-mode">ドラッグデータストアモード</dfn>：</p>

    <dl><dt><dfn id="concept-dnd-rw">読み書きモード</dfn><dd><p><code id="the-drag-data-store:event-dnd-dragstart"><a href="#event-dnd-dragstart">dragstart</a></code>イベントに対して。新しいデータは<a href="#drag-data-store" id="the-drag-data-store:drag-data-store">ドラッグデータストア</a>に追加できる。</p>

     <dt><dfn id="concept-dnd-ro">読み取り専用モード</dfn><dd><p><code id="the-drag-data-store:event-dnd-drop"><a href="#event-dnd-drop">drop</a></code>イベントに対して。ドラッグされたデータを表す項目のリストは、データも含めて、読み取り可能である。新たなデータは追加できない。</p>

     <dt><dfn id="concept-dnd-p">保護モード</dfn><dd><p>他のすべてのイベントに対して。ドラッグされたデータを表す項目の<a href="#drag-data-store" id="the-drag-data-store:drag-data-store-2">ドラッグデータストア</a>リストで形式および種類は列挙されるが、データ自体が使用できず、新たなデータは追加できない。</p>

     </dl>

   <li><p>文字列である、<dfn id="drag-data-store-allowed-effects-state">ドラッグデータストアの許可された効果の状態</dfn>。</p>

   </ul>

  <p><a href="#drag-data-store" id="the-drag-data-store:drag-data-store-3">ドラッグデータストア</a>が<dfn id="create-a-drag-data-store">作成</dfn>された場合、それはその<a href="#drag-data-store-item-list" id="the-drag-data-store:drag-data-store-item-list-2">ドラッグデータストアアイテムリスト</a>が空であるように初期化されなければならず、それは<a href="#drag-data-store-default-feedback" id="the-drag-data-store:drag-data-store-default-feedback">ドラッグデータストアのデフォルトフィードバック</a>を持たず、<a href="#drag-data-store-bitmap" id="the-drag-data-store:drag-data-store-bitmap">ドラッグデータストアのビットマップ</a>および<a href="#drag-data-store-hot-spot-coordinate" id="the-drag-data-store:drag-data-store-hot-spot-coordinate">ドラッグデータストアのホットスポット座標</a>を持たず、その<a href="#drag-data-store-mode" id="the-drag-data-store:drag-data-store-mode">ドラッグデータストアモード</a>は<a href="#concept-dnd-p" id="the-drag-data-store:concept-dnd-p">保護モード</a>であり、その<a href="#drag-data-store-allowed-effects-state" id="the-drag-data-store:drag-data-store-allowed-effects-state">ドラッグデータストアの許可された効果の状態</a>は文字列"<code>uninitialized</code>"である。</p>


  <h4 id="the-datatransfer-interface"><span class="secno">6.8.3</span> The <code>DataTransfer</code> interface<a href="#the-datatransfer-interface" class="self-link"></a></h4>

  <p><code>DataTransfer</code>オブジェクトは、ドラッグアンドドロップ操作を支える<a href="#drag-data-store" id="the-datatransfer-interface:drag-data-store">ドラッグデータストア</a>を公開するために使用される。</p>

  

  <dl class="domintro"><dt><var>dataTransfer</var> = new <code id="dom-datatransfer">DataTransfer</code>()<dd><p>空の<a href="#drag-data-store" id="the-datatransfer-interface:drag-data-store-2">ドラッグデータストア</a>をもつ新しい<code>DataTransfer</code>オブジェクトを作成する。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-dropeffect">dropEffect</code> [ = <var>value</var> ]<dd><p>現在選択されている操作の種類を返す。操作の種類が<code id="the-datatransfer-interface:dom-datatransfer-effectallowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>属性によって許可されるものの1つでない場合、操作は失敗する。</p>

    <p>選択した操作を変更す設定が可能である。</p>

    <p>可能な値は、"<code>none</code>"、"<code>copy</code>"、"<code>link</code>"、および"<code>move</code>"である。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-effectallowed">effectAllowed</code> [ = <var>value</var> ]<dd><p>許可される操作の種類を返す。</p>

    <p>許可される操作を変更するために、（<code id="the-datatransfer-interface:event-dnd-dragstart"><a href="#event-dnd-dragstart">dragstart</a></code>イベント中に）設定可能である。</p>

    <p>可能な値は、"<code>none</code>"、"<code>copy</code>"、"<code>copyLink</code>"、"<code>copyMove</code>"、"<code>link</code>"、"<code>linkMove</code>"、"<code>move</code>"、"<code>all</code>"、および"<code>uninitialized</code>"である。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-items">items</code><dd><p>ドラッグデータとともに、<code>DataTransferItemList</code>オブジェクトを返す。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-setdragimage">setDragImage</code>(<var>element</var>, <var>x</var>, <var>y</var>)<dd><p>以前に指定されたフィードバックを置換し、ドラッグフィードバックを更新するために指定された要素を使用する。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-types">types</code><dd><p><code id="the-datatransfer-interface:event-dnd-dragstart-2"><a href="#event-dnd-dragstart">dragstart</a></code>イベントで設定されたフォーマットを列挙する<a id="the-datatransfer-interface:frozen-array" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-frozen-array-type" data-x-internal="frozen-array">凍結された配列</a>を返す。さらに、任意のファイルがドラッグされている場合、型の1つは文字列"<code>Files</code>"となる。</p>

   <dt><var>data</var> = <var>dataTransfer</var> . <code id="dom-datatransfer-getdata">getData</code>(<var>format</var>)<dd><p>指定されたデータを返す。そのようなデータが存在しない場合、空の文字列を返す。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-setdata">setData</code>(<var>format</var>, <var>data</var>)<dd><p>指定されたデータを追加する。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-cleardata">clearData</code>( [ <var>format</var> ] )<dd><p>指定した書式のデータを削除する。引数が省略された場合、すべてのデータを削除する。</p>

   <dt><var>dataTransfer</var> . <code id="dom-datatransfer-files">files</code><dd><p>もしあれば、ドラッグされているファイルの<code id="the-datatransfer-interface:filelist"><a data-x-internal="filelist" href="https://triple-underscore.github.io/File_API-ja.html#filelist-section">FileList</a></code>を返す。</p>

   </dl>

  <p><a href="#dndevents">ドラッグアンドドロップイベント</a>の一部として作成される<code>DataTransfer</code>オブジェクトは、そのイベントが発生している間のみ有効である。</p>

  


  <h5 id="the-datatransferitemlist-interface"><span class="secno">6.8.3.1</span> The <code>DataTransferItemList</code> interface<a href="#the-datatransferitemlist-interface" class="self-link"></a></h5>

  <p>各<code>DataTransfer</code>オブジェクトは<code>DataTransferItemList</code>オブジェクトに関連付けられる。</p>

  

  <dl class="domintro"><dt><var>items</var> . <code id="dom-datatransferitemlist-length">length</code><dd><p><a href="#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store">ドラッグデータストア</a>内のアイテムの数を返す。<dt><var>items</var>[<var>index</var>]<dd><p><a href="#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-2">ドラッグデータストア</a>内の<var>index</var>番目のエントリーを表す<code>DataTransferItem</code>オブジェクトを返す。</p>

   <dt><var>items</var> . <code id="dom-datatransferitemlist-remove">remove</code>(<var>index</var>)<dd><p><a href="#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-3">ドラッグデータストア</a>内の<var>index</var>番目のエントリーを削除する。</p>

   <dt><var>items</var> . <code id="dom-datatransferitemlist-clear">clear</code>()<dd><p><a href="#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-4">ドラッグデータストア</a>内のすべてのエントリーを削除する。</p>

   <dt><var>items</var> . <code id="dom-datatransferitemlist-add">add</code>(<var>data</var>)<dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-add"><a href="#dom-datatransferitemlist-add">add</a></code>(<var>data</var>, <var>type</var>)<dd><p><a href="#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-5">ドラッグデータストア</a>に指定されたデータに対する新しいエントリーを追加する。データがプレーンテキストである場合、<var>type</var>文字列も提供される必要がある。</p>

   </dl>

  


  <h5 id="the-datatransferitem-interface"><span class="secno">6.8.3.2</span> The <code>DataTransferItem</code> interface<a href="#the-datatransferitem-interface" class="self-link"></a></h5>

  <p>各<code>DataTransferItem</code>オブジェクトは<code>DataTransfer</code>オブジェクトに関連付けられる。</p>

  

  <dl class="domintro"><dt><var>item</var> . <code id="dom-datatransferitem-kind">kind</code><dd><p><a href="#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind">ドラッグデータ項目の種類</a>、"string"、"file"のいずれかを返す。</p>

   <dt><var>item</var> . <code id="dom-datatransferitem-type">type</code><dd><p><a href="#the-drag-data-item-type-string" id="the-datatransferitem-interface:the-drag-data-item-type-string">ドラッグデータ項目型文字列</a>を返す。</p>

   <dt><var>item</var> . <code id="dom-datatransferitem-getasstring">getAsString</code>(<var>callback</var>)<dd><p>Invokes the callback with the string data as the argument, if <a href="#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-2">the drag data item kind</a> is <i>text</i>.</p>

   <dt><var>file</var> = <var>item</var> . <code id="dom-datatransferitem-getasfile">getAsFile</code>()<dd><p><a href="#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-3">ドラッグデータアイテムの種類</a>が<i>File</i>である場合、<code id="the-datatransferitem-interface:file"><a data-x-internal="file" href="https://w3c.github.io/FileAPI/#dfn-file">File</a></code>オブジェクトを返す。</p>

   </dl>

  



  <h4 id="the-dragevent-interface"><span class="secno">6.8.4</span> The <code>DragEvent</code> interface<a href="#the-dragevent-interface" class="self-link"></a></h4>

  <p>ドラッグアンドドロップ処理モデルは、複数のイベントを含む。これらはすべて<code>DragEvent</code>インターフェイスを使用する。</p>

  

  <dl class="domintro"><dt><var>event</var> . <code id="dom-dragevent-datatransfer">dataTransfer</code><dd><p>イベントの<code>DataTransfer</code>オブジェクトを返す。</p>

   </dl>

  <p class="note">他のイベントインターフェイスとの整合性を保つため、<code>DragEvent</code>インターフェイスはコンストラクタを持つけれども、特に有用ではない。<code>DataTransfer</code>オブジェクトは、ドラッグアンドドロップの間にブラウザーによって調整される処理およびセキュリティーモデルを持つので、特に、スクリプトから有用な<code>DataTransfer</code>オブジェクトを作成する方法はない。</p>

  

  


  


  <h4 id="dndevents"><span class="secno">6.8.5</span> Events summary<a href="#dndevents" class="self-link"></a></h4>

  

  <p>次のイベントは、ドラッグアンドドロップモデルに関与する。</p>

  <table><thead><tr><th>イベント名<th>ターゲット<th>取消可能か？<th><a href="#drag-data-store-mode" id="dndevents:drag-data-store-mode">ドラッグデータストアモード</a><th><code id="dndevents:dom-datatransfer-dropeffect"><a href="#dom-datatransfer-dropeffect">dropEffect</a></code><th>デフォルトの動作<tbody><tr><td><dfn id="event-dnd-dragstart"><code>dragstart</code></dfn><td><span>ソースノード</span><td>✓取消可能<td><a href="#concept-dnd-rw" id="dndevents:concept-dnd-rw">読み書きモード</a><td>"<code>none</code>"<td>ドラッグアンドドロップ操作を開始する<tr><td><dfn id="event-dnd-drag"><code>drag</code></dfn><td><span>ソースノード</span><td>✓取消可能<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p">保護モード</a><td>"<code>none</code>"<td>ドラッグアンドドロップ操作を続行する<tr><td><dfn id="event-dnd-dragenter"><code>dragenter</code></dfn><td><span>即時ユーザー選択</span>または<a id="dndevents:the-body-element-2" href="dom.html#the-body-element-2">body要素</a><td>✓取消可能<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p-2">保護モード</a><td><a href="#dropEffect-initialisation"><code>effectAllowed</code>値をベースにする</a><td>潜在的な<span>ターゲット要素</span>として<span>即時ユーザー選択</span>を拒絶する<tr><td><dfn id="event-dnd-dragexit"><code>dragexit</code></dfn><td><span>前のターゲット要素</span><td>—<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p-3">保護モード</a><td>"<code>none</code>"<td>なし<tr><td><dfn id="event-dnd-dragleave"><code>dragleave</code></dfn><td><span>前のターゲット要素</span><td>—<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p-4">保護モード</a><td>"<code>none</code>"<td>なし<tr><td><dfn id="event-dnd-dragover"><code>dragover</code></dfn><td><span>現在のターゲット要素</span><td>✓取消可能<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p-5">保護モード</a><td><a href="#dropEffect-initialisation"><code>effectAllowed</code>値をベースにする</a><td>"none"に<span>現在のドラッグ操作</span>リセットする<tr><td><dfn id="event-dnd-drop"><code>drop</code></dfn><td><span>現在のターゲット要素</span><td>✓取消可能<td><a href="#concept-dnd-ro" id="dndevents:concept-dnd-ro">読み取り専用モード</a><td><span>現在のドラッグ操作</span><td>変化する<tr><td><dfn id="event-dnd-dragend"><code>dragend</code></dfn><td><span>ソースノード</span><td>—<td><a href="#concept-dnd-p" id="dndevents:concept-dnd-p-6">保護モード</a><td><span>現在のドラッグ操作</span><td>変化する</table>

  <p>上記の表に示されないもの：すべてのこれらイベントバブルは構成され、および<code id="dndevents:dom-datatransfer-effectallowed"><a href="#dom-datatransfer-effectallowed">effectAllowed</a></code>属性は常に、それが<code id="dndevents:event-dnd-dragstart"><a href="#event-dnd-dragstart">dragstart</a></code>イベント後に持っていた値を持ち、<code id="dndevents:event-dnd-dragstart-2"><a href="#event-dnd-dragstart">dragstart</a></code>イベントで"<code>uninitialized</code>"をデフォルトとする。</p>



  <h4 id="the-draggable-attribute"><span class="secno">6.8.6</span> The <dfn><code>draggable</code></dfn> attribute<a href="#the-draggable-attribute" class="self-link"></a></h4>

  <p>すべての<a id="the-draggable-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>は<code id="the-draggable-attribute:the-draggable-attribute"><a href="#the-draggable-attribute">draggable</a></code>コンテンツ属性設定を持ってもよい。<code id="the-draggable-attribute:the-draggable-attribute-2"><a href="#the-draggable-attribute">draggable</a></code>属性は、<a id="the-draggable-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。それは3つの状態を持つ。1番目の状態は<i>true</i>であり、それはキーワード<code>true</code>を持つ。2番目の状態は<i>false</i>であり、それはキーワード<code>false</code>を持つ。3番目の状態は<i>auto</i>である。これは、キーワードを持たないが、<i id="the-draggable-attribute:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>かつ<i id="the-draggable-attribute:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>である。</p>

  <p><i>true</i>状態は要素がドラッグ可能であることを意味し、<i>false</i>状態はそうでないことを意味する。<i>auto</i>状態はユーザーエージェントのデフォルト動作を使用する。</p>

  <p><code id="the-draggable-attribute:the-draggable-attribute-3"><a href="#the-draggable-attribute">draggable</a></code>属性を持つ要素はまた、非視覚的な相互作用の目的のために要素を名付ける<code id="the-draggable-attribute:attr-title"><a href="dom.html#attr-title">title</a></code>属性を持つべきである。</p>

  <dl class="domintro"><dt><var>element</var> . <code id="dom-draggable">draggable</code> [ = <var>value</var> ]<dd><p>要素がドラッグ可能である場合にtrueを返す。そうでなければfalseを返す。</p>

    <p>デフォルトを上書きし<code id="the-draggable-attribute:the-draggable-attribute-4"><a href="#the-draggable-attribute">draggable</a></code>コンテンツの属性を設定するための、設定が可能である。</p>

   </dl>

  






  




  <nav><a href="interaction.html">← 6 ユーザーとの対話処理</a> — <a href="./">目次</a> — <a href="browsers.html">7 ウェブページの読み込み →</a></nav>
