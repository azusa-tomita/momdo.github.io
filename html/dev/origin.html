<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Developer's Edition 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="/dev/search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><h2 id="dev-edition-h2" class="no-num no-toc">Developer's Edition — Last Updated <span class="pubdate">25 June 2020</span></h2></hgroup>
   

   <div id="search"><input placeholder="Search. Press '/'" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="window-object.html">← 7.2 The Window object</a> — <a href="./">Table of Contents</a> — <a href="history.html">7.6 Session history and navigation →</a></nav><ol class="toc"><li><ol><li><a href="origin.html#origin"><span class="secno">7.3</span> 生成元</a><ol><li><a href="origin.html#relaxing-the-same-origin-restriction"><span class="secno">7.3.1</span> 同一生成元制限を緩和する</a></ol><li><a href="origin.html#sandboxing"><span class="secno">7.4</span> サンドボックス</a><li><a href="origin.html#cross-origin-opener-policies"><span class="secno">7.5</span> Cross-origin opener policies</a><ol><li><a href="origin.html#the-cross-origin-opener-policy-header"><span class="secno">7.5.1</span> The `<code>Cross-Origin-Opener-Policy</code>` header</a><li><a href="origin.html#browsing-context-group-switches-due-to-cross-origin-opener-policy"><span class="secno">7.5.2</span> Browsing context group switches due to cross-origin opener policy</a></ol></ol></ol><h3 id="origin"><span class="secno">7.3</span> 生成元<a href="#origin" class="self-link"></a></h3>
  

  <p>生成元は、ウェブのセキュリティーモデルの基本的な通貨である。生成元を共有するウェブプラットフォーム内の2つの当事者が互いに信頼し、同一の権限を有すると仮定される。異なる生成元をもつ当事者は、互いに潜在的に悪意があると見なされ、互いから程度を変化させるよう隔離される。</p>

  <p class="example">たとえば、<code>bank.example.com</code>でホストされるExample Bankのウェブサイトは、<code>charity.example.org</code>でホストExample CharityのウェブサイトのDOMを検査しようとすると、<a id="origin:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="origin:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> が発生する。</p>

  <hr>

  <p id="origin-2"><dfn id="concept-origin" data-export="">生成元</dfn>は次のいずれかである：</p>

  <dl><dt>An <dfn id="concept-origin-opaque" data-export="">opaque origin</dfn><dd><p>An internal value, with no serialization it can be recreated from (it is serialized as "<code>null</code>" per <span>serialization of an origin</span>), for which the only meaningful operation is testing for equality.<dt>A <dfn id="concept-origin-tuple" data-export="">tuple origin</dfn><dd><p>A <a href="#concept-origin-tuple" id="origin:concept-origin-tuple">tuple</a> consists of:<ul class="brief"><li>A <dfn data-dfn-for="origin" id="concept-origin-scheme" data-export="">scheme</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-scheme" id="origin:concept-url-scheme" data-x-internal="concept-url-scheme">scheme</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-host" data-export="">host</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="origin:concept-host" data-x-internal="concept-host">host</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-port" data-export="">port</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-port" id="origin:concept-url-port" data-x-internal="concept-url-port">port</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-domain" data-export="">domain</dfn> (null or a <a href="https://triple-underscore.github.io/URL-ja.html#concept-domain" id="origin:concept-domain" data-x-internal="concept-domain">domain</a>). Null unless stated otherwise.</ul>
   </dl>

  <p class="note"><a href="#concept-origin" id="origin:concept-origin">Origins</a> can be shared, e.g., among multiple <code>Document</code> objects. Furthermore, <a href="#concept-origin" id="origin:concept-origin-2">origins</a> are generally immutable. Only the <a href="#concept-origin-domain" id="origin:concept-origin-domain">domain</a> of a <a href="#concept-origin-tuple" id="origin:concept-origin-tuple-2">tuple origin</a> can be changed, and only through the <code id="origin:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> API.</p>

  <p>The <dfn id="concept-origin-effective-domain" data-export="">effective domain</dfn> of an <a href="#concept-origin" id="origin:concept-origin-3">origin</a> <var>origin</var> is computed as follows:</p>

  <ol><li><p>If <var>origin</var> is an <a href="#concept-origin-opaque" id="origin:concept-origin-opaque">opaque origin</a>, then return null.<li><p>If <var>origin</var>'s <a href="#concept-origin-domain" id="origin:concept-origin-domain-2">domain</a> is non-null, then return <var>origin</var>'s <a href="#concept-origin-domain" id="origin:concept-origin-domain-3">domain</a>.<li><p>Return <var>origin</var>'s <a href="#concept-origin-host" id="origin:concept-origin-host">host</a>.</ol>

  


  <h4 id="relaxing-the-same-origin-restriction"><span class="secno">7.3.1</span> 同一生成元制限を緩和する<a href="#relaxing-the-same-origin-restriction" class="self-link"></a></h4><aside class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/domain" title="The domain property of the Document interface gets/sets the domain portion of the origin of the current document, as used by the same origin policy.">Document/domain</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></aside>

  <dl class="domintro"><dt><var>document</var> . <code id="dom-document-domain">domain</code> [ = <var>domain</var> ]<dd><p>セキュリティーチェックのために使用される現在のドメインを返す。</p>

    <p>Can be set to a value that removes subdomains, to change the <a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin">origin</a>'s <a href="#concept-origin-domain" id="relaxing-the-same-origin-restriction:concept-origin-domain">domain</a> to allow pages on other subdomains of the same domain (if they do the same thing) to access each other. （サンドボックス化された<code id="relaxing-the-same-origin-restriction:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>において設定できない。）</p>
   </dl>

  

  <p class="note"><code id="relaxing-the-same-origin-restriction:dom-document-domain"><a href="#dom-document-domain"> domain</a></code>属性は、ドメインの異なるホスト上の有効なページに互いのDOMをアクセスするために使用される。</p>

  <p class="warning">共有ホスティングを使用する際<code id="relaxing-the-same-origin-restriction:dom-document-domain-2"><a href="#dom-document-domain">document.domain</a></code>の属性を使用しない。信頼できない第三者が同じIPアドレスだが別のポート上でHTTPサーバーをホストできる場合、<code id="relaxing-the-same-origin-restriction:dom-document-domain-3"><a href="#dom-document-domain">document.domain</a></code>属性が使用された後に生成元を比較する際にポートは無視されるように、通常同じホスト上の2つの異なるサイトを保護する同一生成元の保護は失敗するだろう。</p>




  <h3 id="sandboxing"><span class="secno">7.4</span> サンドボックス<a href="#sandboxing" class="self-link"></a></h3>

  <p><dfn id="sandboxing-flag-set" data-export="">サンドボックスフラグ設定</dfn>は、潜在的に信頼されないリソースが持つ能力を制限するために使用される、以下のフラグに属するゼロ個以上のセットである：</p>

  <dl><dt><dfn id="sandboxed-navigation-browsing-context-flag" data-export="">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>This flag <a href="#sandboxLinks">prevents content from navigating browsing contexts other than the sandboxed browsing context itself</a> (or browsing contexts further nested inside it), <a href="browsers.html#auxiliary-browsing-context" id="sandboxing:auxiliary-browsing-context">auxiliary browsing contexts</a> (which are protected by the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context flag</a> defined next), and the <a id="sandboxing:top-level-browsing-context" href="browsers.html#top-level-browsing-context">top-level browsing context</a> (which is protected by the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag">sandboxed top-level navigation without user activation browsing context flag</a> and <a href="#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag">sandboxed top-level navigation with user activation browsing context flag</a> defined below).</p>

    <p><a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-2">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a>が設定されない場合、それにもかかわらず一定の場合における制限はポップアップ（新しい<a href="browsers.html#top-level-browsing-context" id="sandboxing:top-level-browsing-context-2">トップレベルブラウジングコンテキスト</a>）を開くことができる。これらの<a href="browsers.html#browsing-context" id="sandboxing:browsing-context">ブラウジングコンテキスト</a>は常に、<dfn id="one-permitted-sandboxed-navigator">1つの許可されたサンドボックス化されたナビゲーター</dfn>を持ち、実際に移動するために作成した<a id="sandboxing:browsing-context-2" href="browsers.html#browsing-context">ブラウジングコンテキスト</a>を許可する、ブラウジングコンテキストが作成される際に設定を持つ。（そうでなければ、<a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a>は、それらが開かれた場合であってもナビゲートされていくのを防ぐだろう。）</p>
   <dt><dfn id="sandboxed-auxiliary-navigation-browsing-context-flag" data-export="">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>This flag <a href="#sandboxWindowOpen">prevents content from creating new auxiliary browsing contexts</a>, e.g. using the <code id="sandboxing:attr-hyperlink-target"><a href="links.html#attr-hyperlink-target">target</a></code> attribute or the <code id="sandboxing:dom-open"><a href="window-object.html#dom-open">window.open()</a></code> method.</p>
   <dt>The <dfn id="sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" data-export="">sandboxed top-level navigation without user activation browsing context flag</dfn><dd><p>このフラグは、<a href="#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。It is consulted only when the sandboxed browsing context's <a id="sandboxing:active-window" href="browsers.html#active-window">active window</a> does not have <span>transient activation</span>.</p>

    <p>When the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-2">sandboxed top-level navigation without user activation browsing context flag</a> is <em>not</em> set, content can navigate its <a id="sandboxing:top-level-browsing-context-3" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, but other <a href="browsers.html#browsing-context" id="sandboxing:browsing-context-3">browsing contexts</a> are still protected by the <a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag-2">sandboxed navigation browsing context flag</a> and possibly the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-3">sandboxed auxiliary navigation browsing context flag</a>.</p>
   <dt>The <dfn id="sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" data-export="">sandboxed top-level navigation with user activation browsing context flag</dfn><dd><p>このフラグは、<a href="#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。It is consulted only when the sandboxed browsing context's <a id="sandboxing:active-window-2" href="browsers.html#active-window">active window</a> has <span>transient activation</span>.</p>

    <p>As with the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-3">sandboxed top-level navigation without user activation browsing context flag</a>, this flag only affects the <a id="sandboxing:top-level-browsing-context-4" href="browsers.html#top-level-browsing-context">top-level browsing context</a>; if it is not set, other <a href="browsers.html#browsing-context" id="sandboxing:browsing-context-4">browsing contexts</a> might still be protected by other flags.</p>
   <dt><dfn id="sandboxed-plugins-browsing-context-flag" data-export="">サンドボックス化されたプラグインブラウジングコンテキストフラグ</dfn><dd><p>This flag prevents content from instantiating <a href="infrastructure.html#plugin" id="sandboxing:plugin">plugins</a>, whether using <a href="#sandboxPluginEmbed">the <code>embed</code> element</a>, <a href="#sandboxPluginObject">the <code>object</code> element</a>, or through <a href="#sandboxPluginNavigate">navigation</a> of their <a id="sandboxing:nested-browsing-context" href="browsers.html#nested-browsing-context">nested browsing context</a>, unless those <a href="infrastructure.html#plugin" id="sandboxing:plugin-2">plugins</a> can be <a href="infrastructure.html#concept-plugin-secure" id="sandboxing:concept-plugin-secure">secured</a>.<dt><dfn id="sandboxed-origin-browsing-context-flag" data-export="">サンドボックス化された生成元ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="#sandboxOrigin">一意な生成元にコンテンツを強制する</a>。したがって、同一<a href="#concept-origin" id="sandboxing:concept-origin">生成元</a>から他のコンテンツにアクセスすることを防止する。</p>

    <p>このフラグはまた、<a href="#sandboxCookies"><code>document.cookie</code> IDL属性からの読み取りまたは書き込みをするスクリプトを防止し</a>、<code id="sandboxing:dom-localstorage"><a href="webstorage.html#dom-localstorage">localStorage</a></code>へのアクセスをブロックする。</p>
   <dt><dfn id="sandboxed-forms-browsing-context-flag" data-export="">サンドボックス化されたフォームブラウジングコンテキストフラグ</dfn><dd><p>このフラグは<a href="#sandboxSubmitBlocked">フォーム送信をブロックする</a>。</p>
   <dt><dfn id="sandboxed-pointer-lock-browsing-context-flag" data-export="">サンドボックス化されたポインターロックブラウジングコンテキストフラグ</dfn><dd><p>このフラグはPointer Lock APIを無効にする。<a href="references.html#refsPOINTERLOCK">[POINTERLOCK]</a></p>
   <dt><dfn id="sandboxed-scripts-browsing-context-flag" data-export="">サンドボックス化されたスクリプトブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="#sandboxScriptBlocked">スクリプトの実行をブロックする</a>。</p>
   <dt><dfn id="sandboxed-automatic-features-browsing-context-flag" data-export="">サンドボックス化された自動機能ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="media.html#attr-media-autoplay" id="sandboxing:attr-media-autoplay">自動ビデオ再生</a>や<a href="interaction.html#attr-fe-autofocus" id="sandboxing:attr-fe-autofocus">自動フォームコントロールフォーカス</a>などの、自動的に切り替える機能をブロックする。</p>
   <dt><dfn id="sandboxed-document.domain-browsing-context-flag" data-export="">サンドボックス化された<code>document.domain</code>ブラウジングコンテキストフラグ</dfn>。<dd><p>This flag prevents content from using the <code id="sandboxing:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> setter.</p>
   <dt>The <dfn id="sandbox-propagates-to-auxiliary-browsing-contexts-flag" data-export="">sandbox propagates to auxiliary browsing contexts flag</dfn><dd><p>This flag prevents content from escaping the sandbox by ensuring that any <a id="sandboxing:auxiliary-browsing-context-2" href="browsers.html#auxiliary-browsing-context">auxiliary browsing context</a> it creates inherits the content's <a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set">active sandboxing flag set</a>.</p>
   <dt>The <dfn id="sandboxed-modals-flag" data-export="">sandboxed modals flag</dfn><dd><p>This flag prevents content from using any of the following features to produce modal dialogs:</p>

    <ul><li><code id="sandboxing:dom-alert"><a href="timers-and-user-prompts.html#dom-alert">window.alert()</a></code><li><code id="sandboxing:dom-confirm"><a href="timers-and-user-prompts.html#dom-confirm">window.confirm()</a></code><li><code id="sandboxing:dom-print"><a href="timers-and-user-prompts.html#dom-print">window.print()</a></code><li><code id="sandboxing:dom-prompt"><a href="timers-and-user-prompts.html#dom-prompt">window.prompt()</a></code><li>the <code id="sandboxing:event-beforeunload"><a href="indices.html#event-beforeunload">beforeunload</a></code> event</ul>
   <dt>The <dfn id="sandboxed-orientation-lock-browsing-context-flag" data-export="">sandboxed orientation lock browsing context flag</dfn><dd><p>This flag disables the ability to lock the screen orientation. <a href="references.html#refsSCREENORIENTATION">[SCREENORIENTATION]</a></p>
   <dt>The <dfn id="sandboxed-presentation-browsing-context-flag" data-export="">sandboxed presentation browsing context flag</dfn><dd><p>This flag disables the Presentation API. <a href="references.html#refsPRESENTATION">[PRESENTATION]</a></p>
   <dt>The <dfn id="sandboxed-downloads-browsing-context-flag" data-export="">sandboxed downloads browsing context flag</dfn><dd><p>This flag prevents content from initiating or instantiating downloads, whether through <span>downloading hyperlinks</span> or through <span>navigation</span> that gets handled <span>as a download</span>.</p>
   </dl>

  <p>When the user agent is to <dfn id="parse-a-sandboxing-directive" data-export="">parse a sandboxing directive</dfn>, given a string <var>input</var>, a <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set">sandboxing flag set</a> <var>output</var>, it must run the following steps:</p>

  <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#split-on-ascii-whitespace" id="sandboxing:split-a-string-on-spaces" data-x-internal="split-a-string-on-spaces">Split <var>input</var> on ASCII whitespace</a>, to obtain <var>tokens</var>.<li><p><var>output</var>を空にする。<li><p><var>output</var>に次のフラグを追加する：</p>

    <ul><li><p><a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag-3">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-popups"><code>allow-popups</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-4">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a><li><p>The <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-4">sandboxed top-level navigation without user activation browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-top-navigation"><code>allow-top-navigation</code></dfn> keyword.<li><p>The <a href="#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag-2">sandboxed top-level navigation with user activation browsing context flag</a>, unless <var>tokens</var> contains either the <dfn id="attr-iframe-sandbox-allow-top-navigation-by-user-activation"><code>allow-top-navigation-by-user-activation</code></dfn> keyword or the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code> keyword.</p>

      <p class="note">This means that if the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation-2"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code> is present, the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation-by-user-activation"><a href="#attr-iframe-sandbox-allow-top-navigation-by-user-activation">allow-top-navigation-by-user-activation</a></code> keyword will have no effect. For this reason, specifying both is a document conformance error.</p>
     <li><p><a href="#sandboxed-plugins-browsing-context-flag" id="sandboxing:sandboxed-plugins-browsing-context-flag">サンドボックス化されたプラグインブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-same-origin"><code>allow-same-origin</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-origin-browsing-context-flag" id="sandboxing:sandboxed-origin-browsing-context-flag">サンドボックス化された生成元ブラウジングコンテキストフラグ</a></p>

      <div class="note"><p><code id="sandboxing:attr-iframe-sandbox-allow-same-origin"><a href="#attr-iframe-sandbox-allow-same-origin">allow-same-origin</a></code>キーワードは2つの例を対象とする。</p>

       <p>1つ目は、依然としてサンドボックス化されたコンテンツのDOMへのアクセスを可能する一方で、スクリプトを無効にするためにサンドボックス化されるべき同じサイトからコンテンツを許可するために使用できる。</p>

       <p>Second, it can be used to embed content from a third-party site, sandboxed to prevent that site from opening popups, etc, without preventing the embedded page from communicating back to its originating site, using the database APIs to store data, etc.</p>
      </div>
     <li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-forms"><code>allow-forms</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-forms-browsing-context-flag" id="sandboxing:sandboxed-forms-browsing-context-flag">サンドボックス化されたフォームブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-pointer-lock"><code>allow-pointer-lock</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-pointer-lock-browsing-context-flag" id="sandboxing:sandboxed-pointer-lock-browsing-context-flag">サンドボックス化されたポインターロックブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-scripts"><code>allow-scripts</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-scripts-browsing-context-flag" id="sandboxing:sandboxed-scripts-browsing-context-flag">サンドボックス化されたスクリプトブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が（上記で定義された）<code id="sandboxing:attr-iframe-sandbox-allow-scripts"><a href="#attr-iframe-sandbox-allow-scripts">allow-scripts</a></code>キーワードを含む場合を除いて、<a href="#sandboxed-automatic-features-browsing-context-flag" id="sandboxing:sandboxed-automatic-features-browsing-context-flag">サンドボックス化された自動機能ブラウジングコンテキストフラグ</a></p>

      <p class="note">このフラグは、サンドボックスの自動機能　これらの機能がとにかく些細なことも可能であるスクリプトが有効である場合、およびそれらが宣言機能を使用できるようにするよりむしろサンドボックス化された場合、著者がそれらを行うためのスクリプトを使用するよう強制することが不幸であるので、スクリプトと同じキーワードで緩和される。</p>
     <li><p><a href="#sandboxed-document.domain-browsing-context-flag" id="sandboxing:sandboxed-document.domain-browsing-context-flag">サンドボックス化された<code>document.domain</code>ブラウジングコンテキストフラグ</a>。<li><p>The <a href="#sandbox-propagates-to-auxiliary-browsing-contexts-flag" id="sandboxing:sandbox-propagates-to-auxiliary-browsing-contexts-flag">sandbox propagates to auxiliary browsing contexts flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-popups-to-escape-sandbox"><code>allow-popups-to-escape-sandbox</code></dfn> keyword.<li><p>The <a href="#sandboxed-modals-flag" id="sandboxing:sandboxed-modals-flag">sandboxed modals flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-modals"><code>allow-modals</code></dfn> keyword.<li><p>The <a href="#sandboxed-orientation-lock-browsing-context-flag" id="sandboxing:sandboxed-orientation-lock-browsing-context-flag">sandboxed orientation lock browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-orientation-lock"><code>allow-orientation-lock</code></dfn> keyword.<li><p>The <a href="#sandboxed-presentation-browsing-context-flag" id="sandboxing:sandboxed-presentation-browsing-context-flag">sandboxed presentation browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-presentation"><code>allow-presentation</code></dfn> keyword.<li><p>The <a href="#sandboxed-downloads-browsing-context-flag" id="sandboxing:sandboxed-downloads-browsing-context-flag">sandboxed downloads browsing context flag</a>, unless <var> tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-downloads"><code>allow-downloads</code></dfn> keyword.</ul>
   </ol>

  <hr>

  <p>すべての<a id="sandboxing:top-level-browsing-context-5" href="browsers.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>は、<a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-2">サンドボックスフラグが設定</a>される、<dfn id="popup-sandboxing-flag-set">ポップアップサンドボックスフラグ設定</dfn>を持つ。<a id="sandboxing:browsing-context-5" href="browsers.html#browsing-context">ブラウジングコンテキスト</a>が作成される場合、その<a href="#popup-sandboxing-flag-set" id="sandboxing:popup-sandboxing-flag-set">ポップアップサンドフラグ設定</a>は空でなければならない。It is populated by <span>the rules for choosing a browsing context</span>.</p>

  <p>Every <code id="sandboxing:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code> element has an <dfn id="iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</dfn>, which is a <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-3">sandboxing flag set</a>. Which flags in an <a href="#iframe-sandboxing-flag-set" id="sandboxing:iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</a> are set at any particular time is determined by the <code id="sandboxing:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code> element's <code id="sandboxing:attr-iframe-sandbox"><a href="iframe-embed-object.html#attr-iframe-sandbox">sandbox</a></code> attribute.</p>

  <p>Every <code>Document</code> has an <dfn data-dfn-for="Document" id="active-sandboxing-flag-set" data-export="">active sandboxing flag set</dfn>, which is a <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-4">sandboxing flag set</a>. When the <code>Document</code> is created, its <a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set-2">active sandboxing flag set</a> must be empty. It is populated by the <span>navigation algorithm</span>.</p>

  <p><span>ナビゲーションアルゴリズム</span>によって得られるすべてのリソースは、<a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-5">サンドボックスフラグが設定</a>される、<dfn id="forced-sandboxing-flag-set" data-export="">強制サンドボックスフラグ設定</dfn>を持つ。デフォルトでリソースは、その<a href="#forced-sandboxing-flag-set" id="sandboxing:forced-sandboxing-flag-set">強制サンドボックスフラグセット</a>で設定されるフラグを持たないが、他の仕様は、特定のフラグが設定されていることを定義できる。</p>

  <p class="note">具体的には、<a href="#forced-sandboxing-flag-set" id="sandboxing:forced-sandboxing-flag-set-2">強制サンドボックスフラグセット</a>が<cite>Content Security Policy</cite>によって使用される。<a href="references.html#refsCSP">[CSP]</a></p>

  <hr>

  <p>To <dfn id="determining-the-creation-sandboxing-flags">determine the creation sandboxing flags</dfn> for a <a href="browsers.html#concept-document-bc" id="sandboxing:concept-document-bc">browsing context</a> <var>browsing context</var>, given null or an element <var>embedder</var>, return the union of the flags that are present in the following <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-6">sandboxing flag sets</a>:</p>

  <ul><li><p>If <var>embedder</var> is null, then: the flags set on <var>browsing context</var>'s <a href="#popup-sandboxing-flag-set" id="sandboxing:popup-sandboxing-flag-set-2">popup sandboxing flag set</a>.<li><p>If <var>embedder</var> is an element, then: the flags set on <var>embedder</var>'s <a href="#iframe-sandboxing-flag-set" id="sandboxing:iframe-sandboxing-flag-set-2"><code>iframe</code> sandboxing flag set</a>.<li><p>If <var>embedder</var> is an element, then: the flags set on <var>embedder</var>'s <a id="sandboxing:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set-3">active sandboxing flag set</a>.</ul>

  <p>After creation, the <dfn id="concept-bc-sandboxing-flags">sandboxing flags</dfn> for a <a href="browsers.html#concept-document-bc" id="sandboxing:concept-document-bc-2">browsing context</a> <var>browsing context</var> are the result of <a href="#determining-the-creation-sandboxing-flags" id="sandboxing:determining-the-creation-sandboxing-flags">determining the creation sandboxing flags</a> given <var>browsing context</var> and <var>browsing context</var>'s <a href="browsers.html#bc-container" id="sandboxing:bc-container">container</a>.<h3 id="cross-origin-opener-policies"><span class="secno">7.5</span> Cross-origin opener policies<a href="#cross-origin-opener-policies" class="self-link"></a></h3>

  <p>A <dfn id="cross-origin-opener-policy">cross-origin opener policy</dfn> allows a document which is navigated to in a <a id="cross-origin-opener-policies:top-level-browsing-context" href="browsers.html#top-level-browsing-context">top-level browsing context</a> to force the creation of a new <a id="cross-origin-opener-policies:top-level-browsing-context-2" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, and a corresponding <a href="browsers.html#tlbc-group" id="cross-origin-opener-policies:tlbc-group">group</a>. It has one of the following values:</p>

  <dl><dt>"<dfn id="coop-unsafe-none"><code>unsafe-none</code></dfn>"<dd><p>This is the (current) default and means that the document will occupy the same <a id="cross-origin-opener-policies:top-level-browsing-context-3" href="browsers.html#top-level-browsing-context">top-level browsing context</a> as its predecessor, unless that document specified a different <a href="#cross-origin-opener-policy" id="cross-origin-opener-policies:cross-origin-opener-policy">cross-origin opener policy</a>.<dt>"<dfn id="coop-same-origin-allow-popups"><code>same-origin-allow-popups</code></dfn>"<dd><p>This forces the creation of a new <a id="cross-origin-opener-policies:top-level-browsing-context-4" href="browsers.html#top-level-browsing-context">top-level browsing context</a> for the document, unless its predecessor specified the same <a href="#cross-origin-opener-policy" id="cross-origin-opener-policies:cross-origin-opener-policy-2">cross-origin opener policy</a> and they are <span>same origin</span>.<dt>"<dfn id="coop-same-origin"><code>same-origin</code></dfn>"<dd><p>This behaves the same as "<code id="cross-origin-opener-policies:coop-same-origin-allow-popups"><a href="#coop-same-origin-allow-popups">same-origin-allow-popups</a></code>", with the addition that any <a id="cross-origin-opener-policies:auxiliary-browsing-context" href="browsers.html#auxiliary-browsing-context">auxiliary browsing context</a> created needs to contain <span>same origin</span> documents that also have the same <a href="#cross-origin-opener-policy" id="cross-origin-opener-policies:cross-origin-opener-policy-3">cross-origin opener policy</a> or it will appear closed to the opener.<dt>"<dfn id="coop-same-origin-plus-coep"><code>same-origin-plus-COEP</code></dfn>"<dd><p>This behaves the same as "<code id="cross-origin-opener-policies:coop-same-origin"><a href="#coop-same-origin">same-origin</a></code>", with the addition that it sets the (new) <a id="cross-origin-opener-policies:top-level-browsing-context-5" href="browsers.html#top-level-browsing-context">top-level browsing context</a>'s <a href="browsers.html#tlbc-group" id="cross-origin-opener-policies:tlbc-group-2">group</a>'s <span>cross-origin isolated</span> to true.</p>

    <p class="note">"<code id="cross-origin-opener-policies:coop-same-origin-plus-coep"><a href="#coop-same-origin-plus-coep">same-origin-plus-COEP</a></code>" cannot be directly set via the `<code>Cross-Origin-Opener-Policy</code>` header, but results from a combination of setting both `<code><span>Cross-Origin-Opener-Policy</span>: <a href="#coop-same-origin" id="cross-origin-opener-policies:coop-same-origin-2">same-origin</a></code>` and `<code><a id="cross-origin-opener-policies:cross-origin-embedder-policy" href="https://wicg.github.io/cross-origin-embedder-policy/#http-headerdef-cross-origin-embedder-policy" data-x-internal="cross-origin-embedder-policy">Cross-Origin-Embedder-Policy</a>: require-corp</code>` together.</p>
   </dl>

  <p>To <dfn id="matching-coop">match cross-origin opener policies</dfn>, given a <a href="#cross-origin-opener-policy" id="cross-origin-opener-policies:cross-origin-opener-policy-4">cross-origin opener policy</a> <var>A</var>, an <a href="#concept-origin" id="cross-origin-opener-policies:concept-origin">origin</a> <var>originA</var>, a <a href="#cross-origin-opener-policy" id="cross-origin-opener-policies:cross-origin-opener-policy-5">cross-origin opener policy</a> <var>B</var>, and an <a href="#concept-origin" id="cross-origin-opener-policies:concept-origin-2">origin</a> <var>originB</var>:</p>

  <ol><li><p>If <var>A</var> is "<code id="cross-origin-opener-policies:coop-unsafe-none"><a href="#coop-unsafe-none">unsafe-none</a></code>" and <var>B</var> is "<code id="cross-origin-opener-policies:coop-unsafe-none-2"><a href="#coop-unsafe-none">unsafe-none</a></code>", then return true.<li><p>If <var>A</var> is "<code id="cross-origin-opener-policies:coop-unsafe-none-3"><a href="#coop-unsafe-none">unsafe-none</a></code>" or <var>B</var> is "<code id="cross-origin-opener-policies:coop-unsafe-none-4"><a href="#coop-unsafe-none">unsafe-none</a></code>", then return false.<li><p>If <var>A</var> is <var>B</var> and <var>originA</var> is <span>same origin</span> with <var>originB</var>, then return true.<li><p>Return false.</ol>

  <h4 id="the-cross-origin-opener-policy-header"><span class="secno">7.5.1</span> The `<code>Cross-Origin-Opener-Policy</code>` header<a href="#the-cross-origin-opener-policy-header" class="self-link"></a></h4>

  <p>A <code>Document</code>'s <a href="dom.html#concept-document-coop" id="the-cross-origin-opener-policy-header:concept-document-coop">cross-origin opener policy</a> is derived from the `<code>Cross-Origin-Opener-Policy</code>` HTTP response header. This header is a <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html" id="the-cross-origin-opener-policy-header:http-structured-header" data-x-internal="http-structured-header">structured header</a> whose value must be a <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#token" id="the-cross-origin-opener-policy-header:http-structured-header-token" data-x-internal="http-structured-header-token">token</a>. <a href="references.html#refsSTRUCTURED-HEADERS">[STRUCTURED-HEADERS]</a></p>

  <p>The valid <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#token" id="the-cross-origin-opener-policy-header:http-structured-header-token-2" data-x-internal="http-structured-header-token">token</a> values are "<code id="the-cross-origin-opener-policy-header:coop-unsafe-none"><a href="#coop-unsafe-none">unsafe-none</a></code>", "<code id="the-cross-origin-opener-policy-header:coop-same-origin-allow-popups"><a href="#coop-same-origin-allow-popups">same-origin-allow-popups</a></code>", and "<code id="the-cross-origin-opener-policy-header:coop-same-origin"><a href="#coop-same-origin">same-origin</a></code>".</p>

  <p class="note">Per the processing model described below, user agents will ignore this header if it contains an invalid value. Likewise, user agents will ignore this header if the value cannot be parsed as a <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#token" id="the-cross-origin-opener-policy-header:http-structured-header-token-3" data-x-internal="http-structured-header-token">token</a>.</p>

  <hr>

  <p>To <dfn id="obtain-coop">obtain a cross-origin opener policy</dfn> from a <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response" id="the-cross-origin-opener-policy-header:concept-response" data-x-internal="concept-response">response</a> <var>response</var>:</p>

  <ol><li><p>Let <var>securityState</var> be the result of executing <a id="the-cross-origin-opener-policy-header:is-url-potentially-trustworthy" href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url" data-x-internal="is-url-potentially-trustworthy">Is url potentially trustworthy?</a> on <var>response</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response-url" id="the-cross-origin-opener-policy-header:concept-response-url" data-x-internal="concept-response-url">url</a>.<li><p>If <var>securityState</var> is "<code>Not Trustworthy</code>", then return "<code id="the-cross-origin-opener-policy-header:coop-unsafe-none-2"><a href="#coop-unsafe-none">unsafe-none</a></code>".</p> <li><p>Let <var>value</var> be the result of <a href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="the-cross-origin-opener-policy-header:concept-response-header-list-get-structured-header" data-x-internal="concept-response-header-list-get-structured-header">getting a structured header</a> given `<code>Cross-Origin-Opener-Policy</code>` and "<code>item</code>" from <var>response</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response-header-list" id="the-cross-origin-opener-policy-header:concept-response-header-list" data-x-internal="concept-response-header-list">header list</a>.<li><p>If <var>value</var> is failure or null, then return "<code id="the-cross-origin-opener-policy-header:coop-unsafe-none-3"><a href="#coop-unsafe-none">unsafe-none</a></code>".<li><p>If <var>value</var>[0] is not "<code id="the-cross-origin-opener-policy-header:coop-same-origin-2"><a href="#coop-same-origin">same-origin</a></code>" or "<code id="the-cross-origin-opener-policy-header:coop-same-origin-allow-popups-2"><a href="#coop-same-origin-allow-popups">same-origin-allow-popups</a></code>", then return "<code id="the-cross-origin-opener-policy-header:coop-unsafe-none-4"><a href="#coop-unsafe-none">unsafe-none</a></code>".<li><p>If <var>value</var>[0] is "<code id="the-cross-origin-opener-policy-header:coop-same-origin-3"><a href="#coop-same-origin">same-origin</a></code>", then:</p>

    <ol><li><p>Let <var>coep</var> be the result of <a href="https://wicg.github.io/cross-origin-embedder-policy/#abstract-opdef-obtain-a-responses-embedder-policy" id="the-cross-origin-opener-policy-header:obtain-cross-origin-embedder-policy" data-x-internal="obtain-cross-origin-embedder-policy">obtaining a cross-origin embedder policy</a> from <var>response</var>.<li><p>If <var>coep</var> is "<code>require-corp</code>", then return "<code id="the-cross-origin-opener-policy-header:coop-same-origin-plus-coep"><a href="#coop-same-origin-plus-coep">same-origin-plus-COEP</a></code>".</ol>
   <li><p>Return <var>value</var>[0].</ol>

  <h4 id="browsing-context-group-switches-due-to-cross-origin-opener-policy"><span class="secno">7.5.2</span> Browsing context group switches due to cross-origin opener policy<a href="#browsing-context-group-switches-due-to-cross-origin-opener-policy" class="self-link"></a></h4>

  <p>To <dfn id="check-browsing-context-group-switch-response">check if a response requires a browsing context group switch</dfn>, given a <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:browsing-context" href="browsers.html#browsing-context">browsing context</a> <var>browsingContext</var>, an <a href="#concept-origin" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:concept-origin">origin</a> <var>responseOrigin</var> and a <a href="#cross-origin-opener-policy" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:cross-origin-opener-policy">cross-origin opener policy</a> <var>responseCOOP</var>:</p>

  <ol><li><p>Let <var>activeDocumentNavigationOrigin</var> be <var>browsingContext</var>'s <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:active-document" href="browsers.html#active-document">active document</a>'s <a href="#concept-origin" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:concept-origin-2">origin</a>.<li><p>Let <var>activeDocumentCOOP</var> be <var>browsingContext</var>'s <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:active-document-2" href="browsers.html#active-document">active document</a>'s <a href="dom.html#concept-document-coop" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:concept-document-coop">cross-origin opener policy</a>.<li><p>Let <var>isInitialAboutBlank</var> be false.<li><p>If <var>browsingContext</var>'s only entry in its <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:session-history" href="history.html#session-history">session history</a> is the <code id="browsing-context-group-switches-due-to-cross-origin-opener-policy:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code> <code>Document</code> that was added when <var>browsingContext</var> was <span>created</span>, then set <var>isInitialAboutBlank</var> to true.<li><p>If the result of <a href="#matching-coop" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:matching-coop">matching</a> <var>activeDocumentCOOP</var>, <var>activeDocumentNavigationOrigin</var>, <var>responseCOOP</var> and <var>responseOrigin</var> is true, then return false.<li><p>If all of the following are true:</p>

    <ul><li><p><var>isInitialAboutBlank</var><li><p><var>activeDocumentCOOP</var> is "<code id="browsing-context-group-switches-due-to-cross-origin-opener-policy:coop-same-origin-allow-popups"><a href="#coop-same-origin-allow-popups">same-origin-allow-popups</a></code>".<li><p><var>responseCOOP</var> is "<code id="browsing-context-group-switches-due-to-cross-origin-opener-policy:coop-unsafe-none"><a href="#coop-unsafe-none">unsafe-none</a></code>".</ul>

    <p>then return false.</p>
   <li><p>Return true.</ol>

  <p>To <dfn id="obtain-browsing-context-navigation">obtain a browsing context to use for a navigation response</dfn>, given a <a href="browsers.html#browsing-context" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:browsing-context-2">browsing context</a> <var>browsingContext</var>, a <a href="#sandboxing-flag-set" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:sandboxing-flag-set">sandboxing flag set</a> <var>sandboxFlags</var>, and a <a href="#cross-origin-opener-policy" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:cross-origin-opener-policy-2">cross-origin opener policy</a> <var>navigationCOOP</var>:</p>

  <ol><li><p>Assert: <var>browsingContext</var> is a <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:top-level-browsing-context" href="browsers.html#top-level-browsing-context">top-level browsing context</a>.<li><p>Let <var>newBrowsingContext</var> be the result of <span>creating a new top-level browsing context</span>.<li><p>If <var>navigationCOOP</var> is "<code id="browsing-context-group-switches-due-to-cross-origin-opener-policy:coop-same-origin-plus-coep"><a href="#coop-same-origin-plus-coep">same-origin-plus-COEP</a></code>", then set <var>newBrowsingContext</var>'s <a href="browsers.html#tlbc-group" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:tlbc-group">group</a>'s <span>cross-origin isolated</span> to true.<li><p>If <var>sandboxFlags</var> is not empty, then:</p>
    <ol><li><p>Assert: <var>navigationCOOP</var> is "<code id="browsing-context-group-switches-due-to-cross-origin-opener-policy:coop-unsafe-none-2"><a href="#coop-unsafe-none">unsafe-none</a></code>".<li><p>Set <var>newBrowsingContext</var>'s <a href="#sandboxing-flag-set" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:sandboxing-flag-set-2">sandboxing flag set</a> to <var>sandboxFlags</var>.</ol>
   <li><p><span>Discard</span> <var>browsingContext</var>.</p>

    <p class="note">This has no effect on <var>browsingContext</var>'s <a href="browsers.html#tlbc-group" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:tlbc-group-2">group</a>, unless <var>browsingContext</var> was its sole <a id="browsing-context-group-switches-due-to-cross-origin-opener-policy:top-level-browsing-context-2" href="browsers.html#top-level-browsing-context">top-level browsing context</a>. In that case, the user agent might delete the <span>browsing context group</span> which no longer contains any <a href="browsers.html#browsing-context" id="browsing-context-group-switches-due-to-cross-origin-opener-policy:browsing-context-3">browsing contexts</a>.</p>
   <li><p>Return <var>newBrowsingContext</var>.</ol>

  <p class="XXX">The impact of swapping browsing context groups following a navigation is not fully defined. It is currently under discussion in <a href="https://github.com/whatwg/html/issues/5350">issue #5350</a>.</p>



  <nav><a href="window-object.html">← 7.2 The Window object</a> — <a href="./">Table of Contents</a> — <a href="history.html">7.6 Session history and navigation →</a></nav>
