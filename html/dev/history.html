<!DOCTYPE html><html class=split lang=ja>
<script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport>
<title>HTML Standard, Developer's Edition 日本語訳</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard-shared-with-dev.css><link href=https://resources.whatwg.org/logo.svg rel=icon>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script><link rel=stylesheet href=styles.css>
<body>
  <script async="" src=search.js></script>
  
  
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   
   <hgroup><h1><a rel=home href=/dev/>HTML: The Living Standard</a></h1><h2 id=dev-edition-h2 class="no-num no-toc">Developer's Edition — Last Updated <span class=pubdate>25 February 2019</span></h2></hgroup>
   

   <div id=search>
    <input placeholder="Search. Press '/'" autocomplete=off name=query id=query type=search>
    <ol id=results></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href=origin.html>← 7.3 生成元</a> — <a href=./>目次</a> — <a href=browsing-the-web.html>7.6 ウェブを閲覧する →</a></nav><ol class=toc><li><ol><li><a href=history.html#history><span class=secno>7.5</span> セッション履歴およびナビゲーション</a><ol><li><a href=history.html#the-session-history-of-browsing-contexts><span class=secno>7.5.1</span> ブラウジングコンテキストのセッション履歴</a></li><li><a href=history.html#the-history-interface><span class=secno>7.5.2</span> <code>History</code>インターフェイス</a></li><li><a href=history.html#the-location-interface><span class=secno>7.5.3</span> <code>Location</code>インターフェイス</a></li></ol></li></ol></li></ol><h3 id=history><span class=secno>7.5</span> セッション履歴およびナビゲーション<a href=#history class=self-link></a></h3>

  <h4 id=the-session-history-of-browsing-contexts><span class=secno>7.5.1</span> ブラウジングコンテキストのセッション履歴<a href=#the-session-history-of-browsing-contexts class=self-link></a></h4>

  <p>The sequence of <code>Document</code>s in a <a id=the-session-history-of-browsing-contexts:browsing-context href=browsers.html#browsing-context>browsing context</a> is its <dfn id=session-history>session history</dfn>. <a href=browsers.html#nested-browsing-context id=the-session-history-of-browsing-contexts:nested-browsing-context>ネストされたブラウジングコンテキスト</a>を含む各<a id=the-session-history-of-browsing-contexts:browsing-context-2 href=browsers.html#browsing-context>ブラウジングコンテキスト</a>は、個別のセッション履歴を持つ。A <a id=the-session-history-of-browsing-contexts:browsing-context-3 href=browsers.html#browsing-context>browsing context</a>'s session history consists of a flat list of <a href=#session-history-entry id=the-session-history-of-browsing-contexts:session-history-entry>session history entries</a>. Each <dfn id=session-history-entry>session history entry</dfn> consists, at a minimum, of a <a id=the-session-history-of-browsing-contexts:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>, and each entry may in addition have <a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state>serialized state</a>, a title, a <code>Document</code> object, form data, a <a href=#scroll-restoration-mode id=the-session-history-of-browsing-contexts:scroll-restoration-mode>scroll restoration mode</a>, a scroll position, a <a id=the-session-history-of-browsing-contexts:browsing-context-name href=browsers.html#browsing-context-name>browsing context name</a>, and other information associated with it.</p>

  <p class=note>Each entry, when first created, has a <code>Document</code>. However, when a
  <code>Document</code> is not <a href=browsers.html#fully-active id=the-session-history-of-browsing-contexts:fully-active>active</a>, it's possible for it to be
  <span>discarded</span> to free resources. The <a id=the-session-history-of-browsing-contexts:url-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> and
  other data in a <a href=#session-history-entry id=the-session-history-of-browsing-contexts:session-history-entry-2>session history entry</a> is then used to bring a new
  <code>Document</code> into being to take the place of the original, in case the user agent finds
  itself having to reactivate that <code>Document</code>.</p>

  <p class=note>Titles associated with <a href=#session-history-entry id=the-session-history-of-browsing-contexts:session-history-entry-3>session history
  entries</a> need not have any relation with the current <code id=the-session-history-of-browsing-contexts:the-title-element><a href=semantics.html#the-title-element>title</a></code> of the
  <code>Document</code>. The title of a <a href=#session-history-entry id=the-session-history-of-browsing-contexts:session-history-entry-4>session history entry</a> is intended to explain
  the state of the document at that point, so that the user can navigate the document's history.</p>

  <p>URLs without associated <a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state-2>serialized state</a> are added to the session history as the
  user (or script) navigates from page to page.</p>

  <hr>

  <p>Each <code>Document</code> object in a <a id=the-session-history-of-browsing-contexts:browsing-context-4 href=browsers.html#browsing-context>browsing context</a>'s <a href=#session-history id=the-session-history-of-browsing-contexts:session-history>session
  history</a> is associated with a unique <code>History</code> object which must all model the
  same underlying <a href=#session-history id=the-session-history-of-browsing-contexts:session-history-2>session history</a>.</p>

  

  <hr>

  <p id=state-object><dfn id=serialized-state>Serialized state</dfn> is a serialization (via
  <span>StructuredSerializeForStorage</span>) of an object representing a user interface state. We
  sometimes informally refer to "state objects", which are the objects representing user interface
  state supplied by the author, or alternately the objects created by deserializing (via
  <span>StructuredDeserialize</span>) serialized state.</p>

  <p>Pages can <a href=#dom-history-pushstate id=the-session-history-of-browsing-contexts:dom-history-pushstate>add</a> <a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state-3>serialized state</a> to the
  session history. These are then <span>deserialized</span> and <a href=indices.html#event-popstate id=the-session-history-of-browsing-contexts:event-popstate>returned to the script</a> when the user (or script) goes back in the
  history, thus enabling authors to use the "navigation" metaphor even in one-page applications.</p>

  <div class=note>

   <p><a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state-4>Serialized state</a> is intended to be used for two main purposes: first, storing a
   preparsed description of the state in the <a id=the-session-history-of-browsing-contexts:url-3 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> so that in the simple case an author
   doesn't have to do the parsing (though one would still need the parsing for handling <a href=https://triple-underscore.github.io/URL-ja.html#concept-url id=the-session-history-of-browsing-contexts:url-4 data-x-internal=url>URLs</a> passed around by users, so it's only a minor optimization). Second, so
   that the author can store state that one wouldn't store in the URL because it only applies to the
   current <code>Document</code> instance and it would have to be reconstructed if a new
   <code>Document</code> were opened.</p>

   <p>後者の例は、ユーザーが戻った場合同じ場所にアニメーションさせることができるように、ポップアップ<code id=the-session-history-of-browsing-contexts:the-div-element><a href=grouping-content.html#the-div-element>div</a></code>がアニメーション化するために作られた正確な座標を追跡するようなものになるだろう。またその代わりに、前後に行く際に、情報が再度フェッチする必要がないよう、<a id=the-session-history-of-browsing-contexts:url-5 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>内の情報に基づいてサーバーからフェッチされるデータのキャッシュにポインターを保持するために使用できる。</p>

  </div>

  <hr>

  <p>任意の時点で、セッション履歴のエントリの一つは、<dfn id=current-entry>現在のエントリ</dfn>である。これは、<a id=the-session-history-of-browsing-contexts:browsing-context-5 href=browsers.html#browsing-context>ブラウジングコンテキスト</a>の<a id=the-session-history-of-browsing-contexts:active-document href=browsers.html#active-document>アクティブドキュメント</a>を表すエントリである。Which entry is the <a href=#current-entry id=the-session-history-of-browsing-contexts:current-entry>current entry</a> is changed by the algorithms defined in this specification, e.g. during <span>session history traversal</span>.</p>

  <p class=note>The <a href=#current-entry id=the-session-history-of-browsing-contexts:current-entry-2>current entry</a> is usually an entry for the <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-url id="the-session-history-of-browsing-contexts:the-document's-address" data-x-internal="the-document's-address">URL</a> of the <code>Document</code>. However, it can also be one
  of the entries for <a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state-5>serialized state</a> added to the history by that document.</p>

  <p><dfn id=an-entry-with-persisted-user-state>永続ユーザー状態を持つエントリ</dfn>はまた、ユーザーエージェント定義の状態を持つ。この仕様は、何が状態の種類を格納できるのかを指定しない。</p>

  <p class=example>たとえば、一部のユーザーエージェントは、スクロール位置またはフォームコントロールの値を永続化したいかもしれない。</p>

  <p class=note>フォームコントロールの値を永続化するユーザーエージェントはまた、それらの方向（要素の<code id=the-session-history-of-browsing-contexts:the-dir-attribute><a href=dom.html#the-dir-attribute>dir</a></code>属性の値）を保持することが推奨される。これは、ユーザーが最初明示的にデフォルト以外の方向をもつ値を入力した場合、履歴走査の後に誤って値を表示することを防ぐ。</p>

  <p>An entry's <dfn id=scroll-restoration-mode>scroll restoration mode</dfn> indicates whether the user agent should
  restore the persisted scroll position (if any) when traversing to it. The scroll restoration
  mode may be one of the following:</p>

  <dl><dt>"<dfn id=dom-scrollrestoration-auto><code>auto</code></dfn>"<dd>The user agent is responsible for restoring the scroll position upon navigation.<dt>"<dfn id=dom-scrollrestoration-manual><code>manual</code></dfn>"<dd>The page is responsible for restoring the scroll position and the user agent does not
   attempt to do so automatically</dl>

  <p>If unspecified, the <a href=#scroll-restoration-mode id=the-session-history-of-browsing-contexts:scroll-restoration-mode-2>scroll restoration mode</a> of a new entry must be set to
  "<code id=the-session-history-of-browsing-contexts:dom-scrollrestoration-auto><a href=#dom-scrollrestoration-auto>auto</a></code>".</p>

  <p>Entries that contain <a href=#serialized-state id=the-session-history-of-browsing-contexts:serialized-state-6>serialized state</a> share the same <code>Document</code> as the
  entry for the page that was active when they were added.</p>

  <p>Contiguous entries that differ just by their <a href=https://triple-underscore.github.io/URL-ja.html#concept-url id=the-session-history-of-browsing-contexts:url-6 data-x-internal=url>URLs</a>' <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=the-session-history-of-browsing-contexts:concept-url-fragment data-x-internal=concept-url-fragment>fragments</a> also share the same <code>Document</code>.</p>

  <p class=note>All entries that share the same <code>Document</code> (and that are therefore
  merely different states of one particular document) are contiguous by definition.</p>

  <p>Each <code>Document</code> in a <a id=the-session-history-of-browsing-contexts:browsing-context-6 href=browsers.html#browsing-context>browsing context</a> can also have a <dfn id=latest-entry>latest
  entry</dfn>. This is the entry for that <code>Document</code> to which the <a id=the-session-history-of-browsing-contexts:browsing-context-7 href=browsers.html#browsing-context>browsing
  context</a>'s <a href=#session-history id=the-session-history-of-browsing-contexts:session-history-3>session history</a> was most recently traversed. When a
  <code>Document</code> is created, it initially has no <a href=#latest-entry id=the-session-history-of-browsing-contexts:latest-entry>latest entry</a>.</p>

  



  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/History title="The History interface allows manipulation of the browser session history, that is the pages visited in the tab or frame that the current page is loaded in.">History</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/history title="The Window.history read-only property returns a reference to the History object, which provides an interface for manipulating the browser session history (pages visited in the tab or frame that the current page is loaded in).">Window/history</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge unknown"><span>Edge</span><span>?</span></span><span class="edge_mobile unknown"><span>Edge Mobile</span><span>?</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span><span class="safari unknown"><span>Safari</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><h4 id=the-history-interface><span class=secno>7.5.2</span> <code>History</code>インターフェイス<a href=#the-history-interface class=self-link></a></h4>

  

  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/History/length title="The History.length read-only property returns an Integer representing the number of elements in the session history, including the currently loaded page. For example, for a page loaded in a new tab this property returns 1.">History/length</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge unknown"><span>Edge</span><span>?</span></span><span class="edge_mobile unknown"><span>Edge Mobile</span><span>?</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span><span class="safari unknown"><span>Safari</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><dl class=domintro><dt><var>window</var> . <code id=dom-history>history</code> . <code id=dom-history-length>length</code><dd>

    <p><a href=#joint-session-history id=the-history-interface:joint-session-history>ジョイントセッション履歴</a>内のエントリの数を返す。</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history><a href=#dom-history>history</a></code> . <code id=dom-history-scroll-restoration>scrollRestoration</code> [ = <var>value</var> ]<dd>

    <p>Returns the <a href=#scroll-restoration-mode id=the-history-interface:scroll-restoration-mode>scroll restoration mode</a> of the current entry in the <a href=#session-history id=the-history-interface:session-history>session
    history</a>.</p>

    <p>Can be set, to change the <a href=#scroll-restoration-mode id=the-history-interface:scroll-restoration-mode-2>scroll restoration mode</a> of the current entry in the <a href=#session-history id=the-history-interface:session-history-2>session history</a>.</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-2><a href=#dom-history>history</a></code> . <code id=dom-history-state>state</code><dd>

    <p>Returns the current <a href=#serialized-state id=the-history-interface:serialized-state>serialized state</a>, deserialized into an object.</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-3><a href=#dom-history>history</a></code> . <code id=dom-history-go>go</code>( [ <var>delta</var> ] )<dd>

    <p><a href=#joint-session-history id=the-history-interface:joint-session-history-2>ジョイントセッション履歴</a>内のステップの指定した数の前後に進む。</p>

    <p>ゼロ差分は、現在のページをリロードする。</p>

    <p>差分が範囲外の場合、何もしない。</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-4><a href=#dom-history>history</a></code> . <code id=dom-history-back>back</code>()<dd>

    <p><a href=#joint-session-history id=the-history-interface:joint-session-history-3>ジョイントセッション履歴</a>内の1つのステップに戻る。</p>

    <p>前のページが存在しない場合、何もしない。</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-5><a href=#dom-history>history</a></code> . <code id=dom-history-forward>forward</code>()<dd>

    <p><a href=#joint-session-history id=the-history-interface:joint-session-history-4>ジョイントセッション履歴</a>内の1つのステップに進む。</p>

    <p>次のページが存在しない場合、何もしない。</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-6><a href=#dom-history>history</a></code> . <code id=dom-history-pushstate>pushState</code>(<var>data</var>, <var>title</var> [, <var>url</var> ] )<dd>

    <p>指定されたURLが供給される場合、指定されたタイトルとともに、セッション履歴上に与えられたデータをプッシュする。</p>

   <dt><var>window</var> . <code id=the-history-interface:dom-history-7><a href=#dom-history>history</a></code> . <code id=dom-history-replacestate>replaceState</code>(<var>data</var>, <var>title</var> [, <var>url</var> ] )<dd>

    <p>指定されたデータ、タイトルおよび、提供される場合にURLを持つ、セッション履歴の現在のエントリを更新する。</p>

   </dl><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> history<span class="and_chr yes"><span>Chrome for Android</span> <span>71+</span></span><span class="chrome yes"><span>Chrome</span> <span>5+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0+</span></span><span class="firefox yes"><span>Firefox</span> <span>4+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.8+</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="safari yes"><span>Safari</span> <span>6+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="opera yes"><span>Opera</span> <span>11.5+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="android yes"><span>Android Browser</span> <span>4.2+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=history">caniuse.com</a></div>


  <p>The <dfn id=joint-session-history>joint session history</dfn> of a <a id=the-history-interface:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a> is the union
  of all the <a href=#session-history id=the-history-interface:session-history-3>session histories</a> of all <a href=browsers.html#concept-document-bc id=the-history-interface:concept-document-bc>browsing contexts</a> of all the <a id=the-history-interface:fully-active href=browsers.html#fully-active>fully active</a>
  <code>Document</code> objects that share that <a id=the-history-interface:top-level-browsing-context-2 href=browsers.html#top-level-browsing-context>top-level browsing context</a>, with all
  the entries that are <a href=#current-entry id=the-history-interface:current-entry>current entries</a> in their respective <a href=#session-history id=the-history-interface:session-history-4>session histories</a> removed except for the <a href=#current-entry-of-the-joint-session-history id=the-history-interface:current-entry-of-the-joint-session-history>current entry of
  the joint session history</a>.</p>

  <p><dfn id=current-entry-of-the-joint-session-history>ジョイントセッション履歴の現在のエントリ</dfn>は、最近その<a href=#session-history id=the-history-interface:session-history-5>セッション履歴</a>内の<a href=#current-entry id=the-history-interface:current-entry-2>現在のエントリ</a>になったエントリである。</p>

  <p><a href=#joint-session-history id=the-history-interface:joint-session-history-5>ジョイントセッション履歴</a>内のエントリは、それぞれの<a href=#session-history id=the-history-interface:session-history-6>セッション履歴</a>に追加された時点で時系列に並べられる。各エントリはインデックスを持つ。最古のエントリのインデックスは0を持ち、後続のエントリは連続して増加する整数（1、2、3など）を番号付けされる。</p>

  <p class=note>Since each <code>Document</code> in a <a id=the-history-interface:browsing-context href=browsers.html#browsing-context>browsing context</a> might have a
  different <a id=the-history-interface:event-loop href=webappapis.html#event-loop>event loop</a>, the actual state of the <a href=#joint-session-history id=the-history-interface:joint-session-history-6>joint session history</a> can
  be somewhat nebulous. For example, two sibling <code id=the-history-interface:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> elements could both <span>traverse</span> from one unique origin to another at the same time,
  so their precise order might not be well-defined; similarly, since they might only find out about
  each other later, they might disagree about the length of the <a href=#joint-session-history id=the-history-interface:joint-session-history-7>joint session
  history</a>.</p>


  

  <div class=example>

   <p>ユーザーはいくつかの座標に常にあり、ユーザーが後で再開するための特定の座標に対応するページをブックマークできるような、ユーザーがラインに沿って移動できるゲームを考える。</p>

   <p>そのようなゲームでx=5位置を実装する静的ページは次のようになる：</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE HTML&gt;</c->
<c- c>&lt;!-- this is https://example.com/line?x=5 --&gt;</c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>title</c-><c- p>&gt;</c->Line Game - 5<c- p>&lt;/</c-><c- f>title</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>p</c-><c- p>&gt;</c->You are at coordinate 5 on the line.<c- p>&lt;/</c-><c- f>p</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>p</c-><c- p>&gt;</c->
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=6"</c-><c- p>&gt;</c->Advance to 6<c- p>&lt;/</c-><c- f>a</c-><c- p>&gt;</c-> or
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=4"</c-><c- p>&gt;</c->retreat to 4<c- p>&lt;/</c-><c- f>a</c-><c- p>&gt;</c->?
<c- p>&lt;/</c-><c- f>p</c-><c- p>&gt;</c-></code></pre>

   <p>このようなシステムの問題点は、毎回ユーザーがクリックするとページ全体をリロードする必要があることにある。ここで、代わりにスクリプトを使用して、リロードを行うための別の方法：</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE HTML&gt;</c->
<c- c>&lt;!-- this starts off as https://example.com/line?x=5 --&gt;</c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>title</c-><c- p>&gt;</c->Line Game - 5<c- p>&lt;/</c-><c- f>title</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>p</c-><c- p>&gt;</c->You are at coordinate <c- p>&lt;</c-><c- f>span</c-> <c- e>id</c-><c- o>=</c-><c- s>"coord"</c-><c- p>&gt;</c->5<c- p>&lt;/</c-><c- f>span</c-><c- p>&gt;</c-> on the line.<c- p>&lt;/</c-><c- f>p</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>p</c-><c- p>&gt;</c->
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=6"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"go(1); return false;"</c-><c- p>&gt;</c->Advance to 6<c- p>&lt;/</c-><c- f>a</c-><c- p>&gt;</c-> or
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=4"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"go(-1); return false;"</c-><c- p>&gt;</c->retreat to 4<c- p>&lt;/</c-><c- f>a</c-><c- p>&gt;</c->?
<c- p>&lt;/</c-><c- f>p</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>script</c-><c- p>&gt;</c->
 <c- a>var</c-> currentPage <c- o>=</c-> <c- mi>5</c-><c- p>;</c-> <c- c1>// prefilled by server</c->
 <c- a>function</c-> go<c- p>(</c->d<c- p>)</c-> <c- p>{</c->
   setupPage<c- p>(</c->currentPage <c- o>+</c-> d<c- p>);</c->
   history<c- p>.</c->pushState<c- p>(</c->currentPage<c- p>,</c-> document<c- p>.</c->title<c- p>,</c-> <c- t>'?x='</c-> <c- o>+</c-> currentPage<c- p>);</c->
 <c- p>}</c->
 onpopstate <c- o>=</c-> <c- a>function</c-><c- p>(</c->event<c- p>)</c-> <c- p>{</c->
   setupPage<c- p>(</c->event<c- p>.</c->state<c- p>);</c->
 <c- p>}</c->
 <c- a>function</c-> setupPage<c- p>(</c->page<c- p>)</c-> <c- p>{</c->
   currentPage <c- o>=</c-> page<c- p>;</c->
   document<c- p>.</c->title <c- o>=</c-> <c- t>'Line Game - '</c-> <c- o>+</c-> currentPage<c- p>;</c->
   document<c- p>.</c->getElementById<c- p>(</c-><c- t>'coord'</c-><c- p>).</c->textContent <c- o>=</c-> currentPage<c- p>;</c->
   document<c- p>.</c->links<c- p>[</c-><c- mi>0</c-><c- p>].</c->href <c- o>=</c-> <c- t>'?x='</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>+</c-><c- mi>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mi>0</c-><c- p>].</c->textContent <c- o>=</c-> <c- t>'Advance to '</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>+</c-><c- mi>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mi>1</c-><c- p>].</c->href <c- o>=</c-> <c- t>'?x='</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>-</c-><c- mi>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mi>1</c-><c- p>].</c->textContent <c- o>=</c-> <c- t>'retreat to '</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>-</c-><c- mi>1</c-><c- p>);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>&gt;</c-></code></pre>

   <p>スクリプトをもたないシステムにおいて、前の例と同じように動作する。しかし、同じ体験に対するネットワークアクセスが存在しないので、スクリプトをサポート<em>する</em>ユーザーは現在はるかに速く移動できる。さらに、経験に反して、ユーザーは単にナイーブなスクリプトベースのアプローチ、ブックマーク、およびセッション履歴の移動が依然として動作する必要がある。</p>

   <p>上記の例において、<code id=the-history-interface:dom-history-pushstate><a href=#dom-history-pushstate>pushState()</a></code>メソッドへの<var>data</var>引数は、サーバーに送信されるものと同じ情報であるが、スクリプトはURLにユーザーが移動するたびに解析する必要はないので、より便利な形式となる。</p>

  </div>

  <div class=example>

   <p>アプリケーションは、その時点で文書の<code id=the-history-interface:the-title-element><a href=semantics.html#the-title-element>title</a></code>要素の値として<a href=#session-history-entry id=the-history-interface:session-history-entry>セッション履歴エントリ</a>の同じタイトルを使用しないかもしれない。たとえば、これは<code id=the-history-interface:the-title-element-2><a href=semantics.html#the-title-element>title</a></code>要素内のブロックを示す単純なページである。明らかに、後方に以前の状態に移動する際にユーザーは時間内に戻らず、したがって、セッション履歴のタイトルに時間を置くことは不適切だろう。</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE HTML&gt;</c->
<c- p>&lt;</c-><c- f>HTML</c-> <c- e>LANG</c-><c- o>=</c-><c- s>EN</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>TITLE</c-><c- p>&gt;</c->Line<c- p>&lt;/</c-><c- f>TITLE</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>SCRIPT</c-><c- p>&gt;</c->
 setInterval<c- p>(</c-><c- a>function</c-> <c- p>()</c-> <c- p>{</c-> document<c- p>.</c->title <c- o>=</c-> <c- t>'Line - '</c-> <c- o>+</c-> <c- k>new</c-> Date<c- p>();</c-> <c- p>},</c-> <c- mi>1000</c-><c- p>);</c->
 <c- a>var</c-> i <c- o>=</c-> <c- mi>1</c-><c- p>;</c->
 <c- a>function</c-> inc<c- p>()</c-> <c- p>{</c->
   set<c- p>(</c->i<c- o>+</c-><c- mi>1</c-><c- p>);</c->
   history<c- p>.</c->pushState<c- p>(</c->i<c- p>,</c-> <c- t>'Line - '</c-> <c- o>+</c-> i<c- p>);</c->
 <c- p>}</c->
 <c- a>function</c-> set<c- p>(</c->newI<c- p>)</c-> <c- p>{</c->
   i <c- o>=</c-> newI<c- p>;</c->
   document<c- p>.</c->forms<c- p>.</c->F<c- p>.</c->I<c- p>.</c->value <c- o>=</c-> newI<c- p>;</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>SCRIPT</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>BODY</c-> <c- e>ONPOPSTATE</c-><c- o>=</c-><c- s>"set(event.state)"</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>FORM</c-> <c- e>NAME</c-><c- o>=</c-><c- s>F</c-><c- p>&gt;</c->
State: <c- p>&lt;</c-><c- f>OUTPUT</c-> <c- e>NAME</c-><c- o>=</c-><c- s>I</c-><c- p>&gt;</c->1<c- p>&lt;/</c-><c- f>OUTPUT</c-><c- p>&gt;</c-> <c- p>&lt;</c-><c- f>INPUT</c-> <c- e>VALUE</c-><c- o>=</c-><c- s>"Increment"</c-> <c- e>TYPE</c-><c- o>=</c-><c- s>BUTTON</c-> <c- e>ONCLICK</c-><c- o>=</c-><c- s>"inc()"</c-><c- p>&gt;</c->
<c- p>&lt;/</c-><c- f>FORM</c-><c- p>&gt;</c-></code></pre>

  </div>

  <div class=example>
   <p>Most applications want to use the same <a href=#scroll-restoration-mode id=the-history-interface:scroll-restoration-mode-3>scroll restoration mode</a> value for all of
   their history entries. To achieve this they can set the <code id=the-history-interface:dom-history-scroll-restoration><a href=#dom-history-scroll-restoration>scrollRestoration</a></code> attribute as soon as possible
   (e.g., in the first <code id=the-history-interface:the-script-element><a href=scripting.html#the-script-element>script</a></code> element in the document's <code id=the-history-interface:the-head-element><a href=semantics.html#the-head-element>head</a></code> element) to
   ensure that any entry added to the history session gets the desired scroll restoration mode.</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>head</c-><c- p>&gt;</c->
  <c- p>&lt;</c-><c- f>script</c-><c- p>&gt;</c->
       <c- k>if</c-> <c- p>(</c-><c- t>'scrollRestoration'</c-> <c- k>in</c-> history<c- p>)</c->
            history<c- p>.</c->scrollRestoration <c- o>=</c-> <c- t>'manual'</c-><c- p>;</c->
  <c- p>&lt;/</c-><c- f>script</c-><c- p>&gt;</c->
<c- p>&lt;/</c-><c- f>head</c-><c- p>&gt;</c->
   </code></pre>
  </div>


  


  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/location title="The Document.location read-only property returns a Location object, which contains information about the URL of the document and provides methods for changing that URL and loading another URL.">Document/location</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Location title="The Location interface represents the location (URL) of the object it is linked to. Changes done on it are reflected on the object it relates to. Both the Document and Window interface have such a linked Location, accessible via Document.location and Window.location respectively.">Location</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/location title="The Window.location read-only property returns a Location object with information about the current location of the document.">Window/location</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><h4 id=the-location-interface><span class=secno>7.5.3</span> <code>Location</code>インターフェイス<a href=#the-location-interface class=self-link></a></h4>

  <p>Each <code>Window</code> object is associated with a unique instance of a <code>Location</code>
  object, allocated when the <code>Window</code> object is created.</p>

  

  <dl class=domintro><dt><var>document</var> . <code id=dom-document-location>location</code> [ = <var>value</var> ]<dt><var>window</var> . <code id=dom-location>location</code> [ = <var>value</var> ]<dd>

    <p>Returns a <code>Location</code> object with the current page's location.</p>

    <p>別のページにナビゲートするために、設定可能である。</p>

   </dl>

  

  <p><code>Location</code> objects provide a representation of the <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-url id="the-location-interface:the-document's-address" data-x-internal="the-document's-address">URL</a> of the <a id=the-location-interface:active-document href=browsers.html#active-document>active document</a> of their
  <code>Document</code>'s <a href=browsers.html#concept-document-bc id=the-location-interface:concept-document-bc>browsing context</a>, and allow the
  <a href=#current-entry id=the-location-interface:current-entry>current entry</a> of the <a id=the-location-interface:browsing-context href=browsers.html#browsing-context>browsing context</a>'s session history to be changed,
  by adding or replacing entries in the <code id=the-location-interface:dom-history><a href=#dom-history>history</a></code> object.</p>

  

  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Location/assign title="The Location.assign() method causes the window to load and display the document at the URL specified.">Location/assign</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Location/replace title="The Location.replace() method replaces the current resource with the one at the provided URL. The difference from the assign() method is that after using replace() the current page will not be saved in session History, meaning the user won't be able to use the back button to navigate to it.">Location/replace</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Location/reload title="The Location.reload() method reloads the current resource, like the Refresh button.">Location/reload</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>Yes</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><dl class=domintro><dt><var>location</var> . <code>toString()</code><dt><var>location</var> . <code id=dom-location-href>href</code><dd>
    <p>Returns the <code>Location</code> object's URL.</p>
    <p>Can be set, to navigate to the given URL.</p>
   <dt><var>location</var> . <code id=dom-location-origin>origin</code><dd>
    <p>Returns the <code>Location</code> object's URL's origin.</p>
   <dt><var>location</var> . <code id=dom-location-protocol>protocol</code><dd>
    <p>Returns the <code>Location</code> object's URL's scheme.</p>
    <p>Can be set, to navigate to the same URL with a changed scheme.</p>
   <dt><var>location</var> . <code id=dom-location-host>host</code><dd>
    <p>Returns the <code>Location</code> object's URL's host and port (if different from the default
    port for the scheme).</p>
    <p>Can be set, to navigate to the same URL with a changed host and port.</p>
   <dt><var>location</var> . <code id=dom-location-hostname>hostname</code><dd>
    <p>Returns the <code>Location</code> object's URL's host.</p>
    <p>Can be set, to navigate to the same URL with a changed host.</p>
   <dt><var>location</var> . <code id=dom-location-port>port</code><dd>
    <p>Returns the <code>Location</code> object's URL's port.</p>
    <p>Can be set, to navigate to the same URL with a changed port.</p>
   <dt><var>location</var> . <code id=dom-location-pathname>pathname</code><dd>
    <p>Returns the <code>Location</code> object's URL's path.</p>
    <p>Can be set, to navigate to the same URL with a changed path.</p>
   <dt><var>location</var> . <code id=dom-location-search>search</code><dd>
    <p>Returns the <code>Location</code> object's URL's query (includes leading "<code>?</code>" if non-empty).</p>
    <p>Can be set, to navigate to the same URL with a changed query (ignores leading "<code>?</code>").</p>
   <dt><var>location</var> . <code id=dom-location-hash>hash</code><dd>
    <p>Returns the <code>Location</code> object's URL's fragment (includes leading "<code>#</code>" if non-empty).</p>
    <p>Can be set, to navigate to the same URL with a changed fragment (ignores leading "<code>#</code>").</p>
   <dt><var>location</var> . <code id=dom-location-assign>assign</code>(<var>url</var>)<dd>
    <p>Navigates to the given URL.</p>
   <dt><var>location</var> . <code id=dom-location-replace>replace</code>(<var>url</var>)<dd>
    <p>Removes the current page from the session history and navigates to the given URL.</p>
   <dt><var>location</var> . <code id=dom-location-reload>reload</code>()<dd>
    <p>現在のページをリロードする。</p>
   <dt><var>location</var> . <code id=dom-location-ancestororigins>ancestorOrigins</code><dd>
    <p>Returns a <code>DOMStringList</code> object listing the origins of the ancestor <a href=browsers.html#browsing-context id=the-location-interface:browsing-context-2>browsing contexts</a>, from the <a id=the-location-interface:parent-browsing-context href=browsers.html#parent-browsing-context>parent browsing
    context</a> to the <a id=the-location-interface:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>.</p>
   </dl>

  


  <nav><a href=origin.html>← 7.3 生成元</a> — <a href=./>目次</a> — <a href=browsing-the-web.html>7.6 ウェブを閲覧する →</a></nav>
</body></html>