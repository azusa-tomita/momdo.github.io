<!DOCTYPE html><html class=split lang=ja>
<script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport>
<title>HTML Standard 日本語訳</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/spec.css><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=stylesheet href=https://resources.whatwg.org/standard-shared-with-dev.css><link href=https://resources.whatwg.org/logo.svg rel=icon>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script>
<style>
   .bad, .bad *:not(.X\58X) { color: gray; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style>
<body>
  
  <script src=/html-dfn.js async=""></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new async="" src=https://resources.whatwg.org/file-issue.js></script>
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>4 March 2019</span></h2></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href=dnd.html>← 6.7 ドラッグアンドドロップ</a> — <a href=./>目次</a> — <a href=window-object.html>7.3 Windowオブジェクト →</a></nav><ol class=toc><li id=toc-browsers><a href=browsers.html#browsers><span class=secno>7</span> ウェブページの読み込み</a><ol><li><a href=browsers.html#windows><span class=secno>7.1</span> ブラウジングコンテキスト</a><ol><li><a href=browsers.html#creating-browsing-contexts><span class=secno>7.1.1</span> ブラウジングコンテキストを作成する</a></li><li><a href=browsers.html#nested-browsing-contexts><span class=secno>7.1.2</span> 関連するブラウジングコンテキスト</a><ol><li><a href=browsers.html#navigating-nested-browsing-contexts-in-the-dom><span class=secno>7.1.2.1</span> DOMで関連するブラウジングコンテキストをナビゲートする</a></li></ol></li><li><a href=browsers.html#security-nav><span class=secno>7.1.3</span> Security</a></li><li><a href=browsers.html#groupings-of-browsing-contexts><span class=secno>7.1.4</span> Groupings of browsing contexts</a></li><li><a href=browsers.html#browsing-context-names><span class=secno>7.1.5</span> ブラウジングコンテキスト名</a></li></ol></li><li><a href=browsers.html#cross-origin-objects><span class=secno>7.2</span> Security infrastructure for <code>Window</code>,
  <code>WindowProxy</code>, and <code>Location</code> objects</a><ol><li><a href=browsers.html#integration-with-idl><span class=secno>7.2.1</span> Integration with IDL</a></li><li><a href=browsers.html#shared-internal-slot:-crossoriginpropertydescriptormap><span class=secno>7.2.2</span> Shared internal slot: [[CrossOriginPropertyDescriptorMap]]</a></li><li><a href=browsers.html#shared-abstract-operations><span class=secno>7.2.3</span> Shared abstract operations</a><ol><li><a href=browsers.html#crossoriginproperties-(-o-)><span class=secno>7.2.3.1</span> CrossOriginProperties ( <var>O</var> )</a></li><li><a href=browsers.html#crossoriginpropertyfallback-(-p-)><span class=secno>7.2.3.2</span> CrossOriginPropertyFallback ( <var>P</var> )</a></li><li><a href=browsers.html#isplatformobjectsameorigin-(-o-)><span class=secno>7.2.3.3</span> IsPlatformObjectSameOrigin ( <var>O</var> )</a></li><li><a href=browsers.html#crossorigingetownpropertyhelper-(-o,-p-)><span class=secno>7.2.3.4</span> CrossOriginGetOwnPropertyHelper ( <var>O</var>, <var>P</var> )</a></li><li><a href=browsers.html#crossoriginget-(-o,-p,-receiver-)><span class=secno>7.2.3.5</span> CrossOriginGet ( <var>O</var>, <var>P</var>, <var>Receiver</var> )</a></li><li><a href=browsers.html#crossoriginset-(-o,-p,-v,-receiver-)><span class=secno>7.2.3.6</span> CrossOriginSet ( <var>O</var>, <var>P</var>, <var>V</var>,
  <var>Receiver</var> )</a></li><li><a href=browsers.html#crossoriginownpropertykeys-(-o-)><span class=secno>7.2.3.7</span> CrossOriginOwnPropertyKeys ( <var>O</var> )</a></li></ol></li></ol></li></ol></li></ol><h2 id=browsers><span class=secno>7</span> ウェブページの読み込み<a href=#browsers class=self-link></a></h2>

  

  <p>このセクションは、ウェブブラウザーに最も直接的に適用される機能について説明する。それでもやはり、特に指定しない限り、このセクションで定義されている要件は、ウェブブラウザーであるかどうかに関わらず、すべてのユーザーエージェントに適用<em>される</em>。</p>

  



  <h3 id=windows><span class=secno>7.1</span> ブラウジングコンテキスト<a href=#windows class=self-link></a></h3>

  <p><dfn id=browsing-context data-export="">ブラウジングコンテキスト</dfn>は<code id=windows:document><a href=dom.html#document>Document</a></code>オブジェクトがユーザーに提示される環境である。</p>

  <p class=note>ウェブブラウザーのタブまたはウィンドウは通常、<code id=windows:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>または<code id=windows:frameset><a href=obsolete.html#frameset>frameset</a></code>内の<code id=windows:frame><a href=obsolete.html#frame>frame</a></code>を含む、<a href=#browsing-context id=windows:browsing-context>ブラウジングコンテキスト</a>を含む。</p>

  <p><a href=#browsing-context id=windows:browsing-context-2>ブラウジングコンテキスト</a>は、対応する<code id=windows:windowproxy><a href=window-object.html#windowproxy>WindowProxy</a></code>オブジェクトを持つ。</p>

  <p>A <a href=#browsing-context id=windows:browsing-context-3>browsing context</a> has an <dfn id=opener-browsing-context data-export="">opener browsing context</dfn>, which
  is null or a <a href=#browsing-context id=windows:browsing-context-4>browsing context</a>. It is initially null.</p>

  <p>A <a href=#browsing-context id=windows:browsing-context-5>browsing context</a> has a <dfn id=disowned-its-opener>disowned</dfn> boolean. 最初はfalseである。</p>

  <p><a href=#browsing-context id=windows:browsing-context-6>ブラウジングコンテキスト</a>は、<a href=#browsing-context id=windows:browsing-context-7>ブラウジングコンテキスト</a>が提示されていた、している、またはするだろう<code id=windows:document-2><a href=dom.html#document>Document</a></code>オブジェクトを一覧表示する<a id=windows:session-history href=history.html#session-history>セッション履歴</a>を持つ。<a href=#browsing-context id=windows:browsing-context-8>ブラウジングコンテキスト</a>の<dfn id=active-document data-export="">アクティブ文書</dfn>は、その<code id=windows:windowproxy-2><a href=window-object.html#windowproxy>WindowProxy</a></code>オブジェクトの<a href=window-object.html#concept-windowproxy-window id=windows:concept-windowproxy-window>[[Window]]</a>内部スロット値に<a href=window-object.html#concept-document-window id=windows:concept-document-window>関連付けられた<code>Document</code></a>である。A <dfn data-dfn-for=Document id=concept-document-bc data-lt="browsing context" data-export=""><code>Document</code>'s browsing context</dfn> is the <a href=#browsing-context id=windows:browsing-context-9>browsing context</a> whose <a id=windows:session-history-2 href=history.html#session-history>session history</a> contains the <code id=windows:document-3><a href=dom.html#document>Document</a></code>, if any such browsing context exists and has not been <a href=window-object.html#a-browsing-context-is-discarded id=windows:a-browsing-context-is-discarded>discarded</a>, and null otherwise.</p>

  <p class=note>In general, there is a 1-to-1 mapping from the <code id=windows:window><a href=window-object.html#window>Window</a></code> object to the <code id=windows:document-4><a href=dom.html#document>Document</a></code> object, as long as the <code id=windows:document-5><a href=dom.html#document>Document</a></code> object has a non-null <a href=#concept-document-bc id=windows:concept-document-bc>browsing context</a>. There is one exception. A <code id=windows:window-2><a href=window-object.html#window>Window</a></code> can be reused for the presentation of a second <code id=windows:document-6><a href=dom.html#document>Document</a></code> in the same <a href=#browsing-context id=windows:browsing-context-10>browsing context</a>, such that the mapping is then 1-to-2. <a id=windows:replacement-enabled href=browsing-the-web.html#replacement-enabled>交換が有効な</a>、<a href=#browsing-context id=windows:browsing-context-11>ブラウジングコンテキスト</a>が初期<code id=windows:about:blank><a href=infrastructure.html#about:blank>about:blank</a></code> <code id=windows:document-7><a href=dom.html#document>Document</a></code>から別のものに<a href=browsing-the-web.html#navigate id=windows:navigate>ナビゲート</a>したとき、これは起こる。

  <p class=note>A <code id=windows:document-8><a href=dom.html#document>Document</a></code> does not necessarily have a non-null <a href=#concept-document-bc id=windows:concept-document-bc-2>browsing context</a>. 具体的には、データマイニングツールはブラウジングコンテキストをインスタンス化できないだろう。A <code id=windows:document-9><a href=dom.html#document>Document</a></code> created using an API such as <code id=windows:dom-domimplementation-createdocument><a data-x-internal=dom-domimplementation-createdocument href=https://triple-underscore.github.io/DOM4-ja.htmlcreatedocument>createDocument()</a></code> never has a non-null <a href=#concept-document-bc id=windows:concept-document-bc-3>browsing context</a>. <a href=infrastructure.html#remove-an-element-from-a-document id=windows:remove-an-element-from-a-document>文書から削除</a>されて以来、<code id=windows:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>要素で当初は作成された<code id=windows:document-10><a href=dom.html#document>Document</a></code>は、そのブラウジングコンテキストが<a href=window-object.html#a-browsing-context-is-discarded id=windows:a-browsing-context-is-discarded-2>破棄された</a>ので、関連付けられたブラウジングコンテキストを持たない。</p>



  <h4 id=creating-browsing-contexts><span class=secno>7.1.1</span> ブラウジングコンテキストを作成する<a href=#creating-browsing-contexts class=self-link></a></h4>

  <p>To <dfn id=set-the-active-document>set the active document</dfn> of a <a href=#browsing-context id=creating-browsing-contexts:browsing-context>browsing context</a>
  <var>browsingContext</var> to a <code id=creating-browsing-contexts:document><a href=dom.html#document>Document</a></code> object <var>document</var>, run these
  steps:</p>

  <ol><li>
    <p>Let <var>window</var> be <var>document</var>'s <a id=creating-browsing-contexts:concept-relevant-global href=webappapis.html#concept-relevant-global>relevant global object</a>.</p>

    <p class=XXX>Per this standard <var>document</var> can be created before
    <var>window</var>, which does not make much sense. See <a href=https://github.com/whatwg/html/issues/2688>issue #2688</a>.</p>
   </li><li><p>Set <var>browsingContext</var>'s <code id=creating-browsing-contexts:windowproxy><a href=window-object.html#windowproxy>WindowProxy</a></code> object's <a href=window-object.html#concept-windowproxy-window id=creating-browsing-contexts:concept-windowproxy-window>[[Window]]</a> internal slot value to
   <var>window</var>.</li><li><p>Set <var>window</var>'s <a href=window-object.html#concept-document-window id=creating-browsing-contexts:concept-document-window>associated
   <code>Document</code></a> to <var>document</var>.</li><li><p>Set <var>window</var>'s <a id=creating-browsing-contexts:relevant-settings-object href=webappapis.html#relevant-settings-object>relevant settings object</a>'s <a href=webappapis.html#concept-environment-execution-ready-flag id=creating-browsing-contexts:concept-environment-execution-ready-flag>execution ready flag</a>.</li></ol>

  <hr>

  <p>A <a href=#browsing-context id=creating-browsing-contexts:browsing-context-2>browsing context</a> has an associated <dfn id=creator-origin>creator origin</dfn> (null or returns an
  <a id=creating-browsing-contexts:concept-origin href=origin.html#concept-origin>origin</a>), <dfn id=creator-url>creator URL</dfn> (null or returns a <a id=creating-browsing-contexts:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>), <dfn id=creator-base-url>creator
  base URL</dfn> (null or returns a <a id=creating-browsing-contexts:url-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>), and <dfn id=creator-referrer-policy>creator referrer policy</dfn> (null
  or returns a <a id=creating-browsing-contexts:referrer-policy href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy data-x-internal=referrer-policy>referrer policy</a>). These are all initially null.</p>

  

  <p>To <dfn id=creating-a-new-browsing-context>create a new browsing context</dfn>, given
  null or a <code id=creating-browsing-contexts:document-2><a href=dom.html#document>Document</a></code> object <var>creator</var>:</p>

  <ol><li><p>Let <var>browsingContext</var> be a new <a href=#browsing-context id=creating-browsing-contexts:browsing-context-3>browsing context</a>.</li><li id=creator-browsing-context><p>If <var>creator</var> is non-null, then set
   <var>browsingContext</var>'s <a href=#creator-origin id=creating-browsing-contexts:creator-origin>creator origin</a> to return <var>creator</var>'s
   <a id=creating-browsing-contexts:concept-origin-2 href=origin.html#concept-origin>origin</a>, <var>browsingContext</var>'s <a href=#creator-url id=creating-browsing-contexts:creator-url>creator URL</a> to return
   <var>creator</var>'s <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-url id="creating-browsing-contexts:the-document's-address" data-x-internal="the-document's-address">URL</a>, <var>browsingContext</var>'s
   <a href=#creator-base-url id=creating-browsing-contexts:creator-base-url>creator base URL</a> to return <var>creator</var>'s <a href=urls-and-fetching.html#document-base-url id=creating-browsing-contexts:document-base-url>base URL</a>, and <var>browsingContext</var>'s <a href=#creator-referrer-policy id=creating-browsing-contexts:creator-referrer-policy>creator referrer policy</a> to
   return <var>creator</var>'s <a href=dom.html#concept-document-referrer-policy id=creating-browsing-contexts:concept-document-referrer-policy>referrer
   policy</a>.</li><li>
    <p>Let <var>realm execution context</var> be the result of <a id=creating-browsing-contexts:creating-a-new-javascript-realm href=webappapis.html#creating-a-new-javascript-realm>creating a new JavaScript
    realm</a> with the following customizations:</p>

    <ul><li><p>For the global object, create a new <code id=creating-browsing-contexts:window><a href=window-object.html#window>Window</a></code> object.</li><li><p>For the global <b>this</b> binding, use <var>browsingContext</var>'s
     <code id=creating-browsing-contexts:windowproxy-2><a href=window-object.html#windowproxy>WindowProxy</a></code> object.</li></ul>
   </li><li><p><a id=creating-browsing-contexts:set-up-a-window-environment-settings-object href=window-object.html#set-up-a-window-environment-settings-object>Set up a window environment settings object</a> with <var>realm execution
   context</var>, and let <var>settingsObject</var> be the result.</li><li><p>Let <var>document</var> be a new <code id=creating-browsing-contexts:document-3><a href=dom.html#document>Document</a></code>, marked as an <a href=https://triple-underscore.github.io/DOM4-ja.html#html-document id=creating-browsing-contexts:html-documents data-x-internal=html-documents>HTML document</a> in <a id=creating-browsing-contexts:quirks-mode href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-quirks data-x-internal=quirks-mode>quirks mode</a>, whose <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-content-type id=creating-browsing-contexts:concept-document-content-type data-x-internal=concept-document-content-type>content type</a> is "<code>text/html</code>",
   and which is both <a id=creating-browsing-contexts:ready-for-post-load-tasks href=parsing.html#ready-for-post-load-tasks>ready for post-load tasks</a> and <a id=creating-browsing-contexts:completely-loaded href=parsing.html#completely-loaded>completely loaded</a>
   immediately.</li><li><p>Ensure that <var>document</var> has a single child <code id=creating-browsing-contexts:the-html-element><a href=semantics.html#the-html-element>html</a></code> node, which itself
   has two empty child nodes: a <code id=creating-browsing-contexts:the-head-element><a href=semantics.html#the-head-element>head</a></code> element, and a <code id=creating-browsing-contexts:the-body-element><a href=sections.html#the-body-element>body</a></code> element.</li><li><p><a href=#set-the-active-document id=creating-browsing-contexts:set-the-active-document>Set the active document</a> of <var>browsingContext</var> to
   <var>document</var>.</li><li id=about-blank-origin><p>If <var>browsingContext</var>'s <a href=#creator-origin id=creating-browsing-contexts:creator-origin-2>creator origin</a> is
   non-null, then set <var>document</var>'s <a id=creating-browsing-contexts:concept-origin-3 href=origin.html#concept-origin>origin</a> to it.</li><li><p>Otherwise, set <var>document</var>'s <a id=creating-browsing-contexts:concept-origin-4 href=origin.html#concept-origin>origin</a> to a unique <a href=origin.html#concept-origin-opaque id=creating-browsing-contexts:concept-origin-opaque>opaque origin</a>.</li><li><p>If <var>browsingContext</var>'s <a href=#creator-url id=creating-browsing-contexts:creator-url-2>creator URL</a> is non-null, then set
   <var>document</var>'s <a href="dom.html#the-document's-referrer" id="creating-browsing-contexts:the-document's-referrer">referrer</a> to the <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-serializer id=creating-browsing-contexts:concept-url-serializer data-x-internal=concept-url-serializer>serialization</a> of it.</li><li><p>If <var>browsingContext</var>'s <a href=#creator-referrer-policy id=creating-browsing-contexts:creator-referrer-policy-2>creator referrer policy</a> is non-null, then set
   <var>document</var>'s <a href=dom.html#concept-document-referrer-policy id=creating-browsing-contexts:concept-document-referrer-policy-2>referrer policy</a> to
   it.</li><li><p><a id=creating-browsing-contexts:implement-the-sandboxing href=origin.html#implement-the-sandboxing>Implement the sandboxing</a> for <var>document</var>.</li><li><p><a id="creating-browsing-contexts:initialize-a-document's-feature-policy" href=https://wicg.github.io/feature-policy/#initialize-for-document data-x-internal="initialize-a-document's-feature-policy">Initialize a document's feature policy</a> given <var>document</var>. <a href=references.html#refsFEATUREPOLICY>[FEATUREPOLICY]</a></li><li><p>Add <var>document</var> to <var>browsingContext</var>'s <a id=creating-browsing-contexts:session-history href=history.html#session-history>session
   history</a>.</li><li><p>Return <var>browsingContext</var>.</li></ol>

  <p>To <dfn id=creating-a-new-top-level-browsing-context>create a new top-level browsing
  context</dfn>:</p>

  <ol><li><p>Let <var>group</var> be the result of <a href=#creating-a-new-browsing-context-group id=creating-browsing-contexts:creating-a-new-browsing-context-group>creating a new browsing context
   group</a>.</li><li><p>Return <var>group</var>'s <a href=#browsing-context-set id=creating-browsing-contexts:browsing-context-set>browsing context set</a>[0].</li></ol>

  <p class=note>This creates a <a href=#top-level-browsing-context id=creating-browsing-contexts:top-level-browsing-context>top-level browsing context</a>.</p>

  <p>To <dfn id=creating-a-new-auxiliary-browsing-context>create a new auxiliary browsing
  context</dfn>, given a <a href=#browsing-context id=creating-browsing-contexts:browsing-context-4>browsing context</a> <var>opener</var>:</p>

  <ol><li><p>Let <var>browsingContext</var> be the result of <a href=#creating-a-new-browsing-context id=creating-browsing-contexts:creating-a-new-browsing-context>creating a new browsing
   context</a> with <var>opener</var>'s <a href=#active-document id=creating-browsing-contexts:active-document>active document</a>.</li><li><p>Assert: <var>opener</var>'s <a href=#top-level-browsing-context id=creating-browsing-contexts:top-level-browsing-context-2>top-level browsing context</a>'s <a href=#tlbc-group id=creating-browsing-contexts:tlbc-group>group</a> is non-null, as <a href=browsing-the-web.html#navigate id=creating-browsing-contexts:navigate>navigating</a> invokes this
   directly.</li><li><p><a href=#bcg-append id=creating-browsing-contexts:bcg-append>Append</a> <var>browsingContext</var> to <var>opener</var>'s
   <a href=#top-level-browsing-context id=creating-browsing-contexts:top-level-browsing-context-3>top-level browsing context</a>'s <a href=#tlbc-group id=creating-browsing-contexts:tlbc-group-2>group</a>.</li><li><p>Set <var>browsingContext</var>'s <a href=#opener-browsing-context id=creating-browsing-contexts:opener-browsing-context>opener browsing context</a> to
   <var>opener</var>.</li><li><p>Assert: <var>browsingContext</var>'s <a href=#creator-origin id=creating-browsing-contexts:creator-origin-3>creator origin</a> is non-null.</li><li id=copy-session-storage><p>If <var>browsingContext</var>'s <a href=#creator-origin id=creating-browsing-contexts:creator-origin-4>creator origin</a> is
   <a id=creating-browsing-contexts:same-origin href=origin.html#same-origin>same origin</a> with <var>browsingContext</var>'s <a href=#active-document id=creating-browsing-contexts:active-document-2>active document</a>'s
   <a id=creating-browsing-contexts:concept-origin-5 href=origin.html#concept-origin>origin</a>, then copy the <code id=creating-browsing-contexts:dom-sessionstorage><a href=webstorage.html#dom-sessionstorage>sessionStorage</a></code>
   storage area of <var>opener</var> into <var>browsingContext</var>'s set of session storage areas.
   These areas must be considered separate, not affecting each other in any way.</li><li><p>Return <var>browsingContext</var>.</li></ol>

  <p class=note>This creates a <a href=#top-level-browsing-context id=creating-browsing-contexts:top-level-browsing-context-4>top-level browsing context</a> that is also an
  <a href=#auxiliary-browsing-context id=creating-browsing-contexts:auxiliary-browsing-context>auxiliary browsing context</a>.</p>

  <p>To <dfn id=creating-a-new-nested-browsing-context>create a new nested browsing context</dfn>,
  given an element <var>element</var>:</p>

  <ol><li><p>Let <var>browsingContext</var> be the result of <a href=#creating-a-new-browsing-context id=creating-browsing-contexts:creating-a-new-browsing-context-2>creating a new browsing
   context</a> with <var>element</var>'s <a id=creating-browsing-contexts:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>.</li><li><p>Set <var>element</var>'s <a href=#nested-browsing-context id=creating-browsing-contexts:nested-browsing-context>nested browsing context</a> to
   <var>browsingContext</var>.</li><li><p>If <var>element</var> has a <code>name</code> attribute, then set
   <var>browsingContext</var>'s <a href=#browsing-context-name id=creating-browsing-contexts:browsing-context-name>name</a> to the value of
   this attribute.</li></ol>

  


  <h4 id=nested-browsing-contexts><span class=secno>7.1.2</span> 関連するブラウジングコンテキスト<a href=#nested-browsing-contexts class=self-link></a></h4>

  <p>特定の要素（たとえば、<code id=nested-browsing-contexts:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>要素）は、<a href=#browsing-context id=nested-browsing-contexts:browsing-context>ブラウジングコンテキスト</a>をさらにインスタンス化できる。この要素は、<dfn id=browsing-context-container data-lt="browsing context container" data-export="">ブラウジングコンテキストコンテナ</dfn>と呼ばれる。</p>

  <p>各<a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container>ブラウジングコンテキストコンテナ</a>は、<a href=#browsing-context id=nested-browsing-contexts:browsing-context-2>ブラウジングコンテキスト</a>またはnullのいずれとなる、<dfn id=nested-browsing-context data-export="">ネストされたブラウジングコンテキスト</dfn>を持つ。</p>

  <p><a href=#browsing-context id=nested-browsing-contexts:browsing-context-3>ブラウジングコンテキスト</a>が<a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-2>ブラウジングコンテキストコンテナ</a>の<a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context>ネストされたブラウジングコンテキスト</a>である場合、ブラウジングコンテキストは、<a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-3>ブラウジングコンテキストコンテナ</a>の<a id=nested-browsing-contexts:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>ノード文書</a>を<dfn id=browsing-context-nested-through data-export="">経由してネストされる</dfn>と呼ばれる。</p>

  <p>次の条件のすべてを保持する場合、<a href=#browsing-context id=nested-browsing-contexts:browsing-context-4>ブラウジングコンテキスト</a><var>child</var>は、別の<a href=#browsing-context id=nested-browsing-contexts:browsing-context-5>ブラウジングコンテキスト</a><var>parent</var>の<dfn id=child-browsing-context data-export="">子ブラウジングコンテキスト</dfn>であると言われる：</p>

  <ul><li><p><var>child</var>は<a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-4>ブラウジングコンテキストコンテナ</a><var>element</var>の<a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-2>ネストされたブラウジングコンテキストである</a></li><li><p><var>element</var>が<a id=nested-browsing-contexts:connected href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>接続される</a></li><li><p><var>element</var>の<a id=nested-browsing-contexts:shadow-including-root href=https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-root data-x-internal=shadow-including-root>ルートを含むシャドウ</a>の<a href=#concept-document-bc id=nested-browsing-contexts:concept-document-bc>ブラウジングコンテキスト</a>が<var>parent</var>である</li></ul>

  <p><a href=#browsing-context id=nested-browsing-contexts:browsing-context-6>ブラウジング コンテキスト</a><var>child</var>が、<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context>子ブラウジングコンテキスト</a>でありかつその<a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-5>ブラウジングコンテキストコンテナ</a>に単に<a id=nested-browsing-contexts:connected-2 href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>接続されない</a>だけでなく<a id=nested-browsing-contexts:in-a-document-tree href=https://triple-underscore.github.io/DOM4-ja.html#in-a-document data-x-internal=in-a-document-tree>文書ツリー内</a>である場合、<var>parent</var>の<dfn id=document-tree-child-browsing-context>文書ツリー子ブラウジングコンテキスト</dfn>である。</p>

  <p><a href=#browsing-context id=nested-browsing-contexts:browsing-context-7>ブラウジングコンテキスト</a><var>child</var>は<dfn id=parent-browsing-context data-export="">親ブラウジングコンテキスト</dfn>を持ってもよい。もしそのようなブラウジングコンテキストが存在すれば、これは<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-2>子ブラウジングコンテキスト</a>として<var>child</var>を持つ一意な<a href=#browsing-context id=nested-browsing-contexts:browsing-context-8>ブラウジングコンテキスト</a>である。そうでなければ、<a href=#browsing-context id=nested-browsing-contexts:browsing-context-9>ブラウジングコンテキスト</a>は、<a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context>親ブラウジングコンテキスト</a>を持たない。</p>

  <p><a href=#browsing-context id=nested-browsing-contexts:browsing-context-10>ブラウジングコンテキスト</a><var>A</var>が<var>A</var>の<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-3>子ブラウジングコンテキスト</a>であり、かつ<var>B</var>の<a href=#ancestor-browsing-context id=nested-browsing-contexts:ancestor-browsing-context>祖先</a>自身であるブラウジングコンテキスト<var>A'</var>が存在する場合、またはブラウジングコンテキスト<var>A</var>が<var>B</var>の<a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context-2>親ブラウジングコンテキスト</a>である場合、ブラウジングコンテキスト<var>B</var>の<dfn id=ancestor-browsing-context data-lt="ancestor browsing context" data-export="">祖先</dfn>であると言われる。</p>

  <p>A <a href=#browsing-context id=nested-browsing-contexts:browsing-context-11>browsing context</a> that has no <a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context-3>parent browsing context</a> is the <dfn id=top-level-browsing-context data-export="">top-level browsing context</dfn> for itself and all of the browsing contexts for
  which it is an <a href=#ancestor-browsing-context id=nested-browsing-contexts:ancestor-browsing-context-2>ancestor browsing context</a>.</p>

  <p>A <a href=#top-level-browsing-context id=nested-browsing-contexts:top-level-browsing-context>top-level browsing context</a> has an associated <dfn id=tlbc-group>group</dfn> (null or a <a href=#browsing-context-group id=nested-browsing-contexts:browsing-context-group>browsing context group</a>). It is initially null.</p>

  <p>要素を通じてネストせずに<a href=#top-level-browsing-context id=nested-browsing-contexts:top-level-browsing-context-2>トップレベルブラウジングコンテキスト</a>に関連する新しいブラウジングコンテキストを作成することが可能である。このようなブラウジングコンテキストは、<dfn id=auxiliary-browsing-context data-lt="auxiliary browsing context" data-export="">補助ブラウジングコンテキスト</dfn>と呼ばれる。補助ブラウジングコンテキストは常に<a href=#top-level-browsing-context id=nested-browsing-contexts:top-level-browsing-context-3>トップレベルブラウジングコンテキスト</a>である。</p>

  <p><a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-3>ネストされたブラウジングコンテキスト</a>である<a href=#browsing-context id=nested-browsing-contexts:browsing-context-12>ブラウジングコンテキスト</a>に対する<a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context-4>親ブラウジングコンテキスト</a>の推移的クロージャは、<a href=#ancestor-browsing-context id=nested-browsing-contexts:ancestor-browsing-context-3>祖先ブラウジングコンテキスト</a>をのリストを与える。</p>

  <p><code id=nested-browsing-contexts:document><a href=dom.html#document>Document</a></code> <var>d</var>の<dfn id=list-of-the-descendant-browsing-contexts>子孫ブラウジングコンテキストのリスト</dfn>は、以下のアルゴリズムによって返される（順序の）リストである：</p>

  <ol><li><p><var>list</var>を空にする。</li><li>

    <p><var>d</var>の各<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-4>子ブラウジングコンテキスト</a>は<var>d</var> <a href=https://triple-underscore.github.io/DOM4-ja.html#in-a-document id=nested-browsing-contexts:in-a-document data-x-internal=in-a-document><code>Document</code>で</a>存在する要素を<a href=#browsing-context-nested-through id=nested-browsing-contexts:browsing-context-nested-through>介してネストされる</a>ので、要素のこれら<a href=#browsing-context id=nested-browsing-contexts:browsing-context-13>ブラウジングコンテキスト</a>をネストする<a id=nested-browsing-contexts:tree-order href=https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order data-x-internal=tree-order>ツリー順</a>に、次のサブステップを実行する：</p>

    <ol><li><p>リスト<var>list</var>にその<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-5>子ブラウジングコンテキスト</a>を追加する。</p>

     </li><li><p>リスト<var>list</var>にその<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-6>子ブラウジングコンテキスト</a>の<a href=#active-document id=nested-browsing-contexts:active-document>アクティブドキュメント</a>に属する<a href=#list-of-the-descendant-browsing-contexts id=nested-browsing-contexts:list-of-the-descendant-browsing-contexts>子孫ブラウジングコンテキストのリスト</a>を追加する。</li></ol>

   </li><li><p>構築された<var>list</var>を返す。</li></ol>

  <p>A <code id=nested-browsing-contexts:document-2><a href=dom.html#document>Document</a></code> is said to be <dfn data-dfn-for=Document id=fully-active data-export="">fully
  active</dfn> when its <a href=#concept-document-bc id=nested-browsing-contexts:concept-document-bc-2>browsing context</a> is non-null and
  it is the <a href=#active-document id=nested-browsing-contexts:active-document-2>active document</a> of that <a href=#browsing-context id=nested-browsing-contexts:browsing-context-14>browsing context</a>, and either its <a href=#concept-document-bc id=nested-browsing-contexts:concept-document-bc-3>browsing context</a> is a <a href=#top-level-browsing-context id=nested-browsing-contexts:top-level-browsing-context-4>top-level browsing context</a>,
  or it has a <a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context-5>parent browsing context</a> and the <code id=nested-browsing-contexts:document-3><a href=dom.html#document>Document</a></code> <a href=#browsing-context-nested-through id=nested-browsing-contexts:browsing-context-nested-through-2>through which</a> it is <a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-4>nested</a> is itself <a href=#fully-active id=nested-browsing-contexts:fully-active>fully active</a>.</p>

  <p>Because they are associated with an element, <a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-7>child browsing contexts</a> are always tied to a specific <code id=nested-browsing-contexts:document-4><a href=dom.html#document>Document</a></code> in their <a href=#parent-browsing-context id=nested-browsing-contexts:parent-browsing-context-6>parent browsing context</a>. ユーザーエージェントは、ユーザーにがいない自身が<a href=#fully-active id=nested-browsing-contexts:fully-active-2>完全にアクティブ</a>でない<code id=nested-browsing-contexts:document-5><a href=dom.html#document>Document</a></code>にある要素の<a href=#child-browsing-context id=nested-browsing-contexts:child-browsing-context-8>子ブラウジングコンテキスト</a>と対話することを許可してはならない。</p>

  <div class=example>
   <p>The following example illustrates the differences between <a href=#active-document id=nested-browsing-contexts:active-document-3>active</a> and <a href=#fully-active id=nested-browsing-contexts:fully-active-3>fully active</a> <code id=nested-browsing-contexts:document-6><a href=dom.html#document>Document</a></code> objects. Here <code>a.html</code> is loaded into a browser window, <code>b-1.html</code> starts
   out loaded into an <code id=nested-browsing-contexts:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> as shown, and <code>b-2.html</code> and <code>c.html</code> are omitted (they can simply be an empty document).</p>

   <pre><code class='html'><c- c>&lt;!-- a.html --&gt;</c->
<c- cp>&lt;!DOCTYPE html&gt;</c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>title</c-><c- p>&gt;</c->Browsing context A<c- p>&lt;/</c-><c- f>title</c-><c- p>&gt;</c->

<c- p>&lt;</c-><c- f>iframe</c-> <c- e>src</c-><c- o>=</c-><c- s>"b-1.html"</c-><c- p>&gt;&lt;/</c-><c- f>iframe</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"frames[0].location.href = 'b-2.html'"</c-><c- p>&gt;</c->Click me<c- p>&lt;/</c-><c- f>button</c-><c- p>&gt;</c->

<c- c>&lt;!-- b-1.html --&gt;</c->
<c- cp>&lt;!DOCTYPE html&gt;</c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>&gt;</c->
<c- p>&lt;</c-><c- f>title</c-><c- p>&gt;</c->Browsing context B<c- p>&lt;/</c-><c- f>title</c-><c- p>&gt;</c->

<c- p>&lt;</c-><c- f>iframe</c-> <c- e>src</c-><c- o>=</c-><c- s>"c.html"</c-><c- p>&gt;&lt;/</c-><c- f>iframe</c-><c- p>&gt;</c-></code></pre>

   <p>At this point, the documents given by <code>a.html</code>, <code>b-1.html</code>, and <code>c.html</code> are all the <a href=#active-document id=nested-browsing-contexts:active-document-4>active documents</a> of their respective <a href=#concept-document-bc id=nested-browsing-contexts:concept-document-bc-4>browsing
   contexts</a>. They are also all <a href=#fully-active id=nested-browsing-contexts:fully-active-4>fully active</a>.</p>

   <p>After clicking on the <code id=nested-browsing-contexts:the-button-element><a href=form-elements.html#the-button-element>button</a></code>, and thus loading a new <code id=nested-browsing-contexts:document-7><a href=dom.html#document>Document</a></code> from
   <code>b-2.html</code> into browsing context B, we have the following results:</p>

   <ul><li><p>The <code>a.html</code> <code id=nested-browsing-contexts:document-8><a href=dom.html#document>Document</a></code> remains both the <a href=#active-document id=nested-browsing-contexts:active-document-5>active
    document</a> of browsing context A, and <a href=#fully-active id=nested-browsing-contexts:fully-active-5>fully active</a>.</li><li><p>The <code>b-1.html</code> <code id=nested-browsing-contexts:document-9><a href=dom.html#document>Document</a></code> is now <em>not</em> the
    <a href=#active-document id=nested-browsing-contexts:active-document-6>active document</a> of browsing context B. As such it is also not <a href=#fully-active id=nested-browsing-contexts:fully-active-6>fully
    active</a>.</li><li><p>The new <code>b-2.html</code> <code id=nested-browsing-contexts:document-10><a href=dom.html#document>Document</a></code> is now the <a href=#active-document id=nested-browsing-contexts:active-document-7>active
    document</a> of browsing context B, and is also <a href=#fully-active id=nested-browsing-contexts:fully-active-7>fully active</a>.</li><li><p>The <code>c.html</code> <code id=nested-browsing-contexts:document-11><a href=dom.html#document>Document</a></code> is still the <a href=#active-document id=nested-browsing-contexts:active-document-8>active
    document</a> of browsing context C. However, since it is <a href=#browsing-context-nested-through id=nested-browsing-contexts:browsing-context-nested-through-3>nested through</a> the <code>b-1.html</code> <code id=nested-browsing-contexts:document-12><a href=dom.html#document>Document</a></code>,
    which is itself not <a href=#fully-active id=nested-browsing-contexts:fully-active-8>fully active</a>, this means the <code>c.html</code>
    <code id=nested-browsing-contexts:document-13><a href=dom.html#document>Document</a></code> is now not <a href=#fully-active id=nested-browsing-contexts:fully-active-9>fully active</a> (even though it is <a href=#active-document id=nested-browsing-contexts:active-document-9>active</a>).</li></ul>

   <p>For more explorations of the complexities involved here, especially as it impacts <a href=history.html#history>the session history</a>, see <cite>A Model of Navigation History</cite>. <a href=references.html#refsNAVMODEL>[NAVMODEL]</a></p>
  </div>

  <p>A <a href=#browsing-context id=nested-browsing-contexts:browsing-context-15>browsing context</a> that is a <a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-5>nested browsing context</a> can be put into
  a <dfn id=delaying-load-events-mode>delaying <code>load</code> events mode</dfn>. This is used when it is
  <a href=browsing-the-web.html#navigate id=nested-browsing-contexts:navigate>navigated</a>, to <a id=nested-browsing-contexts:delay-the-load-event href=parsing.html#delay-the-load-event>delay the load event</a> of its
  <a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-6>browsing context container</a> before the new <code id=nested-browsing-contexts:document-14><a href=dom.html#document>Document</a></code> is created.</p>



  <p><a href=#browsing-context id=nested-browsing-contexts:browsing-context-16>ブラウジングコンテキスト</a>の<dfn id=document-family>ドキュメントファミリー</dfn>は、その<a href=#browsing-context id=nested-browsing-contexts:browsing-context-17>ブラウジングコンテキスト</a>の<a id=nested-browsing-contexts:session-history href=history.html#session-history>セッション履歴</a>ですべての<code id=nested-browsing-contexts:document-15><a href=dom.html#document>Document</a></code>オブジェクト　およびすべてのそれら<code id=nested-browsing-contexts:document-16><a href=dom.html#document>Document</a></code>オブジェクトの<a href=#document-family id=nested-browsing-contexts:document-family>ドキュメントファミリー</a>の結合で構成される。<code id=nested-browsing-contexts:document-17><a href=dom.html#document>Document</a></code>オブジェクトの<a href=#document-family id=nested-browsing-contexts:document-family-2>ドキュメントファミリー</a>は、<code id=nested-browsing-contexts:document-18><a href=dom.html#document>Document</a></code>オブジェクトを<a href=#browsing-context-nested-through id=nested-browsing-contexts:browsing-context-nested-through-4>介してネストされる</a><a href=#browsing-context id=nested-browsing-contexts:browsing-context-18>ブラウジングコンテキスト</a>の所有するすべての<a href=#document-family id=nested-browsing-contexts:document-family-3>ドキュメントファミリー</a>の結合で構成される。</p>

  <p>The <dfn id=concept-bcc-content-document>content document</dfn> of a <a href=#browsing-context-container id=nested-browsing-contexts:browsing-context-container-7>browsing
  context container</a> <var>container</var> is the result of the following algorithm:</p>

  <ol><li><p>If <var>container</var>'s <a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-6>nested browsing context</a> is null, then return
   null.</li><li><p>Let <var>context</var> be <var>container</var>'s <a href=#nested-browsing-context id=nested-browsing-contexts:nested-browsing-context-7>nested browsing
   context</a>.</li><li><p>Let <var>document</var> be <var>context</var>'s <a href=#active-document id=nested-browsing-contexts:active-document-10>active document</a>.</li><li><p>If <var>document</var>'s <a id=nested-browsing-contexts:concept-origin href=origin.html#concept-origin>origin</a> and the <a href=webappapis.html#concept-settings-object-origin id=nested-browsing-contexts:concept-settings-object-origin>origin</a> specified by the <a id=nested-browsing-contexts:current-settings-object href=webappapis.html#current-settings-object>current settings
   object</a> are not <a id=nested-browsing-contexts:same-origin-domain href=origin.html#same-origin-domain>same origin-domain</a>, then return null.</li><li><p>Return <var>document</var>.</li></ol>


  <h5 id=navigating-nested-browsing-contexts-in-the-dom><span class=secno>7.1.2.1</span> DOMで関連するブラウジングコンテキストをナビゲートする<a href=#navigating-nested-browsing-contexts-in-the-dom class=self-link></a></h5>

  <dl class=domintro><dt><var>window</var> . <code id=dom-top-dev><a href=#dom-top>top</a></code><dd>
    <p><a href=#top-level-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:top-level-browsing-context>トップレベルブラウジングコンテキスト</a>の<code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy><a href=window-object.html#windowproxy>WindowProxy</a></code>を返す。</p>
   <dt><var>window</var> . <code id=dom-opener-dev><a href=#dom-opener>opener</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the <code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-2><a href=window-object.html#windowproxy>WindowProxy</a></code> for the <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context>opener browsing context</a>.</p>

    <p>Returns null if there isn't one or if it has been set to null.</p>

    <p>Can be set to null.</p>
   <dt><var>window</var> . <code id=dom-parent-dev><a href=#dom-parent>parent</a></code><dd>
    <p><a href=#parent-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:parent-browsing-context>親ブラウジングコンテキスト</a>に対する<code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-3><a href=window-object.html#windowproxy>WindowProxy</a></code>を返す。</p>
   <dt><var>window</var> . <code id=dom-frameelement-dev><a href=#dom-frameelement>frameElement</a></code><dd>
    <p><a href=#browsing-context-container id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-container>ブラウジングコンテキストコンテナ</a>の<code id=navigating-nested-browsing-contexts-in-the-dom:element><a data-x-internal=element href=https://triple-underscore.github.io/DOM4-ja.html#interface-element>Element</a></code>を返す。</p>

    <p>存在しない場合、クロスオリジンの状況でnullを返す。</p>
   </dl>

  

  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/top title="Returns a reference to the topmost window in the window hierarchy.">Window/top</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="edge yes"><span>Edge</span><span>12+</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span></details></div></aside><p>The <dfn id=dom-top><code>top</code></dfn> attribute's getter must run these steps:</p>

  <ol><li><p>If this <code id=navigating-nested-browsing-contexts-in-the-dom:window><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc>browsing context</a> is
   null, then return null.</li><li><p>Return this <code id=navigating-nested-browsing-contexts-in-the-dom:window-2><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-2>browsing
   context</a>'s <a href=#top-level-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:top-level-browsing-context-2>top-level browsing context</a>'s <code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-4><a href=window-object.html#windowproxy>WindowProxy</a></code>
   object.</li></ol>

  <p>The <dfn id=dom-opener><code>opener</code></dfn> attribute's getter must run these
  steps:</p>

  <ol><li><p>Let <var>current</var> be this <code id=navigating-nested-browsing-contexts-in-the-dom:window-3><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-3>browsing context</a>.</li><li><p>If <var>current</var> is null, then return null.</li><li><p>If <var>current</var>'s <a href=#disowned-its-opener id=navigating-nested-browsing-contexts-in-the-dom:disowned-its-opener>disowned</a> is true, then return null.</li><li><p>If <var>current</var>'s <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context-2>opener browsing context</a> is null, then return
   null.</li><li><p>Return <var>current</var>'s <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context-3>opener browsing context</a>'s
   <code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-5><a href=window-object.html#windowproxy>WindowProxy</a></code> object.</li></ol>

  <p>The <code id=navigating-nested-browsing-contexts-in-the-dom:dom-opener><a href=#dom-opener>opener</a></code> attribute's setter must run these steps:</p>

  <ol><li><p>If the given value is null and this <code id=navigating-nested-browsing-contexts-in-the-dom:window-4><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-4>browsing context</a> is non-null, then set this <code id=navigating-nested-browsing-contexts-in-the-dom:window-5><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-5>browsing context</a>'s <a href=#disowned-its-opener id=navigating-nested-browsing-contexts-in-the-dom:disowned-its-opener-2>disowned</a> to true.</li><li><p>If the given value is non-null, then return ? <a id=navigating-nested-browsing-contexts-in-the-dom:ordinarydefineownproperty href=https://tc39.github.io/ecma262/#sec-ordinarydefineownproperty data-x-internal=ordinarydefineownproperty>OrdinaryDefineOwnProperty</a>(this
   <code id=navigating-nested-browsing-contexts-in-the-dom:window-6><a href=window-object.html#window>Window</a></code> object, "<code>opener</code>", { [[Value]]: the given value,
   [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true }).</li></ol>

  <div class=note>
   <p>If a <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context>browsing context</a>'s <a href=#disowned-its-opener id=navigating-nested-browsing-contexts-in-the-dom:disowned-its-opener-3>disowned</a> is true, its <code id=navigating-nested-browsing-contexts-in-the-dom:dom-opener-2><a href=#dom-opener>window.opener</a></code> attribute is null. That prevents scripts in the
   <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-2>browsing context</a> from changing any properties of its <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context-4>opener browsing
   context</a>'s <code id=navigating-nested-browsing-contexts-in-the-dom:window-7><a href=window-object.html#window>Window</a></code> object (i.e., the <code id=navigating-nested-browsing-contexts-in-the-dom:window-8><a href=window-object.html#window>Window</a></code> object from which the
   <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-3>browsing context</a> was created).</p>

   <p>Otherwise, if a <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-4>browsing context</a>'s <a href=#disowned-its-opener id=navigating-nested-browsing-contexts-in-the-dom:disowned-its-opener-4>disowned</a> is false, then scripts
   in that <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-5>browsing context</a> can use <code id=navigating-nested-browsing-contexts-in-the-dom:dom-opener-3><a href=#dom-opener>window.opener</a></code> to
   change properties of its <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context-5>opener browsing context</a>'s <code id=navigating-nested-browsing-contexts-in-the-dom:window-9><a href=window-object.html#window>Window</a></code> object. For
   example, a script running in the <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-6>browsing context</a> can change the value of <code>window.opener.location</code>, causing the <a href=#opener-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context-6>opener browsing context</a> to
   navigate to a completely different document.</p>
  </div>

  <p>The <dfn id=dom-parent><code>parent</code></dfn> attribute's getter must run these
  steps:</p>

  <ol><li><p>Let <var>current</var> be this <code id=navigating-nested-browsing-contexts-in-the-dom:window-10><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-6>browsing context</a>.</li><li><p>If <var>current</var> is null, then return null.</li><li><p>If <var>current</var> is a <a href=#child-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:child-browsing-context>child browsing context</a> of another <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-7>browsing
   context</a> <var>parent</var>, then return <var>parent</var>'s <code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-6><a href=window-object.html#windowproxy>WindowProxy</a></code>
   object.</li><li><p>Assert: <var>current</var> is a <a href=#top-level-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:top-level-browsing-context-3>top-level browsing context</a>.</li><li><p>Return <var>current</var>'s <code id=navigating-nested-browsing-contexts-in-the-dom:windowproxy-7><a href=window-object.html#windowproxy>WindowProxy</a></code> object.</li></ol>

  <aside class="mdn before"><input onclick=toggleStatus(this) value=⋰ type=button><div><b>MDN</b> <details><summary><a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement title="Returns the element (such as iframe or object) in which the window is embedded, or null if the element is either top-level or is embedded into a document with a different script origin; that is, in cross-origin situations.">Window/frameElement</a></summary><p class=mdnsupport><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="edge yes"><span>Edge</span><span>12+</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span></details></div></aside><p>The <dfn id=dom-frameelement><code>frameElement</code></dfn> attribute's getter must run
  these steps:</p>

  <ol><li><p>Let <var>current</var> be this <code id=navigating-nested-browsing-contexts-in-the-dom:window-11><a href=window-object.html#window>Window</a></code> object's <a href=window-object.html#window-bc id=navigating-nested-browsing-contexts-in-the-dom:window-bc-7>browsing context</a>.</li><li><p>If <var>current</var> is null, then return null.</li><li><p>If <var>current</var> is not a <a href=#child-browsing-context id=navigating-nested-browsing-contexts-in-the-dom:child-browsing-context-2>child browsing context</a>, then return
   null.</li><li><p>Let <var>container</var> be <var>current</var>'s <a href=#browsing-context-container id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-container-2>browsing context
   container</a>.</li><li><p>If <var>container</var>'s <a id=navigating-nested-browsing-contexts-in-the-dom:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <a id=navigating-nested-browsing-contexts-in-the-dom:concept-origin href=origin.html#concept-origin>origin</a> is not
   <a id=navigating-nested-browsing-contexts-in-the-dom:same-origin-domain href=origin.html#same-origin-domain>same origin-domain</a> with the <a id=navigating-nested-browsing-contexts-in-the-dom:current-settings-object href=webappapis.html#current-settings-object>current settings object</a>'s <a href=webappapis.html#concept-settings-object-origin id=navigating-nested-browsing-contexts-in-the-dom:concept-settings-object-origin>origin</a>, then return null.</li><li><p>Return <var>container</var>.</li></ol>

  <div class=example>
   <p>An example of when these IDL attributes can return null is as follows:</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE html&gt;</c->
<c- p>&lt;</c-><c- f>iframe</c-><c- p>&gt;&lt;/</c-><c- f>iframe</c-><c- p>&gt;</c->

<c- p>&lt;</c-><c- f>script</c-><c- p>&gt;</c->
<c- u>"use strict"</c-><c- p>;</c->
<c- kr>const</c-> element <c- o>=</c-> document<c- p>.</c->querySelector<c- p>(</c-><c- u>"iframe"</c-><c- p>);</c->
<c- kr>const</c-> iframeWindow <c- o>=</c-> element<c- p>.</c->contentWindow<c- p>;</c->
element<c- p>.</c->remove<c- p>();</c->

console<c- p>.</c->assert<c- p>(</c->iframeWindow<c- p>.</c->top <c- o>===</c-> <c- kc>null</c-><c- p>);</c->
console<c- p>.</c->assert<c- p>(</c->iframeWindow<c- p>.</c->parent <c- o>===</c-> <c- kc>null</c-><c- p>);</c->
console<c- p>.</c->assert<c- p>(</c->iframeWindow<c- p>.</c->frameElement <c- o>===</c-> <c- kc>null</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>&gt;</c-></code></pre>

   <p>Here the <a href=#browsing-context id=navigating-nested-browsing-contexts-in-the-dom:browsing-context-8>browsing context</a> corresponding to <code>iframeWindow</code>
   was <a href=window-object.html#a-browsing-context-is-discarded id=navigating-nested-browsing-contexts-in-the-dom:a-browsing-context-is-discarded>discarded</a> when <code>element</code> was removed from the document.</p>
  </div>



  <h4 id=security-nav><span class=secno>7.1.3</span> Security<a href=#security-nav class=self-link></a></h4>

  <p id=security-1>A <a href=#browsing-context id=security-nav:browsing-context>browsing context</a> <var>A</var> is <dfn id=familiar-with>familiar
  with</dfn> a second <a href=#browsing-context id=security-nav:browsing-context-2>browsing context</a> <var>B</var> if one of the following
  conditions is true:</p>

  <ul><li>Either the <a id=security-nav:concept-origin href=origin.html#concept-origin>origin</a> of the <a href=#active-document id=security-nav:active-document>active document</a> of <var>A</var>
   is the <a href=origin.html#same-origin id=security-nav:same-origin>same</a> as the <a id=security-nav:concept-origin-2 href=origin.html#concept-origin>origin</a> of the <a href=#active-document id=security-nav:active-document-2>active
   document</a> of <var>B</var>, or</li><li>The browsing context <var>A</var> is a <a href=#nested-browsing-context id=security-nav:nested-browsing-context>nested browsing context</a> with a
   <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context>top-level browsing context</a>, and its <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-2>top-level browsing context</a> is <var>B</var>, or</li><li>The browsing context <var>B</var> is an <a href=#auxiliary-browsing-context id=security-nav:auxiliary-browsing-context>auxiliary browsing context</a> and
   <var>A</var> is <a href=#familiar-with id=security-nav:familiar-with>familiar with</a> <var>B</var>'s <a href=#opener-browsing-context id=security-nav:opener-browsing-context>opener
   browsing context</a>, or</li><li>The browsing context <var>B</var> is not a <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-3>top-level browsing context</a>,
   but there exists an <a href=#ancestor-browsing-context id=security-nav:ancestor-browsing-context>ancestor browsing context</a> of <var>B</var> whose
   <a href=#active-document id=security-nav:active-document-3>active document</a> has the <a href=origin.html#same-origin id=security-nav:same-origin-2>same</a> <a id=security-nav:concept-origin-3 href=origin.html#concept-origin>origin</a> as
   the <a href=#active-document id=security-nav:active-document-4>active document</a> of <var>A</var> (possibly in fact being <var>A</var> itself).</li></ul>

  <hr>

  <p>A <a href=#browsing-context id=security-nav:browsing-context-3>browsing context</a> <var>A</var> is <dfn id=allowed-to-navigate>allowed to navigate</dfn> a
  second <a href=#browsing-context id=security-nav:browsing-context-4>browsing context</a> <var>B</var> if the following algorithm returns true:</p>

  <ol><li><p>If <var>A</var> is not the same <a href=#browsing-context id=security-nav:browsing-context-5>browsing context</a> as <var>B</var>, and
   <var>A</var> is not one of the <a href=#ancestor-browsing-context id=security-nav:ancestor-browsing-context-2>ancestor browsing
   contexts</a> of <var>B</var>, and <var>B</var> is not a <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-4>top-level browsing
   context</a>, and <var>A</var>'s <a href=#active-document id=security-nav:active-document-5>active document</a>'s <a id=security-nav:active-sandboxing-flag-set href=origin.html#active-sandboxing-flag-set>active sandboxing flag
   set</a> has its <a id=security-nav:sandboxed-navigation-browsing-context-flag href=origin.html#sandboxed-navigation-browsing-context-flag>sandboxed navigation browsing context flag</a> set, then return
   false.</li><li>
    <p>Otherwise, if <var>B</var> is a <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-5>top-level browsing context</a>, and is one of the
    <a href=#ancestor-browsing-context id=security-nav:ancestor-browsing-context-3>ancestor browsing contexts</a> of <var>A</var>,
    then:</p>

    <ol><li><p>If this algorithm is <a id=security-nav:triggered-by-user-activation href=interaction.html#triggered-by-user-activation>triggered by user activation</a> and <var>A</var>'s
     <a href=#active-document id=security-nav:active-document-6>active document</a>'s <a id=security-nav:active-sandboxing-flag-set-2 href=origin.html#active-sandboxing-flag-set>active sandboxing flag set</a> has its <a id=security-nav:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag href=origin.html#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag>sandboxed
     top-level navigation with user activation browsing context flag</a> set, then return
     false.</li><li><p>Otherwise, if this algorithm is not <a id=security-nav:triggered-by-user-activation-2 href=interaction.html#triggered-by-user-activation>triggered by user activation</a> and
     <var>A</var>'s <a href=#active-document id=security-nav:active-document-7>active document</a>'s <a id=security-nav:active-sandboxing-flag-set-3 href=origin.html#active-sandboxing-flag-set>active sandboxing flag set</a> has its
     <a id=security-nav:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag href=origin.html#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag>sandboxed top-level navigation without user activation browsing context flag</a> set,
     then return false.</li></ol>
   </li><li><p>Otherwise, if <var>B</var> is a <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-6>top-level browsing context</a>, and is
   neither <var>A</var> nor one of the <a href=#ancestor-browsing-context id=security-nav:ancestor-browsing-context-4>ancestor
   browsing contexts</a> of <var>A</var>, and <var>A</var>'s
   <code id=security-nav:document><a href=dom.html#document>Document</a></code>'s <a id=security-nav:active-sandboxing-flag-set-4 href=origin.html#active-sandboxing-flag-set>active sandboxing flag set</a> has its <a id=security-nav:sandboxed-navigation-browsing-context-flag-2 href=origin.html#sandboxed-navigation-browsing-context-flag>sandboxed
   navigation browsing context flag</a> set, and <var>A</var> is not the <a id=security-nav:one-permitted-sandboxed-navigator href=origin.html#one-permitted-sandboxed-navigator>one
   permitted sandboxed navigator</a> of <var>B</var>, then return false.</li><li><p>Return true.</li></ol>

  <hr>

  <p>An element has a <dfn id=browsing-context-scope-origin>browsing context scope origin</dfn> if its <code id=security-nav:document-2><a href=dom.html#document>Document</a></code>'s
  <a href=#concept-document-bc id=security-nav:concept-document-bc>browsing context</a> is a <a href=#top-level-browsing-context id=security-nav:top-level-browsing-context-7>top-level browsing
  context</a> or if all of its <code id=security-nav:document-3><a href=dom.html#document>Document</a></code>'s <a href=#ancestor-browsing-context id=security-nav:ancestor-browsing-context-5>ancestor browsing contexts</a> all have <a href=#active-document id=security-nav:active-document-8>active
  documents</a> whose <a id=security-nav:concept-origin-4 href=origin.html#concept-origin>origin</a> are the <a id=security-nav:same-origin-3 href=origin.html#same-origin>same origin</a> as the element's
  <a id=security-nav:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <a id=security-nav:concept-origin-5 href=origin.html#concept-origin>origin</a>. If an element has a <a href=#browsing-context-scope-origin id=security-nav:browsing-context-scope-origin>browsing context scope
  origin</a>, then its value is the <a id=security-nav:concept-origin-6 href=origin.html#concept-origin>origin</a> of the element's <a id=security-nav:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node
  document</a>.</p>

  


  

  <h4 id=groupings-of-browsing-contexts><span class=secno>7.1.4</span> Groupings of browsing contexts<a href=#groupings-of-browsing-contexts class=self-link></a></h4>

  <p>A user agent holds a <dfn id=browsing-context-group-set>browsing context group set</dfn> (a <a id=groupings-of-browsing-contexts:set href=https://triple-underscore.github.io/infra-ja.html#ordered-set data-x-internal=set>set</a> of <a href=#browsing-context-group id=groupings-of-browsing-contexts:browsing-context-group>browsing context groups</a>).</p>

  <p>A <dfn id=browsing-context-group>browsing context group</dfn> holds a <dfn id=browsing-context-set>browsing context set</dfn> (a <a id=groupings-of-browsing-contexts:set-2 href=https://triple-underscore.github.io/infra-ja.html#ordered-set data-x-internal=set>set</a>
  of <a href=#top-level-browsing-context id=groupings-of-browsing-contexts:top-level-browsing-context>top-level browsing contexts</a>).</p>

  <p>To <dfn id=creating-a-new-browsing-context-group>create a new browsing context
  group</dfn>, run these steps:</p>

  <ol><li><p>Let <var>group</var> be a new <a href=#browsing-context-group id=groupings-of-browsing-contexts:browsing-context-group-2>browsing context group</a>.</li><li><p><a href=https://triple-underscore.github.io/infra-ja.html#set-append id=groupings-of-browsing-contexts:set-append data-x-internal=set-append>Append</a> <var>group</var> to the user agent's
   <a href=#browsing-context-group-set id=groupings-of-browsing-contexts:browsing-context-group-set>browsing context group set</a>.</li><li><p><a href=#bcg-append id=groupings-of-browsing-contexts:bcg-append>Append</a> the result of <a href=#creating-a-new-browsing-context id=groupings-of-browsing-contexts:creating-a-new-browsing-context>creating a new browsing
   context</a> with null to <var>group</var>.</li><li><p>Return <var>group</var>.</li></ol>

  <p>To <dfn id=bcg-append>append</dfn> a <a href=#top-level-browsing-context id=groupings-of-browsing-contexts:top-level-browsing-context-2>top-level browsing context</a>
  <var>browsingContext</var> to a <a href=#browsing-context-group id=groupings-of-browsing-contexts:browsing-context-group-3>browsing context group</a> <var>group</var>, run these
  steps:</p>

  <ol><li><p><a href=https://triple-underscore.github.io/infra-ja.html#set-append id=groupings-of-browsing-contexts:set-append-2 data-x-internal=set-append>Append</a> <var>browsingContext</var> to <var>group</var>'s
   <a href=#browsing-context-set id=groupings-of-browsing-contexts:browsing-context-set>browsing context set</a>.</li><li><p>Set <var>browsingContext</var>'s <a href=#tlbc-group id=groupings-of-browsing-contexts:tlbc-group>group</a> to
   <var>group</var>.</li></ol>

  <p>To <dfn id=bcg-remove>remove</dfn> a <a href=#top-level-browsing-context id=groupings-of-browsing-contexts:top-level-browsing-context-3>top-level browsing context</a>
  <var>browsingContext</var>, run these steps:</p>

  <ol><li><p>Assert: <var>browsingContext</var>'s <a href=#tlbc-group id=groupings-of-browsing-contexts:tlbc-group-2>group</a> is non-null,
   because a <a href=#browsing-context id=groupings-of-browsing-contexts:browsing-context>browsing context</a> only gets <a href=window-object.html#a-browsing-context-is-discarded id=groupings-of-browsing-contexts:a-browsing-context-is-discarded>discarded</a> once.</li><li><p>Let <var>group</var> be <var>browsingContext</var>'s <a href=#tlbc-group id=groupings-of-browsing-contexts:tlbc-group-3>group</a>.</li><li><p>Set <var>browsingContext</var>'s <a href=#tlbc-group id=groupings-of-browsing-contexts:tlbc-group-4>group</a> to null.</li><li><p><a href=https://triple-underscore.github.io/infra-ja.html#list-remove id=groupings-of-browsing-contexts:list-remove data-x-internal=list-remove>Remove</a> <var>browsingContext</var> from
   <var>group</var>'s <a href=#browsing-context-set id=groupings-of-browsing-contexts:browsing-context-set-2>browsing context set</a>.</li><li><p>If <var>group</var>'s <a href=#browsing-context-set id=groupings-of-browsing-contexts:browsing-context-set-3>browsing context set</a> <a href=https://triple-underscore.github.io/infra-ja.html#list-empty id=groupings-of-browsing-contexts:list-is-empty data-x-internal=list-is-empty>is
   empty</a>, then <a href=https://triple-underscore.github.io/infra-ja.html#list-remove id=groupings-of-browsing-contexts:list-remove-2 data-x-internal=list-remove>remove</a> <var>group</var> from the user
   agent's <a href=#browsing-context-group-set id=groupings-of-browsing-contexts:browsing-context-group-set-2>browsing context group set</a>.</li></ol>

  <p class=note><a href=#bcg-append id=groupings-of-browsing-contexts:bcg-append-2>Append</a> and <a href=#bcg-remove id=groupings-of-browsing-contexts:bcg-remove>remove</a> are primitive operations that help define the lifetime of a <a href=#browsing-context-group id=groupings-of-browsing-contexts:browsing-context-group-4>browsing
  context group</a>. They are called from <a href=#creating-a-new-browsing-context-group id=groupings-of-browsing-contexts:creating-a-new-browsing-context-group>creating a new browsing context group</a>,
  <a href=#creating-a-new-auxiliary-browsing-context id=groupings-of-browsing-contexts:creating-a-new-auxiliary-browsing-context>creating a new auxiliary browsing context</a>, and <a href=window-object.html#a-browsing-context-is-discarded id=groupings-of-browsing-contexts:a-browsing-context-is-discarded-2>discarding a browsing context</a>.</p>

  <hr>

  <p class=note>The HTML Standard used to define "<span id=unit-of-related-browsing-contexts>unit of related browsing contexts</span>" and "<span id=unit-of-related-similar-origin-browsing-contexts>unit of related similar-origin browsing
  contexts</span>". These have been removed as they were not adequate.</p>

  



  <h4 id=browsing-context-names><span class=secno>7.1.5</span> ブラウジングコンテキスト名<a href=#browsing-context-names class=self-link></a></h4>

  <p>ブラウジングコンテキストは、<dfn id=browsing-context-name>ブラウジングコンテキスト名</dfn>を持つことができる。特に明記しない限り、それは空文字列である。</p>

  <p><dfn id=valid-browsing-context-name>妥当なブラウジングコンテキスト名</dfn>は、U+005F LOW LINE文字で始まらない少なくとも1文字をもつ任意の文字列である。（アンダースコアで始まる名前は、特別なキーワードのために予約されている。）</p>

  <p><dfn id=valid-browsing-context-name-or-keyword>妥当なブラウジングコンテキスト名またはキーワード</dfn>は、<a href=#valid-browsing-context-name id=browsing-context-names:valid-browsing-context-name>妥当なブラウジングコンテキスト名</a>または<a id=browsing-context-names:ascii-case-insensitive href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII大文字・小文字不区別</a>で<code>_blank</code>、<code>_self</code>、<code>_parent</code>、または<code>_top</code>の1つにマッチするいずれかとなる任意の文字列である。</p>

  <p>これらの値は、以下の（非規範的な）テーブルで要約されるように、ページがサンドボックス化されるかどうかに基づいて異なる意味を持つ。この表において、"current"はリンクまたはスクリプト内にある<a href=#browsing-context id=browsing-context-names:browsing-context>ブラウジングコンテキスト</a>を意味し、"parent"はリンクまたはスクリプト内にあるいずれかの<a href=#parent-browsing-context id=browsing-context-names:parent-browsing-context>親ブラウジングコンテキスト</a>を意味し、"top"はリンクまたはスクリプトがあるいずれかの<a href=#top-level-browsing-context id=browsing-context-names:top-level-browsing-context>トップレベルブラウジングコンテキスト</a>を意味し、"new"はさまざまなユーザー設定とユーザーエージェントのポリシーに次第で、新しい<a href=#top-level-browsing-context id=browsing-context-names:top-level-browsing-context-2>トップレベルブラウジングコンテキスト</a>または<a href=#auxiliary-browsing-context id=browsing-context-names:auxiliary-browsing-context>補助ブラウジングコンテキスト</a>が作成されることを意味し、"none"は何も起こらないことを意味し、"maybe new"は"<code id=browsing-context-names:attr-iframe-sandbox-allow-popups><a href=origin.html#attr-iframe-sandbox-allow-popups>allow-popups</a></code>"キーワードはまた<code id=browsing-context-names:attr-iframe-sandbox><a href=iframe-embed-object.html#attr-iframe-sandbox>sandbox</a></code>属性で指定される場合（またはユーザーがサンドボックスを覆う場合）、"new"と同じであり、そうでなければ"none"と同じである。</p>

  <table><thead><tr><th rowspan=2>キーワード
     </th><th rowspan=2>普通の効果
     </th><th colspan=2><code id=browsing-context-names:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>での効果
    </th></tr><tr><th><code>sandbox=""</code>
     </th><th><code>sandbox="allow-top-navigation"</code>

   <tbody></th></tr><tr><td>リンクおよびフォーム送信に対して、何も指定しない 
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td>空文字列
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td><code>_blank</code>
     </td><td>new
     
     </td><td>maybe new
     
     </td><td>maybe new

    

    </td></tr><tr><td><code>_self</code>
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td>親が存在しない場合の<code>_parent</code>
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td>親がまたトップである場合の<code>_parent</code>
     </td><td>parent/top
     
     </td><td>none
     
     </td><td>parent/top

    

    </td></tr><tr><td>存在するがトップでない場合の<code>_parent</code>
     </td><td>parent
     
     </td><td>none
     
     </td><td>none

    

    </td></tr><tr><td>トップが現在である場合の<code>_top</code>
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td>トップが現在でない場合の<code>_top</code>
     </td><td>top
     
     </td><td>none
     
     </td><td>top

    

    </td></tr><tr><td>名前が存在しない
     </td><td>new
     
     </td><td>maybe new
     
     </td><td>maybe new

    

    </td></tr><tr><td>名前が存在しかつ子孫である
     </td><td>specified descendant
     
     </td><td>specified descendant
     
     </td><td>specified descendant

    

    </td></tr><tr><td>名前が存在し現在である
     </td><td>current
     
     </td><td>current
     
     </td><td>current

    

    </td></tr><tr><td>名前が存在しかつトップとなる祖先である
     </td><td>specified ancestor
     
     </td><td>none
     
     </td><td>specified ancestor/top

    

    </td></tr><tr><td>名前が存在しかつトップでない祖先である
     </td><td>specified ancestor
     
     </td><td>none
     
     </td><td>none

    

    </td></tr><tr><td>他の名前が共通のトップとともに存在する
     </td><td>specified
     
     </td><td>none
     
     </td><td>none

    

    </td></tr><tr><td><a href=#familiar-with id=browsing-context-names:familiar-with>familiar</a>かつ<a id=browsing-context-names:one-permitted-sandboxed-navigator href=origin.html#one-permitted-sandboxed-navigator>ある許可されたサンドボックス化されたナビゲーター</a>である場合、異なるトップをもつ名前が存在する
     </td><td>specified
     
     </td><td>specified
     
     </td><td>specified

    

    </td></tr><tr><td><a href=#familiar-with id=browsing-context-names:familiar-with-2>familiar</a>だが<a id=browsing-context-names:one-permitted-sandboxed-navigator-2 href=origin.html#one-permitted-sandboxed-navigator>ある許可されたサンドボックス化されたナビゲーター</a>でない場合、異なるトップをもつ名前が存在する
     </td><td>specified
     
     </td><td>none
     
     </td><td>none

    

    </td></tr><tr><td><a href=#familiar-with id=browsing-context-names:familiar-with-3>familiar</a>でない、異なるトップをもつ名前が存在する
     </td><td>new
     
     </td><td>maybe new
     
     </td><td>maybe new

  

  </td></tr></table>

  <p class=tablenote><small>サンドボックス化されたブラウジングコンテキストの制限のほとんどは、他のアルゴリズムにより適用される。たとえば、下記で与えられる<a href=#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name id=browsing-context-names:the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name>ブラウジングコンテキスト名で与えられたをブラウジングコンテキストを選択するための規則</a>でなく、<a href=browsing-the-web.html#navigate id=browsing-context-names:navigate>ナビゲーション</a>アルゴリズムとして。</small></p>

  

  <hr>

  <p><dfn id=the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name>The rules for
  choosing a browsing context</dfn>, given a <a href=#browsing-context-name id=browsing-context-names:browsing-context-name>browsing context name</a> <var>name</var>, a
  <a href=#browsing-context id=browsing-context-names:browsing-context-2>browsing context</a> <var>current</var>, and a boolean <var>noopener</var> are as
  follows:</p>

  <ol><li><p>Let <var>chosen</var> be null.</li><li><p>Let <var>new</var> be false.</li><li><p>Let <var>sandboxingFlagSet</var> be <var>current</var>'s <a href=#active-document id=browsing-context-names:active-document>active document</a>'s
   <a id=browsing-context-names:active-sandboxing-flag-set href=origin.html#active-sandboxing-flag-set>active sandboxing flag set</a>.</li><li><p>If <var>name</var> is the empty string or an <a id=browsing-context-names:ascii-case-insensitive-2 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for
   "<code>_self</code>", then set <var>chosen</var> to <var>current</var>.</li><li><p>Otherwise, if <var>name</var> is an <a id=browsing-context-names:ascii-case-insensitive-3 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for "<code>_parent</code>", set <var>chosen</var> to <var>current</var>'s <a href=#parent-browsing-context id=browsing-context-names:parent-browsing-context-2>parent browsing
   context</a>, if any, and <var>current</var> otherwise.</li><li><p>Otherwise, if <var>name</var> is an <a id=browsing-context-names:ascii-case-insensitive-4 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for "<code>_top</code>", set <var>chosen</var> to <var>current</var>'s <a href=#top-level-browsing-context id=browsing-context-names:top-level-browsing-context-3>top-level browsing
   context</a>, if any, and <var>current</var> otherwise.</li><li>
    <p>Otherwise, if <var>name</var> is not an <a id=browsing-context-names:ascii-case-insensitive-5 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for "<code>_blank</code>", there exists a browsing context whose <a href=#browsing-context-name id=browsing-context-names:browsing-context-name-2>name</a> is the same as <var>name</var>, <var>current</var> is <a href=#familiar-with id=browsing-context-names:familiar-with-4>familiar
    with</a> that browsing context, and the user agent determines that the two browsing contexts
    are related enough that it is ok if they reach each other, set <var>chosen</var> to that
    browsing context. If there are multiple matching browsing contexts, the user agent should set
    <var>chosen</var> to one in some arbitrary consistent manner, such as the most recently opened,
    most recently focused, or more closely related.</p>

    <p class=XXX>This will be made more precise in <a href=https://github.com/whatwg/html/issues/313>issue #313</a>.</p>
   </li><li>
    <p>Otherwise, a new browsing context is being requested, and what happens depends on the user
    agent's configuration and abilities — it is determined by the rules given for the first
    applicable option from the following list:</p>

    <dl class=switch><dt id=popup-blocker>If the algorithm is not <a id=browsing-context-names:triggered-by-user-activation href=interaction.html#triggered-by-user-activation>triggered by user activation</a> and
     the user agent has been configured to not show popups (i.e. the user agent has a "popup
     blocker" enabled)<dd><p>The user agent may inform the user that a popup has been blocked.<dt id=sandboxWindowOpen>If <var>sandboxingFlagSet</var> has the <a id=browsing-context-names:sandboxed-auxiliary-navigation-browsing-context-flag href=origin.html#sandboxed-auxiliary-navigation-browsing-context-flag>sandboxed auxiliary
     navigation browsing context flag</a> set<dd>
      <p>The user agent may offer the user one of:

      

      <ol><li><p>Set <var>chosen</var> to the result of <a href=#creating-a-new-top-level-browsing-context id=browsing-context-names:creating-a-new-top-level-browsing-context>creating a new top-level browsing
       context</a> and set <var>new</var> to true.</li><li><p>Set <var>chosen</var> to an existing <a href=#top-level-browsing-context id=browsing-context-names:top-level-browsing-context-4>top-level browsing context</a>.</p>
      </li></ol>

      <p class=warning>If this case occurs, it means that an author has explicitly sandboxed the
      document that is trying to open a link.</p>

      <p class=note>If the user declines or the user agent doesn't offer the above, the variables
      remain unchanged.</p>
     <dt>If the user agent has been configured such that in this instance it will create a new
     browsing context<dd>
      <ol><li><p>Set <var>new</var> to true.</li><li id=noopener><p>If <var>noopener</var> is true, then set <var>chosen</var> to the result
       of <a href=#creating-a-new-top-level-browsing-context id=browsing-context-names:creating-a-new-top-level-browsing-context-2>creating a new top-level browsing context</a>.</li><li>
        <p>Otherwise:</p>

        <ol><li><p>Set <var>chosen</var> to the result of <a href=#creating-a-new-auxiliary-browsing-context id=browsing-context-names:creating-a-new-auxiliary-browsing-context>creating a new auxiliary browsing
         context</a> with <var>current</var>.</li><li><p>If <var>sandboxingFlagSet</var>'s <a id=browsing-context-names:sandboxed-navigation-browsing-context-flag href=origin.html#sandboxed-navigation-browsing-context-flag>sandboxed navigation browsing context
         flag</a> is set, then <var>current</var> must be set as <var>chosen</var>'s <a id=browsing-context-names:one-permitted-sandboxed-navigator-3 href=origin.html#one-permitted-sandboxed-navigator>one
         permitted sandboxed navigator</a>.</li></ol>
       </li><li><p>If <var>sandboxingFlagSet</var>'s <a id=browsing-context-names:sandbox-propagates-to-auxiliary-browsing-contexts-flag href=origin.html#sandbox-propagates-to-auxiliary-browsing-contexts-flag>sandbox propagates to auxiliary browsing
       contexts flag</a> is set, then all the flags that are set in <var>sandboxingFlagSet</var>
       must be set in <var>chosen</var>'s <a id=browsing-context-names:popup-sandboxing-flag-set href=origin.html#popup-sandboxing-flag-set>popup sandboxing flag set</a>.</li><li><p>If <var>name</var> is not an <a id=browsing-context-names:ascii-case-insensitive-6 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for "<code>_blank</code>", then set <var>chosen</var>'s <a href=#browsing-context-name id=browsing-context-names:browsing-context-name-3>name</a> to <var>name</var>.</li></ol>

      <p class=note>If the newly created <a href=#browsing-context id=browsing-context-names:browsing-context-3>browsing context</a> is immediately <a href=browsing-the-web.html#navigate id=browsing-context-names:navigate-2>navigated</a>, then the navigation will be done with <a id=browsing-context-names:replacement-enabled href=browsing-the-web.html#replacement-enabled>replacement
      enabled</a>.</p>
     <dt>If the user agent has been configured such that in this instance it will reuse
     <var>current</var><dd><p>Set <var>chosen</var> to <var>current</var>.<dt>If the user agent has been configured such that in this instance it will not find a
     browsing context<dd><p>Do nothing.</dl>

    <p class=note>User agents are encouraged to provide a way for users to configure the user
    agent to always reuse <var>current</var>.</p>
   </li><li><p>Return <var>chosen</var> and <var>new</var>.</li></ol>


  <h3 id=cross-origin-objects><span class=secno>7.2</span> Security infrastructure for <code id=cross-origin-objects:window><a href=window-object.html#window>Window</a></code>,
  <code id=cross-origin-objects:windowproxy><a href=window-object.html#windowproxy>WindowProxy</a></code>, and <code id=cross-origin-objects:location><a href=history.html#location>Location</a></code> objects<a href=#cross-origin-objects class=self-link></a></h3>

  <p>Although typically objects cannot be accessed across <a href=origin.html#concept-origin id=cross-origin-objects:concept-origin>origins</a>, the
  web platform would not be true to itself if it did not have some legacy exceptions to that rule
  that the web depends upon.


  


  <h4 id=integration-with-idl><span class=secno>7.2.1</span> Integration with IDL<a href=#integration-with-idl class=self-link></a></h4>

  <p>When <a id=integration-with-idl:perform-a-security-check href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-perform-a-security-check data-x-internal=perform-a-security-check>perform a security check</a> is invoked, with a <var>platformObject</var>,
  <var>identifier</var>, and <var>type</var>, run these steps:</p>

  <ol><li>
    <p>If <var>platformObject</var> is a <code id=integration-with-idl:window><a href=window-object.html#window>Window</a></code> or <code id=integration-with-idl:location><a href=history.html#location>Location</a></code> object,
    then:</p>

    <ol><li>
      <p>Repeat for each <var>e</var> that is an element of !
      <a href=#crossoriginproperties-(-o-) id=integration-with-idl:crossoriginproperties-(-o-)>CrossOriginProperties</a>(<var>platformObject</var>):</p>

      <ol><li>
        <p>If <a id=integration-with-idl:samevalue href=https://tc39.github.io/ecma262/#sec-samevalue data-x-internal=samevalue>SameValue</a>(<var>e</var>.[[Property]], <var>identifier</var>) is true,
        then:</p>

        <ol><li><p>If <var>type</var> is "<code>method</code>" and <var>e</var> has neither
         [[NeedsGet]] nor [[NeedsSet]], then return.</li><li><p>Otherwise, if <var>type</var> is "<code>getter</code>" and
         <var>e</var>.[[NeedsGet]] is true, then return.</li><li><p>Otherwise, if <var>type</var> is "<code>setter</code>" and
         <var>e</var>.[[NeedsSet]] is true, then return.</li></ol>
       </li></ol>
     </li></ol>
   </li><li><p>If ! <a href=#isplatformobjectsameorigin-(-o-) id=integration-with-idl:isplatformobjectsameorigin-(-o-)>IsPlatformObjectSameOrigin</a>(<var>platformObject</var>) is false, then
   throw a <a id=integration-with-idl:securityerror href=https://triple-underscore.github.io/WebIDL-ja.html#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=integration-with-idl:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>


  <h4 id=shared-internal-slot:-crossoriginpropertydescriptormap><span class=secno>7.2.2</span> Shared internal slot: [[CrossOriginPropertyDescriptorMap]]<a href=#shared-internal-slot:-crossoriginpropertydescriptormap class=self-link></a></h4>

  <p><code id=shared-internal-slot:-crossoriginpropertydescriptormap:window><a href=window-object.html#window>Window</a></code> and <code id=shared-internal-slot:-crossoriginpropertydescriptormap:location><a href=history.html#location>Location</a></code> objects both have a
  <dfn id=crossoriginpropertydescriptormap>[[CrossOriginPropertyDescriptorMap]]</dfn> internal slot, whose value is initially an empty
  map.

  

  <p class=note>The <a href=#crossoriginpropertydescriptormap id=shared-internal-slot:-crossoriginpropertydescriptormap:crossoriginpropertydescriptormap>[[CrossOriginPropertyDescriptorMap]]</a> internal slot contains a map
  with entries whose keys are (<var>currentGlobal</var>, <var>objectGlobal</var>,
  <var>propertyKey</var>)-tuples and values are property descriptors, as a memoization of what is
  visible to scripts when <var>currentGlobal</var> inspects a <code id=shared-internal-slot:-crossoriginpropertydescriptormap:window-2><a href=window-object.html#window>Window</a></code> or
  <code id=shared-internal-slot:-crossoriginpropertydescriptormap:location-2><a href=history.html#location>Location</a></code> object from <var>objectGlobal</var>. It is filled lazily by
  <a href=#crossorigingetownpropertyhelper-(-o,-p-) id=shared-internal-slot:-crossoriginpropertydescriptormap:crossorigingetownpropertyhelper-(-o,-p-)>CrossOriginGetOwnPropertyHelper</a>, which consults it on future lookups.</p>

  <p>User agents should allow a value held in the map to be garbage collected along with its
  corresponding key when nothing holds a reference to any part of the value. That is, as long as
  garbage collection is not observable.</p>

  <p class=example>For example, with <code>const href =
  Object.getOwnPropertyDescriptor(crossOriginLocation, "href").set</code> the value and its
  corresponding key in the map cannot be garbage collected as that would be observable.</p>

  <p>User agents may have an optimization whereby they remove key-value pairs from the map when
  <code id=shared-internal-slot:-crossoriginpropertydescriptormap:dom-document-domain><a href=origin.html#dom-document-domain>document.domain</a></code> is set. This is not observable as <code id=shared-internal-slot:-crossoriginpropertydescriptormap:dom-document-domain-2><a href=origin.html#dom-document-domain>document.domain</a></code> cannot revisit an earlier value.</p>

  <p class=example>For example, setting <code id=shared-internal-slot:-crossoriginpropertydescriptormap:dom-document-domain-3><a href=origin.html#dom-document-domain>document.domain</a></code>
  to "<code>example.com</code>" on www.example.com means user agents can remove all
  key-value pairs from the map where part of the key is www.example.com, as that can never be part
  of the <a id=shared-internal-slot:-crossoriginpropertydescriptormap:concept-origin href=origin.html#concept-origin>origin</a> again and therefore the corresponding value could never be retrieved
  from the map.</p>


  <h4 id=shared-abstract-operations><span class=secno>7.2.3</span> Shared abstract operations<a href=#shared-abstract-operations class=self-link></a></h4>

  <h5 id=crossoriginproperties-(-o-)><span class=secno>7.2.3.1</span> <dfn>CrossOriginProperties</dfn> ( <var>O</var> )<a href=#crossoriginproperties-(-o-) class=self-link></a></h5>

  <ol><li><p>Assert: <var>O</var> is a <code id=crossoriginproperties-(-o-):location><a href=history.html#location>Location</a></code> or <code id=crossoriginproperties-(-o-):window><a href=window-object.html#window>Window</a></code> object.</li><li><p>If <var>O</var> is a <code id=crossoriginproperties-(-o-):location-2><a href=history.html#location>Location</a></code> object, then return «
   { [[Property]]: "<code>href</code>", [[NeedsGet]]: false, [[NeedsSet]]: true },
   { [[Property]]: "<code>replace</code>" } ».</li><li><p>Let <var>crossOriginWindowProperties</var> be «
   { [[Property]]: "<code>window</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>self</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>location</code>", [[NeedsGet]]: true, [[NeedsSet]]: true },
   { [[Property]]: "<code>close</code>" },
   { [[Property]]: "<code>closed</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>focus</code>" },
   { [[Property]]: "<code>blur</code>" },
   { [[Property]]: "<code>frames</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>length</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>top</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>opener</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>parent</code>", [[NeedsGet]]: true, [[NeedsSet]]: false },
   { [[Property]]: "<code>postMessage</code>" } ».</li><li>
    <p>Repeat for each <var>e</var> that is an element of <var>O</var>'s <a id=crossoriginproperties-(-o-):document-tree-child-browsing-context-name-property-set href=window-object.html#document-tree-child-browsing-context-name-property-set>document-tree child
    browsing context name property set</a>:</p>

    <ol><li><p>Add { [[Property]]: <var>e</var>, [[HideFromKeys]]: true } as the last element of
     <var>crossOriginWindowProperties</var>.</li></ol>
   </li><li><p>Return <var>crossOriginWindowProperties</var>.</li></ol>

  <p class=note>Indexed properties do not need to be safelisted as they are handled directly by
  the <code id=crossoriginproperties-(-o-):windowproxy><a href=window-object.html#windowproxy>WindowProxy</a></code> object.</p>

  <h5 id=crossoriginpropertyfallback-(-p-)><span class=secno>7.2.3.2</span> <dfn>CrossOriginPropertyFallback</dfn> ( <var>P</var> )<a href=#crossoriginpropertyfallback-(-p-) class=self-link></a></h5>

  <ol><li><p>If <var>P</var> is "<code>then</code>", <a id=crossoriginpropertyfallback-(-p-):@@tostringtag href=infrastructure.html#@@tostringtag>@@toStringTag</a>,
   <a id=crossoriginpropertyfallback-(-p-):@@hasinstance href=infrastructure.html#@@hasinstance>@@hasInstance</a>, or <a id=crossoriginpropertyfallback-(-p-):@@isconcatspreadable href=infrastructure.html#@@isconcatspreadable>@@isConcatSpreadable</a>, then return
   <a id=crossoriginpropertyfallback-(-p-):propertydescriptor href=https://tc39.github.io/ecma262/#sec-property-descriptor-specification-type data-x-internal=propertydescriptor>PropertyDescriptor</a>{
   [[Value]]: undefined,
   [[Writable]]: false,
   [[Enumerable]]: false,
   [[Configurable]]: true }.</li><li><p>Throw a <a id=crossoriginpropertyfallback-(-p-):securityerror href=https://triple-underscore.github.io/WebIDL-ja.html#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=crossoriginpropertyfallback-(-p-):domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>

  <h5 id=isplatformobjectsameorigin-(-o-)><span class=secno>7.2.3.3</span> <dfn>IsPlatformObjectSameOrigin</dfn> ( <var>O</var> )<a href=#isplatformobjectsameorigin-(-o-) class=self-link></a></h5>

  <ol><li><p>Return true if the <a id=isplatformobjectsameorigin-(-o-):current-settings-object href=webappapis.html#current-settings-object>current settings object</a>'s <a href=webappapis.html#concept-settings-object-origin id=isplatformobjectsameorigin-(-o-):concept-settings-object-origin>origin</a> is <a id=isplatformobjectsameorigin-(-o-):same-origin-domain href=origin.html#same-origin-domain>same origin-domain</a> with
   <var>O</var>'s <a id=isplatformobjectsameorigin-(-o-):relevant-settings-object href=webappapis.html#relevant-settings-object>relevant settings object</a>'s <a href=webappapis.html#concept-settings-object-origin id=isplatformobjectsameorigin-(-o-):concept-settings-object-origin-2>origin</a>, and false otherwise.</li></ol>

  <h5 id=crossorigingetownpropertyhelper-(-o,-p-)><span class=secno>7.2.3.4</span> <dfn>CrossOriginGetOwnPropertyHelper</dfn> ( <var>O</var>, <var>P</var> )<a href=#crossorigingetownpropertyhelper-(-o,-p-) class=self-link></a></h5>

  <p class=note>If this abstract operation returns undefined and there is no custom behavior, the
  caller needs to throw a <a id=crossorigingetownpropertyhelper-(-o,-p-):securityerror href=https://triple-underscore.github.io/WebIDL-ja.html#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=crossorigingetownpropertyhelper-(-o,-p-):domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>. In
  practice this is handled by the caller calling <a href=#crossoriginpropertyfallback-(-p-) id=crossorigingetownpropertyhelper-(-o,-p-):crossoriginpropertyfallback-(-p-)>CrossOriginPropertyFallback</a>.</p>

  <ol><li><p>Let <var>crossOriginKey</var> be a tuple consisting of the <a id=crossorigingetownpropertyhelper-(-o,-p-):current-settings-object href=webappapis.html#current-settings-object>current settings
   object</a>, <var>O</var>'s <a id=crossorigingetownpropertyhelper-(-o,-p-):relevant-settings-object href=webappapis.html#relevant-settings-object>relevant settings object</a>, and <var>P</var>.</li><li>
    <p>Repeat for each <var>e</var> that is an element of !
    <a href=#crossoriginproperties-(-o-) id=crossorigingetownpropertyhelper-(-o,-p-):crossoriginproperties-(-o-)>CrossOriginProperties</a>(<var>O</var>):</p>

    <ol><li>
      <p>If <a id=crossorigingetownpropertyhelper-(-o,-p-):samevalue href=https://tc39.github.io/ecma262/#sec-samevalue data-x-internal=samevalue>SameValue</a>(<var>e</var>.[[Property]], <var>P</var>) is true, then:</p>

      <ol><li><p>If the value of the <a href=#crossoriginpropertydescriptormap id=crossorigingetownpropertyhelper-(-o,-p-):crossoriginpropertydescriptormap>[[CrossOriginPropertyDescriptorMap]]</a> internal slot of
       <var>O</var> contains an entry whose key is <var>crossOriginKey</var>, then return that
       entry's value.</li><li><p>Let <var>originalDesc</var> be <a id=crossorigingetownpropertyhelper-(-o,-p-):ordinarygetownproperty href=https://tc39.github.io/ecma262/#sec-ordinarygetownproperty data-x-internal=ordinarygetownproperty>OrdinaryGetOwnProperty</a>(<var>O</var>,
       <var>P</var>).</li><li><p>Let <var>crossOriginDesc</var> be undefined.</li><li>
        <p>If <var>e</var>.[[NeedsGet]] and <var>e</var>.[[NeedsSet]] are absent, then:</p>

        <ol><li><p>Let <var>value</var> be <var>originalDesc</var>.[[Value]].</li><li><p>If ! <a id=crossorigingetownpropertyhelper-(-o,-p-):iscallable href=https://tc39.github.io/ecma262/#sec-iscallable data-x-internal=iscallable>IsCallable</a>(<var>value</var>) is true, then set <var>value</var> to
         an anonymous built-in function, created in the <a id=crossorigingetownpropertyhelper-(-o,-p-):current-realm-record href=https://tc39.github.io/ecma262/#current-realm data-x-internal=current-realm-record>current Realm Record</a>, that
         performs the same steps as the IDL operation <var>P</var> on object <var>O</var>.</li><li><p>Set <var>crossOriginDesc</var> to <a id=crossorigingetownpropertyhelper-(-o,-p-):propertydescriptor href=https://tc39.github.io/ecma262/#sec-property-descriptor-specification-type data-x-internal=propertydescriptor>PropertyDescriptor</a>{
         [[Value]]: <var>value</var>,
         [[Enumerable]]: false,
         [[Writable]]: false,
         [[Configurable]]: true }.</li></ol>
       </li><li>
        <p>Otherwise:</p>

        <ol><li><p>Let <var>crossOriginGet</var> be undefined.</li><li><p>If <var>e</var>.[[NeedsGet]] is true, then set <var>crossOriginGet</var> to an
         anonymous built-in function, created in the <a id=crossorigingetownpropertyhelper-(-o,-p-):current-realm-record-2 href=https://tc39.github.io/ecma262/#current-realm data-x-internal=current-realm-record>current Realm Record</a>, that
         performs the same steps as the getter of the IDL attribute <var>P</var> on object
         <var>O</var>.</li><li><p>Let <var>crossOriginSet</var> be undefined.</li><li><p>If <var>e</var>.[[NeedsSet]] is true, then set <var>crossOriginSet</var> to an
         anonymous built-in function, created in the <a id=crossorigingetownpropertyhelper-(-o,-p-):current-realm-record-3 href=https://tc39.github.io/ecma262/#current-realm data-x-internal=current-realm-record>current Realm Record</a>, that
         performs the same steps as the setter of the IDL attribute <var>P</var> on object
         <var>O</var>.</li><li><p>Set <var>crossOriginDesc</var> to <a id=crossorigingetownpropertyhelper-(-o,-p-):propertydescriptor-2 href=https://tc39.github.io/ecma262/#sec-property-descriptor-specification-type data-x-internal=propertydescriptor>PropertyDescriptor</a>{
         [[Get]]: <var>crossOriginGet</var>,
         [[Set]]: <var>crossOriginSet</var>,
         [[Enumerable]]: false,
         [[Configurable]]: true }.</li></ol>
       </li><li><p>Create an entry in the value of the <a href=#crossoriginpropertydescriptormap id=crossorigingetownpropertyhelper-(-o,-p-):crossoriginpropertydescriptormap-2>[[CrossOriginPropertyDescriptorMap]]</a>
       internal slot of <var>O</var> with key <var>crossOriginKey</var> and value
       <var>crossOriginDesc</var>.</li><li><p>Return <var>crossOriginDesc</var>.</li></ol>
     </li></ol>
   </li><li><p>Return undefined.</li></ol>

  <p class=note>The reason that the property descriptors produced here are configurable is to
  preserve the <a id=crossorigingetownpropertyhelper-(-o,-p-):invariants-of-the-essential-internal-methods href=https://tc39.github.io/ecma262/#sec-invariants-of-the-essential-internal-methods data-x-internal=invariants-of-the-essential-internal-methods>invariants of the essential internal methods</a> required by the JavaScript
  specification. In particular, since the value of the property can change as a consequence of
  navigation, it is required that the property be configurable. (However, see <a href=https://github.com/tc39/ecma262/issues/672>tc39/ecma262 issue #672</a> and references to it
  elsewhere in this specification for cases where we are not able to preserve these invariants, for
  compatibility with existing Web content.) <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

  <p class=note>The reason the property descriptors are non-enumerable, despite this mismatching
  the same-origin behavior, is for compatibility with existing Web content. See <a href=https://github.com/whatwg/html/issues/3183>issue #3183</a> for details.</p>

  <h5 id=crossoriginget-(-o,-p,-receiver-)><span class=secno>7.2.3.5</span> <dfn>CrossOriginGet</dfn> ( <var>O</var>, <var>P</var>, <var>Receiver</var> )<a href=#crossoriginget-(-o,-p,-receiver-) class=self-link></a></h5>

  <ol><li><p>Let <var>desc</var> be ? <var>O</var>.[[GetOwnProperty]](<var>P</var>).</li><li><p>Assert: <var>desc</var> is not undefined.</li><li><p>If ! <a id=crossoriginget-(-o,-p,-receiver-):isdatadescriptor href=https://tc39.github.io/ecma262/#sec-isdatadescriptor data-x-internal=isdatadescriptor>IsDataDescriptor</a>(<var>desc</var>) is true, then return
   <var>desc</var>.[[Value]].</li><li><p>Assert: <a id=crossoriginget-(-o,-p,-receiver-):isaccessordescriptor href=https://tc39.github.io/ecma262/#sec-isaccessordescriptor data-x-internal=isaccessordescriptor>IsAccessorDescriptor</a>(<var>desc</var>) is true.</li><li><p>Let <var>getter</var> be <var>desc</var>.[[Get]].</li><li><p>If <var>getter</var> is undefined, then throw a <a id=crossoriginget-(-o,-p,-receiver-):securityerror href=https://triple-underscore.github.io/WebIDL-ja.html#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a>
   <code id=crossoriginget-(-o,-p,-receiver-):domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li><li><p>Return ? <a id=crossoriginget-(-o,-p,-receiver-):call href=https://tc39.github.io/ecma262/#sec-call data-x-internal=call>Call</a>(<var>getter</var>, <var>Receiver</var>).</li></ol>

  <h5 id=crossoriginset-(-o,-p,-v,-receiver-)><span class=secno>7.2.3.6</span> <dfn>CrossOriginSet</dfn> ( <var>O</var>, <var>P</var>, <var>V</var>,
  <var>Receiver</var> )<a href=#crossoriginset-(-o,-p,-v,-receiver-) class=self-link></a></h5>

  <ol><li><p>Let <var>desc</var> be ? <var>O</var>.[[GetOwnProperty]](<var>P</var>).</li><li><p>Assert: <var>desc</var> is not undefined.</li><li>
    <p>If <var>desc</var>.[[Set]] is present and its value is not undefined, then:

    

    <ol><li><p>Perform ? <a id=crossoriginset-(-o,-p,-v,-receiver-):call href=https://tc39.github.io/ecma262/#sec-call data-x-internal=call>Call</a>(<var>setter</var>, <var>Receiver</var>,
     «<var>V</var>»).</li><li><p>Return true.</li></ol>
   </li><li><p>Throw a <a id=crossoriginset-(-o,-p,-v,-receiver-):securityerror href=https://triple-underscore.github.io/WebIDL-ja.html#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=crossoriginset-(-o,-p,-v,-receiver-):domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>

  <h5 id=crossoriginownpropertykeys-(-o-)><span class=secno>7.2.3.7</span> <dfn>CrossOriginOwnPropertyKeys</dfn> ( <var>O</var> )<a href=#crossoriginownpropertykeys-(-o-) class=self-link></a></h5>

  <ol><li><p>Let <var>keys</var> be a new empty <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=crossoriginownpropertykeys-(-o-):js-list data-x-internal=js-list>List</a>.</li><li>
    <p>Repeat for each <var>e</var> that is an element of !
    <a href=#crossoriginproperties-(-o-) id=crossoriginownpropertykeys-(-o-):crossoriginproperties-(-o-)>CrossOriginProperties</a>(<var>O</var>):</p>

    <ol><li><p>If <var>e</var>.[[HideFromKeys]] is not true, <a href=https://infra.spec.whatwg.org/#list-append id=crossoriginownpropertykeys-(-o-):list-append data-x-internal=list-append>append</a>
     <var>e</var>.[[Property]] to <var>keys</var>.</li></ol>
   </li><li><p>If <var>keys</var> <a href=https://triple-underscore.github.io/infra-ja.html#list-contain id=crossoriginownpropertykeys-(-o-):list-contains data-x-internal=list-contains>does not contain</a> "<code>then</code>", then <a href=https://infra.spec.whatwg.org/#list-append id=crossoriginownpropertykeys-(-o-):list-append-2 data-x-internal=list-append>append</a> "<code>then</code>" to <var>keys</var>.</li><li><p>Return the concatenation of <var>keys</var> and « <a id=crossoriginownpropertykeys-(-o-):@@tostringtag href=infrastructure.html#@@tostringtag>@@toStringTag</a>,
   <a id=crossoriginownpropertykeys-(-o-):@@hasinstance href=infrastructure.html#@@hasinstance>@@hasInstance</a>, <a id=crossoriginownpropertykeys-(-o-):@@isconcatspreadable href=infrastructure.html#@@isconcatspreadable>@@isConcatSpreadable</a> ».</li></ol>

  



  <nav><a href=dnd.html>← 6.7 ドラッグアンドドロップ</a> — <a href=./>目次</a> — <a href=window-object.html>7.3 Windowオブジェクト →</a></nav>
</body></html>