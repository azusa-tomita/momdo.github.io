<!DOCTYPE html><html class=split lang=ja>
<script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport>
<title>HTML Standard 日本語訳</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=icon href=https://resources.whatwg.org/logo.svg>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script>
<style>
   .status { min-height: 0.6em; font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status:hover { z-index: 9; }
   .status:focus-within { z-index: 9; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; left: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > p > strong { margin-left: 1.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span.no::before { opacity: 0.5; }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mini.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .support > .samsung::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.png); }
   .status > .caniuse { text-align: right; font-style: italic; width: 100%; }
   .status > .caniuse + p { margin-top: 0.5em; border-top: 1px solid silver; }

   @media (max-width: 767px) {
     .status { right: -9em; }
   }
  </style>
<style>
   [hidden] { display: none; }

   .bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style>
<body>
  
  <script async="" src=/html-dfn.js></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new src=https://resources.whatwg.org/file-issue.js async=""></script>
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>5 December 2017</span></h2></hgroup>
   
   

   
  </header>

  

  
  

  
  

  

  <nav><a href=interactive-elements.html>← 4.11 インタラクティブ要素</a> — <a href=./>目次</a> — <a href=canvas.html>4.12.5 canvas要素 →</a></nav><ol class=toc><li id=toc-semantics><ol><li><a href=scripting.html#scripting-3><span class=secno>4.12</span> スクリプティング</a><ol><li><a href=scripting.html#the-script-element><span class=secno>4.12.1</span> <code>script</code>要素</a><ol><li><a href=scripting.html#script-processing-model><span class=secno>4.12.1.1</span> Processing model</a></li><li><a href=scripting.html#scriptingLanguages><span class=secno>4.12.1.2</span> スクリプト言語</a></li><li><a href=scripting.html#restrictions-for-contents-of-script-elements><span class=secno>4.12.1.3</span> <code>script</code>要素のコンテンツの制約</a></li><li><a href=scripting.html#inline-documentation-for-external-scripts><span class=secno>4.12.1.4</span> 外部スクリプトに対するインライン文書</a></li><li><a href=scripting.html#scriptTagXSLT><span class=secno>4.12.1.5</span> Interaction of <code>script</code> elements and XSLT</a></li></ol></li><li><a href=scripting.html#the-noscript-element><span class=secno>4.12.2</span> <code>noscript</code>要素</a></li><li><a href=scripting.html#the-template-element><span class=secno>4.12.3 </span> <code>template</code>要素</a><ol><li><a href=scripting.html#template-XSLT-XPath><span class=secno>4.12.3.1</span> Interaction of <code>template</code> elements with XSLT and XPath</a></li></ol></li><li><a href=scripting.html#the-slot-element><span class=secno>4.12.4</span> <code>slot</code>要素</a></li></ol></li></ol></li></ol><h3 id=scripting-3><span class=secno>4.12</span> スクリプティング<a href=#scripting-3 class=self-link></a></h3>

  <p>スクリプトは著者が文書に双方向性を追加することを許可する。</p>

  <p>著者は、宣言型のメカニズムがしばしばより保守しやすく、かつ多くのユーザーがスクリプトを無効としているため、可能であれば、スクリプトに宣言型の代替を使用するよう推奨される。</p>

  <div class=example>

   <p>たとえば、より詳細な情報を表示するセクションを表示または非表示にするスクリプトを使用する代わりに、<code id=scripting-3:the-details-element><a href=interactive-elements.html#the-details-element>details</a></code>要素を使用できる。</p>

  </div>

  <p>著者はまた、スクリプトのサポートがない状態でそれらのアプリケーションが行儀よくデグレードするよう推奨される。</p>

  <div class=example>

   <p>たとえば、著者がテーブルヘッダーにおいてリンクに動的なテーブルの再ソートを提供する場合、リンクはまたサーバーからソートされたテーブルを要求することによって、スクリプトなしで機能させることができるかもしれない。</p>

  </div>


  <h4 id=the-script-element data-dfn-type=element data-lt=script><span class=secno>4.12.1</span> <dfn id=script><code>script</code></dfn>要素<a href=#the-script-element class=self-link></a></h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-script-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-script-element:metadata-content-2 href=dom.html#metadata-content-2>メタデータコンテンツ</a>。<dd><a id=the-script-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-script-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a href=dom.html#script-supporting-elements-2 id=the-script-element:script-supporting-elements-2>スクリプトサポート要素</a>。<dt><a href=dom.html#concept-element-contexts id=the-script-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-script-element:metadata-content-2-2 href=dom.html#metadata-content-2>メタデータコンテンツ</a>が期待される場所。<dd><a id=the-script-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所。<dd><a id=the-script-element:script-supporting-elements-2-2 href=dom.html#script-supporting-elements-2>スクリプトサポート要素</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-script-element:concept-element-content-model>コンテンツモデル</a>：<dd><code id=the-script-element:attr-script-src><a href=#attr-script-src>src</a></code>属性が存在しない場合、<code id=the-script-element:attr-script-type><a href=#attr-script-type>type</a></code>属性の値に依存するが、<a href=#restrictions-for-contents-of-script-elements id=the-script-element:restrictions-for-contents-of-script-elements>スクリプトの内容制限</a>に一致しなければならない。<dd><code id=the-script-element:attr-script-src-2><a href=#attr-script-src>src</a></code>属性が存在<em>する</em>場合、要素は空または<a href=#inline-documentation-for-external-scripts id=the-script-element:inline-documentation-for-external-scripts>スクリプト文書</a>を含むだけでなく<a href=#restrictions-for-contents-of-script-elements id=the-script-element:restrictions-for-contents-of-script-elements-2>スクリプトの内容制限</a>に一致するかのいずれかでなければならない。<dt><a href=dom.html#concept-element-tag-omission id=the-script-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-script-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-script-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-script-element:attr-script-src-3><a href=#attr-script-src>src</a></code> — リソースのアドレス<dd><code id=the-script-element:attr-script-type-2><a href=#attr-script-type>type</a></code> — Type of script<dd><code id=the-script-element:attr-script-nomodule><a href=#attr-script-nomodule>nomodule</a></code> — Prevents execution in user agents that support <a href=webappapis.html#module-script id=the-script-element:module-script>module scripts</a><dd><code id=the-script-element:attr-script-async><a href=#attr-script-async>async</a></code> — ブロックなしで、可能な場合にスクリプトを実行する<dd><code id=the-script-element:attr-script-defer><a href=#attr-script-defer>defer</a></code> — スクリプトの実行を延期する<dd><code id=the-script-element:attr-script-crossorigin><a href=#attr-script-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-script-element:attr-script-integrity><a href=#attr-script-integrity>integrity</a></code> — <cite>Subresource Integrity</cite>チェックで使用される整合性メタデータ<a href=references.html#refsSRI>[SRI]</a><dt><a href=dom.html#concept-element-dom id=the-script-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-script-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmlscriptelement>HTMLScriptElement</dfn> : <a id=the-script-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  [<a id=the-script-element:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute USVString <a href=#dom-script-src id=the-script-element:dom-script-src>src</a>;
  [<a id=the-script-element:cereactions-2 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-script-type id=the-script-element:dom-script-type>type</a>;
  [<a id=the-script-element:cereactions-3 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-script-nomodule id=the-script-element:dom-script-nomodule>noModule</a>;
  [<a id=the-script-element:cereactions-4 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-script-async id=the-script-element:dom-script-async>async</a>;
  [<a id=the-script-element:cereactions-5 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-script-defer id=the-script-element:dom-script-defer>defer</a>;
  [<a id=the-script-element:cereactions-6 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString? <a href=#dom-script-crossorigin id=the-script-element:dom-script-crossorigin>crossOrigin</a>;
  [<a id=the-script-element:cereactions-7 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-script-text id=the-script-element:dom-script-text>text</a>;
  [<a id=the-script-element:cereactions-8 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-script-integrity id=the-script-element:dom-script-integrity>integrity</a>;

};</pre>
   </dl>

  <p><code id=the-script-element:the-script-element><a href=#the-script-element>script</a></code>要素は、著者が文書に動的スクリプトおよびデータブロックを含むことを許可する。この要素は、ユーザーにコンテンツを<a href=dom.html#represents id=the-script-element:represents>表す</a>ものでない。</p>

  <p><dfn id=attr-script-type><code>type</code></dfn>属性は、表されるスクリプトの型をカスタマイズを可能にする：<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> es6-module<span class="and_chr yes"><span>Chrome for Android</span> <span>62+</span></span><span class="chrome yes"><span>Chrome</span> <span>61+</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>10.3+</span></span><span class="firefox no"><span>Firefox</span> <span>None</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="samsung no"><span>Samsung Internet</span> <span>None</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>10.1+</span></span><span class="edge yes"><span>Edge</span> <span>16+</span></span><span class="android no"><span>Android Browser</span> <span>None</span></span><span class="opera no"><span>Opera</span> <span>None</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=es6-module">caniuse.com</a></div>

  <ul><li><p>Omitting the attribute, setting it to the empty string, or setting it to an <a id=the-script-element:ascii-case-insensitive href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII
    case-insensitive</a> match for a <a href=#javascript-mime-type id=the-script-element:javascript-mime-type>JavaScript MIME type</a>, means that the script is
    a <a id=the-script-element:classic-script href=webappapis.html#classic-script>classic script</a>, to be interpreted according to the JavaScript <i id=the-script-element:js-prod-script><a data-x-internal=js-prod-script href=https://tc39.github.io/ecma262/#prod-Script>Script</a></i> top-level production. Classic scripts are affected by the
    <code id=the-script-element:attr-script-async-2><a href=#attr-script-async>async</a></code> and <code id=the-script-element:attr-script-defer-2><a href=#attr-script-defer>defer</a></code>
    attributes. Authors should omit the attribute instead of redundantly setting it.</li><li><p>文字列"<code>module</code>"に<a id=the-script-element:ascii-case-insensitive-2 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII大文字・小文字不区別</a>で属性を設定することは、スクリプトがJavaScript <i id=the-script-element:js-prod-module><a data-x-internal=js-prod-module href=https://tc39.github.io/ecma262/#prod-Module>Module</a></i>トップレベル制作物によって解釈されるような<a id=the-script-element:module-script-2 href=webappapis.html#module-script>モジュールスクリプト</a>であることを意味する。Module scripts are not affected by the <code id=the-script-element:attr-script-defer-3><a href=#attr-script-defer>defer</a></code> attribute.</li><li><p>他の値に属性を設定することは、スクリプトが処理されない<dfn id=data-block>データブロック</dfn>であることを意味する。（<code id=the-script-element:attr-script-type-3><a href=#attr-script-type>type</a></code>自身を除く）<code id=the-script-element:the-script-element-2><a href=#the-script-element>script</a></code>属性のいずれもデータブロック上で任意の効果を持たない。著者は、データブロックを示すために<a href=#javascript-mime-type id=the-script-element:javascript-mime-type-2>JavaScript MIMEタイプ</a>でない<a id=the-script-element:valid-mime-type href=https://mimesniff.spec.whatwg.org/#valid-mime-type data-x-internal=valid-mime-type>妥当なMIMEタイプ</a>を使用しなければならない。</li></ul>

  <p class=note><a href=#data-block id=the-script-element:data-block>データブロック</a>が<a id=the-script-element:valid-mime-type-2 href=https://mimesniff.spec.whatwg.org/#valid-mime-type data-x-internal=valid-mime-type>妥当なMIMEタイプ</a>を使用して表記されなければならない要件は、潜在的な将来の衝突を回避するための場所である。この仕様が<a href=#the-script-element id=the-script-element:the-script-element-3>スクリプト</a>の追加の型をいずれ追加する場合、その追加の型は"<code>module</code>"値が<a href=webappapis.html#module-script id=the-script-element:module-script-3>モジュールスクリプト</a>を表す方法のように、MIMEタイプでない何かに<code id=the-script-element:attr-script-type-4><a href=#attr-script-type>type</a></code>属性を設定することによってトリガーされる。現在に妥当なMIMEタイプを使用することで、将来のユーザーエージェントでさえも、データブロックが異なるスクリプトタイプとして再解釈されないことを保証する。</p>

  <p><a href=webappapis.html#classic-script id=the-script-element:classic-script-2>クラシックスクリプト</a>および<a href=webappapis.html#module-script id=the-script-element:module-script-4>モジュールスクリプト</a>は、インラインで埋め込まれるか、指定された場合に使用する外部スクリプトリソースの<a id=the-script-element:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を与える、<dfn data-dfn-for=script id=attr-script-src data-dfn-type=element-attr data-export=""><code>src</code></dfn>属性を使用する外部ファイルからインポートされるかのいずれかであってもよい。<code id=the-script-element:attr-script-src-4><a href=#attr-script-src>src</a></code>が指定される場合、<a id=the-script-element:valid-non-empty-url-potentially-surrounded-by-spaces href=urls-and-fetching.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれる妥当な空でないURL</a>でなければならない。インライン<code id=the-script-element:the-script-element-4><a href=#the-script-element>script</a></code>要素、または外部スクリプトリソースのコンテンツは、それぞれ<a href=webappapis.html#classic-script id=the-script-element:classic-script-3>クラシックスクリプト</a>および<a href=webappapis.html#module-script id=the-script-element:module-script-5>モジュールスクリプト</a>に対するJavaScript仕様の<i id=the-script-element:js-prod-script-2><a data-x-internal=js-prod-script href=https://tc39.github.io/ecma262/#prod-Script>Script</a></i>または<i id=the-script-element:js-prod-module-2><a data-x-internal=js-prod-module href=https://tc39.github.io/ecma262/#prod-Module>Module</a></i>制作物の要件に適合しなければならない。<a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

  <p><a href=#data-block id=the-script-element:data-block-2>データブロック</a>を含めるために使用される場合、データは、インラインに埋め込まれなければならず、データの形式は、<code id=the-script-element:attr-script-type-5><a href=#attr-script-type>type</a></code>属性を使用して指定しなければならず、かつ<code id=the-script-element:the-script-element-5><a href=#the-script-element>script</a></code>要素のコンテンツは、使用される形式のために定義される要件に適合しなければならない。The <code id=the-script-element:attr-script-src-5><a href=#attr-script-src>src</a></code>, <code id=the-script-element:attr-script-async-3><a href=#attr-script-async>async</a></code>, <code id=the-script-element:attr-script-nomodule-2><a href=#attr-script-nomodule>nomodule</a></code>, <code id=the-script-element:attr-script-defer-4><a href=#attr-script-defer>defer</a></code>, <code id=the-script-element:attr-script-crossorigin-2><a href=#attr-script-crossorigin>crossorigin</a></code>, and <code id=the-script-element:attr-script-integrity-2><a href=#attr-script-integrity>integrity</a></code> attributes must not be specified.</p>

  <p>The <dfn id=attr-script-nomodule><code>nomodule</code></dfn> attribute is a <a id=the-script-element:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>boolean
  attribute</a> that prevents a script from being executed in user agents that support
  <a href=webappapis.html#module-script id=the-script-element:module-script-6>module scripts</a>. This allows selective execution of <a href=webappapis.html#module-script id=the-script-element:module-script-7>module scripts</a> in modern user agents and <a href=webappapis.html#classic-script id=the-script-element:classic-script-4>classic scripts</a> in older user agents, <a href=#script-nomodule-example>as shown
  below</a>. The <code id=the-script-element:attr-script-nomodule-3><a href=#attr-script-nomodule>nomodule</a></code> attribute must not be
  specified on <a href=webappapis.html#module-script id=the-script-element:module-script-8>module scripts</a> (and will be ignored if it
  is).</p>

  <p><dfn id=attr-script-async><code>async</code></dfn>および<dfn id=attr-script-defer><code>defer</code></dfn>属性は、どのようにスクリプトが評価されるべきかを示す<a href=common-microsyntaxes.html#boolean-attribute id=the-script-element:boolean-attribute-2>真偽属性</a>である。<a href=webappapis.html#classic-script id=the-script-element:classic-script-5>クラシックスクリプト</a>は<code id=the-script-element:attr-script-defer-5><a href=#attr-script-defer>defer</a></code>または<code id=the-script-element:attr-script-async-4><a href=#attr-script-async>async</a></code>を指定してもよい。<a href=webappapis.html#module-script id=the-script-element:module-script-9>モジュールスクリプト</a>は、<code id=the-script-element:attr-script-async-5><a href=#attr-script-async>async</a></code>を指定してもよい。<code id=the-script-element:attr-script-src-6><a href=#attr-script-src>src</a></code>属性が存在しない場合、<code id=the-script-element:attr-script-defer-6><a href=#attr-script-defer>defer</a></code>および<code id=the-script-element:attr-script-async-6><a href=#attr-script-async>async</a></code>属性は指定されてはならない。<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> script-defer<span class="and_chr yes"><span>Chrome for Android</span> <span>62+</span></span><span class="chrome yes"><span>Chrome</span> <span>8+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.5+</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>5+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>3+</span></span><span class="opera yes"><span>Opera</span> <span>15+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=script-defer">caniuse.com</a><p class=support><strong>Support:</strong> script-async<span class="and_chr yes"><span>Chrome for Android</span> <span>62+</span></span><span class="chrome yes"><span>Chrome</span> <span>8+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.6+</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>3+</span></span><span class="opera yes"><span>Opera</span> <span>15+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=script-async">caniuse.com</a></div>

  <p>これらの属性を使用して、スクリプトの種類によって選択できる複数の可能なモードが存在する。</p>

  <p><a href=webappapis.html#classic-script id=the-script-element:classic-script-6>クラシックスクリプト</a>について、<code id=the-script-element:attr-script-async-7><a href=#attr-script-async>async</a></code>属性が存在する場合、クラシックスクリプトは、構文解析と<a id=the-script-element:in-parallel href=infrastructure.html#in-parallel>並行して</a>フェッチされるとすぐに（潜在的に構文解析が完了する前に）利用可能になると評価される。<code id=the-script-element:attr-script-async-8><a href=#attr-script-async>async</a></code>が存在しないが<code id=the-script-element:attr-script-defer-7><a href=#attr-script-defer>defer</a></code>属性が存在する場合、クラシックスクリプトは、<a id=the-script-element:in-parallel-2 href=infrastructure.html#in-parallel>並行して</a>フェッチされ、ページが解析終了した際に評価される。いずれの属性も存在しない場合、スクリプトは、両方が完了するまで解析を阻止して、すぐにフェッチされ評価される。</p>

  <p><a href=webappapis.html#module-script id=the-script-element:module-script-10>モジュールスクリプト</a>について、<code id=the-script-element:attr-script-async-9><a href=#attr-script-async>async</a></code>属性が存在する場合、モジュールスクリプトとそのすべての依存関係は、構文解析と<a id=the-script-element:in-parallel-3 href=infrastructure.html#in-parallel>並行して</a>フェッチされ、モジュールスクリプトは利用可能になるとすぐに（潜在的に構文解析が完了する前に）評価される。そうでなければ、モジュールスクリプトとその依存関係は、構文解析と<a id=the-script-element:in-parallel-4 href=infrastructure.html#in-parallel>並行して</a>フェッチされ、ページが解析終了した際に評価される。（<code id=the-script-element:attr-script-defer-8><a href=#attr-script-defer>defer</a></code>属性は、モジュールスクリプトに影響しない。）</p>

  <p>これは、次の模式図にすべて要約される：</p>

  <p><img src=https://html.spec.whatwg.org/multipage/images/asyncdefer.svg alt='&lt;script&gt;のために、解析はフェッチと実行によって中断される。With &lt;script defer&gt;, fetching is parallel to parsing and execution takes place after all parsing has finished. And with &lt;script async&gt;, fetching is parallel to parsing but once it finishes parsing is interrupted to execute the script. The story for &lt;script type="module"&gt; is similar to &lt;script defer&gt;, but the dependencies will be fetched as well, and the story for &lt;script type="module" async&gt; is similar to &lt;script async&gt; with the extra dependency fetching.' style="width: 80%; min-width: 820px;"></p>

  <p class=note>これら属性の正確な処理の詳細は、主に歴史的な理由から、いくぶん自明でない、多くのHTMLの側面を含む。したがって、実装要求は必然的に仕様のあらゆる場所に散在している。（この節の）下記のアルゴリズムは、この処理の中核を説明するが、これらのアルゴリズムが参照する、およびHTMLにおける<code id=the-script-element:the-script-element-6><a href=#the-script-element>script</a></code>の<a href=parsing.html#scriptTag>開始</a>タグと<a href=parsing.html#scriptEndTag>終了</a>タグに対する構文解析規則、<a href=parsing.html#scriptForeignEndTag>無関係なコンテンツで</a>、<a href=xhtml.html#scriptTagXML>XMLで</a>、<code id=the-script-element:dom-document-write><a href=dynamic-markup-insertion.html#dom-document-write>document.write()</a></code>メソッドに対する規則、<a href=webappapis.html#scripting>スクリプト</a>の取り扱いなどによって参照される。</p>

  <p>たとえ<code id=the-script-element:attr-script-async-10><a href=#attr-script-async>async</a></code>属性が指定されても、デフォルトとなるブロッキング動作の代わりに<code id=the-script-element:attr-script-defer-11><a href=#attr-script-defer>defer</a></code>の動作をフォールバックするために、<code id=the-script-element:attr-script-defer-10><a href=#attr-script-defer>defer</a></code>のみをサポートする（かつ<code id=the-script-element:attr-script-async-11><a href=#attr-script-async>async</a></code>をサポートしない）レガシーウェブブラウザーをもたらすため、<code id=the-script-element:attr-script-defer-9><a href=#attr-script-defer>defer</a></code>属性は指定されてもよい。</p>

  <p><dfn id=attr-script-crossorigin><code>crossorigin</code></dfn>属性は<a id=the-script-element:cors-settings-attribute href=urls-and-fetching.html#cors-settings-attribute>CORS設定属性</a>である。<a href=webappapis.html#classic-script id=the-script-element:classic-script-7>クラシックスクリプト</a>について、スクリプトが他の<a href=origin.html#concept-origin id=the-script-element:concept-origin>生成元</a>から得られる場合、エラー情報が公開されるかどうかを制御する。<a href=webappapis.html#module-script id=the-script-element:module-script-11>モジュールスクリプト</a>について、クロスオリジンのリクエストに使用される<a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode id=the-script-element:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>資格情報モード</a>を制御する。</p>

  <p class=note><a href=webappapis.html#classic-script id=the-script-element:classic-script-8>クラシックスクリプト</a>とは異なり、<a href=webappapis.html#module-script id=the-script-element:module-script-12>モジュールスクリプト</a>は、クロスオリジンフェッチのために<a href=https://triple-underscore.github.io/Fetch-ja.html#http-cors-protocol id=the-script-element:cors-protocol data-x-internal=cors-protocol>CORSプロトコル</a>を使用する必要がある。</p>

  <p><dfn data-dfn-for=script id=attr-script-integrity data-dfn-type=element-attr data-export=""><code>integrity</code></dfn>属性は、この要素が責任を負うリクエストに対する<a href=https://fetch.spec.whatwg.org/#concept-request-integrity-metadata id=the-script-element:concept-request-integrity-metadata data-x-internal=concept-request-integrity-metadata>完全性メタデータ</a>を表す。値はテキストである。The <code id=the-script-element:attr-script-integrity-3><a href=#attr-script-integrity>integrity</a></code> attribute must not be specified when embedding a <a id=the-script-element:module-script-13 href=webappapis.html#module-script>module script</a> or when the <code id=the-script-element:attr-script-src-7><a href=#attr-script-src>src</a></code> attribute is not specified. <a href=references.html#refsSRI>[SRI]</a></p>

  <p>Changing the <code id=the-script-element:attr-script-src-8><a href=#attr-script-src>src</a></code>, <code id=the-script-element:attr-script-type-6><a href=#attr-script-type>type</a></code>, <code id=the-script-element:attr-script-nomodule-4><a href=#attr-script-nomodule>nomodule</a></code>, <code id=the-script-element:attr-script-async-12><a href=#attr-script-async>async</a></code>, <code id=the-script-element:attr-script-defer-12><a href=#attr-script-defer>defer</a></code>, <code id=the-script-element:attr-script-crossorigin-3><a href=#attr-script-crossorigin>crossorigin</a></code>, and <code id=the-script-element:attr-script-integrity-4><a href=#attr-script-integrity>integrity</a></code> attributes dynamically has no direct effect; these
  attributes are only used at specific times described below.</p> 

  

  <p>The IDL attributes <dfn id=dom-script-src><code>src</code></dfn>, <dfn id=dom-script-type><code>type</code></dfn>, <dfn id=dom-script-defer><code>defer</code></dfn>, and <dfn id=dom-script-integrity><code>integrity</code></dfn>, must each <a id=the-script-element:reflect href=common-dom-interfaces.html#reflect>reflect</a> the
  respective content attributes of the same name.</p>

  <p>The <dfn id=dom-script-crossorigin><code>crossOrigin</code></dfn> IDL attribute must
  <a id=the-script-element:reflect-2 href=common-dom-interfaces.html#reflect>reflect</a> the <code id=the-script-element:attr-script-crossorigin-4><a href=#attr-script-crossorigin>crossorigin</a></code> content
  attribute, <a id=the-script-element:limited-to-only-known-values href=common-dom-interfaces.html#limited-to-only-known-values>limited to only known values</a>.</p>

  <p>The <dfn id=dom-script-nomodule><code>noModule</code></dfn> IDL attribute must
  <a id=the-script-element:reflect-3 href=common-dom-interfaces.html#reflect>reflect</a> the <code id=the-script-element:attr-script-nomodule-5><a href=#attr-script-nomodule>nomodule</a></code> content
  attribute.</p>

  <p>The <dfn id=dom-script-async><code>async</code></dfn> IDL attribute controls whether the
  element will execute asynchronously or not. If the element's <a href=#non-blocking id=the-script-element:non-blocking>"non-blocking"</a> flag is
  set, then, on getting, the <code id=the-script-element:dom-script-async-2><a href=#dom-script-async>async</a></code> IDL attribute must return
  true, and on setting, the <a href=#non-blocking id=the-script-element:non-blocking-2>"non-blocking"</a> flag must first be unset, and then the
  content attribute must be removed if the IDL attribute's new value is false, and must be set to
  the empty string if the IDL attribute's new value is true. If the element's
  <a href=#non-blocking id=the-script-element:non-blocking-3>"non-blocking"</a> flag is <em>not</em> set, the IDL attribute must <a id=the-script-element:reflect-4 href=common-dom-interfaces.html#reflect>reflect</a>
  the <code id=the-script-element:attr-script-async-13><a href=#attr-script-async>async</a></code> content attribute.</p>

  

  <dl class=domintro><dt><var>script</var> . <code id=dom-script-text-dev><a href=#dom-script-text>text</a></code> [ = <var>value</var> ]<dd>

    <p>要素の<a id=the-script-element:child-text-content href=https://dom.spec.whatwg.org/#concept-child-text-content data-x-internal=child-text-content>子テキストコンテンツ</a>を返す。</p>

    <p>与えられた値を持つ要素の子を置換するために、設定できる。</p>

   </dl>

  

  <p>The IDL attribute <dfn id=dom-script-text><code>text</code></dfn> must return the <a id=the-script-element:child-text-content-2 href=https://dom.spec.whatwg.org/#concept-child-text-content data-x-internal=child-text-content>child text content</a> of the <code id=the-script-element:the-script-element-7><a href=#the-script-element>script</a></code> element. 設定する際に、それは<code id=the-script-element:textcontent><a data-x-internal=textcontent href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-textcontent>textContent</a></code> IDL属性と同じように振る舞わなければならない。</p>

  

  <p class=note><code id=the-script-element:dom-document-write-2><a href=dynamic-markup-insertion.html#dom-document-write>document.write()</a></code>メソッドを使用して挿入するとき、<a href=parsing.html#document-written-scripts-intervention>通常は</a><code id=the-script-element:the-script-element-8><a href=#the-script-element>script</a></code>要素が実行される（一般に、スクリプトの実行またはHTMLの解析をブロックする）。<code id=the-script-element:dom-innerhtml><a data-x-internal=dom-innerhtml href=https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml>innerHTML</a></code>属性と<code id=the-script-element:dom-outerhtml><a data-x-internal=dom-outerhtml href=https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml>outerHTML</a></code>属性を使用して挿入する場合、それらは一切実行されない。</p>

  <div class=example>

   <p>次の例において、2つの<code id=the-script-element:the-script-element-9><a href=#the-script-element>script</a></code>要素が使用される。1つは外部の<a id=the-script-element:classic-script-9 href=webappapis.html#classic-script>クラシックスクリプト</a>を埋め込み、もう1つは<a href=#data-block id=the-script-element:data-block-3>データブロック</a>のようないくつかのデータを含む。</p>

   <pre>&lt;script src="game-engine.js"&gt;&lt;/script&gt;
&lt;script type="text/x-game-map"&gt;
........U.........e
o............A....e
.....A.....AAA....e
.A..AAA...AAAAA...e
&lt;/script&gt;</pre>

   <p>この場合のデータは、ビデオゲームのマップを生成するスクリプトによって使用されるかもしれない。しかし、データはそのように使用する必要はない。おそらく実際にマップデータは、ページのマークアップの他の部分に埋め込まれており、ここでデータブロックは、ゲームマップで特定の機能を探しているユーザーを支援するサイトの検索エンジンによって単に使用される。</p>

  </div>

  <div class=example>

   <p>次のサンプルは、<code id=the-script-element:the-script-element-10><a href=#the-script-element>script</a></code>要素が外部<a id=the-script-element:classic-script-10 href=webappapis.html#classic-script>モジュールスクリプト</a>を含めるために使用される方法を示す。また、フォームの出力を初期化する場合に、文書が解析されている間に<code id=the-script-element:the-script-element-11><a href=#the-script-element>script</a></code>要素がスクリプトを呼び出すために使用されうる方法を示す。</p>

   <pre>&lt;script&gt;
 function calculate(form) {
   var price = 52000;
   if (form.elements.brakes.checked)
     price += 1000;
   if (form.elements.radio.checked)
     price += 2500;
   if (form.elements.turbo.checked)
     price += 5000;
   if (form.elements.sticker.checked)
     price += 250;
   form.elements.result.value = price;
 }
&lt;/script&gt;
&lt;form name="pricecalc" onsubmit="return false" onchange="calculate(this)"&gt;
 &lt;fieldset&gt;
  &lt;legend&gt;Work out the price of your car&lt;/legend&gt;
  &lt;p&gt;Base cost: £52000.&lt;/p&gt;
  &lt;p&gt;Select additional options:&lt;/p&gt;
  &lt;ul&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=brakes&gt; Ceramic brakes (£1000)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=radio&gt; Satellite radio (£2500)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=turbo&gt; Turbo charger (£5000)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=sticker&gt; "XZ" sticker (£250)&lt;/label&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;p&gt;Total: £&lt;output name=result&gt;&lt;/output&gt;&lt;/p&gt;
 &lt;/fieldset&gt;
 &lt;script&gt;
  calculate(document.forms.pricecalc);
 &lt;/script&gt;
&lt;/form&gt;</pre>

  </div>

  <div id=script-type-module-example-1 class=example>

   <p>次のサンプルは、<code id=the-script-element:the-script-element-12><a href=#the-script-element>script</a></code>要素が外部<a id=the-script-element:module-script-14 href=webappapis.html#module-script>モジュールスクリプト</a>を含めるために使用される方法を示す。

   <pre>&lt;script type="module" src="app.js"&gt;&lt;/script&gt;</pre>

   <p>このモジュール、およびそのすべての依存関係（ソースファイル内のJavaScript <code>import</code>文を通して表現される）は、フェッチされる。Once the entire resulting module graph has been imported, and the document has finished parsing, the contents of <code>app.js</code> will be evaluated.</p>

   <p>さらに、同じ<code id=the-script-element:window><a href=window-object.html#window>Window</a></code>内の他の<code id=the-script-element:the-script-element-13><a href=#the-script-element>script</a></code>要素からのコードが<code>app.js</code>からモジュールをインポートする場合（たとえば<code>import "./app.js";</code>経由で）、より早い<code id=the-script-element:the-script-element-14><a href=#the-script-element>script</a></code>要素によって作成された同じ<a id=the-script-element:module-script-15 href=webappapis.html#module-script>モジュールスクリプト</a>がインポートされる。</p>

  </div>

  <div id=script-nomodule-example class=example>

  <p>This example shows how to include a <a id=the-script-element:module-script-16 href=webappapis.html#module-script>module script</a> for modern user agents, and a
  <a id=the-script-element:classic-script-11 href=webappapis.html#classic-script>classic script</a> for older user agents:</p>

  <pre>&lt;script type="module" src="app.js"&gt;&lt;/script&gt;
&lt;script nomodule src="classic-app-bundle.js"&gt;&lt;/script&gt;</pre>

  <p>In modern user agents that support <a href=webappapis.html#module-script id=the-script-element:module-script-17>module scripts</a>, the
  <code id=the-script-element:the-script-element-15><a href=#the-script-element>script</a></code> element with the <code id=the-script-element:attr-script-nomodule-6><a href=#attr-script-nomodule>nomodule</a></code> attribute
  will be ignored, and the <code id=the-script-element:the-script-element-16><a href=#the-script-element>script</a></code> element with a <code id=the-script-element:attr-script-type-7><a href=#attr-script-type>type</a></code> of "<code>module</code>" will be fetched and
  evaluated (as a <a id=the-script-element:module-script-18 href=webappapis.html#module-script>module script</a>). Conversely, older user agents will ignore the
  <code id=the-script-element:the-script-element-17><a href=#the-script-element>script</a></code> element with a <code id=the-script-element:attr-script-type-8><a href=#attr-script-type>type</a></code> of "<code>module</code>", as that is an unknown script type for them — but they will have no
  problem fetching and evaluating the other <code id=the-script-element:the-script-element-18><a href=#the-script-element>script</a></code> element (as a <a id=the-script-element:classic-script-12 href=webappapis.html#classic-script>classic
  script</a>), since they do not implement the <code id=the-script-element:attr-script-nomodule-7><a href=#attr-script-nomodule>nomodule</a></code> attribute.</p>

  </div>

  <div id=script-type-module-example-2 class=example>

   <p>次のサンプルは、​​<code id=the-script-element:the-script-element-19><a href=#the-script-element>script</a></code>要素が（たとえばニュースサイト上で）より面白い読書体験を生み出すために、文書のテキストで多数の置換を行うインライン<a id=the-script-element:module-script-19 href=webappapis.html#module-script>モジュールスクリプト</a>を書くために使用することができる方法を示す：<a href=references.html#refsXKCD1288>[XKCD1288]</a></p>

   <pre>&lt;script type="module"&gt;
 import { walkAllTextNodeDescendants } from "./dom-utils.js";

 const substitutions = new Map([
   ["witnesses", "these dudes I know"]
   ["allegedly", "kinda probably"]
   ["new study", "Tumblr post"]
   ["rebuild", "avenge"]
   ["space", "spaaace"]
   ["Google glass", "Virtual Boy"]
   ["smartphone", "Pokédex"]
   ["electric", "atomic"]
   ["Senator", "Elf-Lord"]
   ["car", "cat"]
   ["election", "eating contest"]
   ["Congressional leaders", "river spirits"]
   ["homeland security", "Homestar Runner"]
   ["could not be reached for comment", "is guilty and everyone knows it"]
 ]);

 function substitute(textNode) {
   for (const [before, after] of substitutions.entries()) {
     textNode.data = textNode.data.replace(new RegExp(`\\b${before}\\b`, "ig"), after);
   }
 }

 walkAllTextNodeDescendants(document.body, substitute);
&lt;/script&gt;</pre>

   <p>モジュールスクリプトを使用して得られたいくつかの注目すべき機能は、他のJavaScriptモジュール、デフォルトでstrictモード、およびトップレベル宣言が<a id=the-script-element:global-object href=webappapis.html#global-object>グローバルオブジェクト</a>に新しいプロパティを導入しない方法から関数をインポートする機能を含む。両方の文書の解析が完了し、およびその依存関係（<code>dom-utils.js</code>）がフェッチされかつ評価されるまで、この<code id=the-script-element:the-script-element-20><a href=#the-script-element>script</a></code>要素が文書に表示されるかを問わず、評価されないことにも注意する。</p>

  </div>

  

  <h5 id=script-processing-model><span class=secno>4.12.1.1</span> Processing model<a href=#script-processing-model class=self-link></a></h5>

  <p>A <code id=script-processing-model:the-script-element><a href=#the-script-element>script</a></code> element has several associated pieces of state.</p>

  <p>The first is a flag indicating whether or not the script block has been <dfn id=already-started>"already
  started"</dfn>. Initially, <code id=script-processing-model:the-script-element-2><a href=#the-script-element>script</a></code> elements must have this flag unset (script blocks,
  when created, are not "already started"). The <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone-ext id=script-processing-model:concept-node-clone-ext data-x-internal=concept-node-clone-ext>cloning
  steps</a> for <code id=script-processing-model:the-script-element-3><a href=#the-script-element>script</a></code> elements must set the "already started" flag on the copy if
  it is set on the element being cloned.</p>

  <p>The second is a flag indicating whether the element was <dfn data-dfn-for=script id=parser-inserted data-dfn-type=dfn data-export="">"parser-inserted"</dfn>. Initially,
  <code id=script-processing-model:the-script-element-4><a href=#the-script-element>script</a></code> elements must have this flag unset. It is set by the <a id=script-processing-model:html-parser href=parsing.html#html-parser>HTML parser</a>
  and the <a id=script-processing-model:xml-parser href=xhtml.html#xml-parser>XML parser</a> on <code id=script-processing-model:the-script-element-5><a href=#the-script-element>script</a></code> elements they insert and affects the
  processing of those elements.</p>

  <p>The third is a flag indicating whether the element will be <dfn id=non-blocking>"non-blocking"</dfn>.
  Initially, <code id=script-processing-model:the-script-element-6><a href=#the-script-element>script</a></code> elements must have this flag set. It is unset by the <a id=script-processing-model:html-parser-2 href=parsing.html#html-parser>HTML
  parser</a> and the <a id=script-processing-model:xml-parser-2 href=xhtml.html#xml-parser>XML parser</a> on <code id=script-processing-model:the-script-element-7><a href=#the-script-element>script</a></code> elements they insert. In
  addition, whenever a <code id=script-processing-model:the-script-element-8><a href=#the-script-element>script</a></code> element whose <a href=#non-blocking id=script-processing-model:non-blocking>"non-blocking"</a> flag is set
  has an <code id=script-processing-model:attr-script-async><a href=#attr-script-async>async</a></code> content attribute added, the element's
  <a href=#non-blocking id=script-processing-model:non-blocking-2>"non-blocking"</a> flag must be unset.</p> 

  <p>The fourth is a flag indicating whether or not the script block is <dfn id=ready-to-be-parser-executed>"ready to be
  parser-executed"</dfn>. Initially, <code id=script-processing-model:the-script-element-9><a href=#the-script-element>script</a></code> elements must have this flag unset (script
  blocks, when created, are not "ready to be parser-executed"). This flag is used only for elements
  that are also <a href=#parser-inserted id=script-processing-model:parser-inserted>"parser-inserted"</a>, to let the parser know when to execute the
  script.</p>

  <p>The fifth is <dfn id=concept-script-type>the script's type</dfn>, which is either "<code>classic</code>" or "<code>module</code>". It is determined when the script is
  <a href=#prepare-a-script id=script-processing-model:prepare-a-script>prepared</a>, based on the <code id=script-processing-model:attr-script-type><a href=#attr-script-type>type</a></code> attribute of the element at that time.</p>

  <p>The sixth is a flag indicating whether or not the script is <dfn id=concept-script-external>from an external file</dfn>. It is determined when the script is
  <a href=#prepare-a-script id=script-processing-model:prepare-a-script-2>prepared</a>, based on the <code id=script-processing-model:attr-script-src><a href=#attr-script-src>src</a></code> attribute of the element at that time.</p>

  <p>Finally, a <code id=script-processing-model:the-script-element-10><a href=#the-script-element>script</a></code> element has <dfn id=concept-script-script data-export="">the script's script</dfn>, which is a <a href=webappapis.html#concept-script id=script-processing-model:concept-script>script</a>
  resulting from <a href=#prepare-a-script id=script-processing-model:prepare-a-script-3>preparing</a> the element. This is set
  asynchronously after the classic script or module graph is fetched. Once it is set, either to a
  <a href=webappapis.html#concept-script id=script-processing-model:concept-script-2>script</a> in the case of success or to null in the case of
  failure, the fetching algorithms will note that <dfn id=the-script-is-ready>the script is ready</dfn>, which can trigger
  other actions.  The user agent must <a id=script-processing-model:delay-the-load-event href=parsing.html#delay-the-load-event>delay the load
  event</a> of the element's <a id=script-processing-model:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> until <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready>the script is
  ready</a>.</p>

  <hr>

  <p>When a <code id=script-processing-model:the-script-element-11><a href=#the-script-element>script</a></code> element that is not marked as being <a href=#parser-inserted id=script-processing-model:parser-inserted-2>"parser-inserted"</a>
  experiences one of the events listed in the following list, the user agent must
  <a id=script-processing-model:immediately href=infrastructure.html#immediately>immediately</a> <a href=#prepare-a-script id=script-processing-model:prepare-a-script-4>prepare</a> the <code id=script-processing-model:the-script-element-12><a href=#the-script-element>script</a></code>
  element:</p>

  <ul><li>The <code id=script-processing-model:the-script-element-13><a href=#the-script-element>script</a></code> element <a id=script-processing-model:becomes-connected href=infrastructure.html#becomes-connected>becomes connected</a>.</li><li>The <code id=script-processing-model:the-script-element-14><a href=#the-script-element>script</a></code> element is <a id=script-processing-model:connected href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a> and a node or document fragment is
   <a href=infrastructure.html#nodes-are-inserted id=script-processing-model:nodes-are-inserted>inserted</a> into the <code id=script-processing-model:the-script-element-15><a href=#the-script-element>script</a></code> element, after any
   <code id=script-processing-model:the-script-element-16><a href=#the-script-element>script</a></code> elements <a href=infrastructure.html#nodes-are-inserted id=script-processing-model:nodes-are-inserted-2>inserted</a> at that time.</li><li>The <code id=script-processing-model:the-script-element-17><a href=#the-script-element>script</a></code> element is <a id=script-processing-model:connected-2 href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a> and has a <code id=script-processing-model:attr-script-src-2><a href=#attr-script-src>src</a></code> attribute set where previously the element had no such
   attribute.</li></ul>

  <p>To <dfn id=prepare-a-script data-export="">prepare a script</dfn>, the user agent must
  act as follows:</p>

  <ol><li>

    <p>If the <code id=script-processing-model:the-script-element-18><a href=#the-script-element>script</a></code> element is marked as having <a href=#already-started id=script-processing-model:already-started>"already started"</a>, then
    return. The script is not executed.</p>

   </li><li>

    <p>If the element has its <a href=#parser-inserted id=script-processing-model:parser-inserted-3>"parser-inserted"</a> flag set, then set <var>was-parser-inserted</var> to true and unset the element's
    <a href=#parser-inserted id=script-processing-model:parser-inserted-4>"parser-inserted"</a> flag. Otherwise, set <var>was-parser-inserted</var> to
    false.</p>

    <p class=note>This is done so that if parser-inserted <code id=script-processing-model:the-script-element-19><a href=#the-script-element>script</a></code> elements fail to run
    when the parser tries to run them, e.g. because they are empty or specify an unsupported
    scripting language, another script can later mutate them and cause them to run again.</p>

    

   </li><li>

    <p>If <var>was-parser-inserted</var> is true and the element does not have an <code id=script-processing-model:attr-script-async-2><a href=#attr-script-async>async</a></code> attribute, then set the element's
    <a href=#non-blocking id=script-processing-model:non-blocking-3>"non-blocking"</a> flag to true.</p>

    <p class=note>This is done so that if a parser-inserted <code id=script-processing-model:the-script-element-20><a href=#the-script-element>script</a></code> element fails to
    run when the parser tries to run it, but it is later executed after a script dynamically updates
    it, it will execute in a non-blocking fashion even if the <code id=script-processing-model:attr-script-async-3><a href=#attr-script-async>async</a></code>
    attribute isn't set.</p>

   </li><li id=script-processing-empty>

    <p>If the element has no <code id=script-processing-model:attr-script-src-3><a href=#attr-script-src>src</a></code> attribute, and its child
    nodes, if any, consist only of comment nodes and empty <code id=script-processing-model:text><a data-x-internal=text href=https://triple-underscore.github.io/DOM4-ja.html#interface-text>Text</a></code> nodes, then abort
    these steps at this point. The script is not executed.</p>

   </li><li><p>If the element is not <a id=script-processing-model:connected-3 href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a>, then return. The script is not
   executed.</li><li id=script-processing-prepare>

    <p>If either:</p>

    <ul class=brief><li>the <code id=script-processing-model:the-script-element-21><a href=#the-script-element>script</a></code> element has a <code id=script-processing-model:attr-script-type-2><a href=#attr-script-type>type</a></code> attribute
     and its value is the empty string, or</li><li>the <code id=script-processing-model:the-script-element-22><a href=#the-script-element>script</a></code> element has no <code id=script-processing-model:attr-script-type-3><a href=#attr-script-type>type</a></code> attribute
     but it has a <code id=script-processing-model:attr-script-language><a href=obsolete.html#attr-script-language>language</a></code> attribute and <em>that</em>
     attribute's value is the empty string, or</li><li>the <code id=script-processing-model:the-script-element-23><a href=#the-script-element>script</a></code> element has neither a <code id=script-processing-model:attr-script-type-4><a href=#attr-script-type>type</a></code>
     attribute nor a <code id=script-processing-model:attr-script-language-2><a href=obsolete.html#attr-script-language>language</a></code> attribute, then</li></ul>

    <p>...let <var>the script block's type string</var> for this <code id=script-processing-model:the-script-element-24><a href=#the-script-element>script</a></code> element be
    "<code>text/javascript</code>".</p>

    <p>Otherwise, if the <code id=script-processing-model:the-script-element-25><a href=#the-script-element>script</a></code> element has a <code id=script-processing-model:attr-script-type-5><a href=#attr-script-type>type</a></code> attribute, let <var>the script block's type string</var>
    for this <code id=script-processing-model:the-script-element-26><a href=#the-script-element>script</a></code> element be the value of that attribute with <a href=https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace id=script-processing-model:strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>leading and trailing ASCII whitespace
    stripped</a>.</p>

    <p>Otherwise, the element has a non-empty <code id=script-processing-model:attr-script-language-3><a href=obsolete.html#attr-script-language>language</a></code>
    attribute; let <var>the script block's type string</var> for this <code id=script-processing-model:the-script-element-27><a href=#the-script-element>script</a></code> element
    be the concatenation of the string "<code>text/</code>" followed by the value of the
    <code id=script-processing-model:attr-script-language-4><a href=obsolete.html#attr-script-language>language</a></code> attribute.</p>
    

    <p class=note>The <code id=script-processing-model:attr-script-language-5><a href=obsolete.html#attr-script-language>language</a></code> attribute is never
    conforming, and is always ignored if there is a <code id=script-processing-model:attr-script-type-6><a href=#attr-script-type>type</a></code>
    attribute present.</p>

    <p>Determine <a href=#concept-script-type id=script-processing-model:concept-script-type>the script's type</a> as follows:</p>

    <ul><li>If <var>the script block's type string</var> is an <a id=script-processing-model:ascii-case-insensitive href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a>
     match for any <a href=#javascript-mime-type id=script-processing-model:javascript-mime-type>JavaScript MIME type</a>, <a href=#concept-script-type id=script-processing-model:concept-script-type-2>the
     script's type</a> is "<code>classic</code>".</li><li>If <var>the script block's type string</var> is an <a id=script-processing-model:ascii-case-insensitive-2 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a>
     match for the string "<code>module</code>", <a href=#concept-script-type id=script-processing-model:concept-script-type-3>the
     script's type</a> is "<code>module</code>".</li><li>If neither of the above conditions are true, then return. No script is executed.</li></ul>

   </li><li>

    <p>If <var>was-parser-inserted</var> is true, then flag the element as
    <a href=#parser-inserted id=script-processing-model:parser-inserted-5>"parser-inserted"</a> again, and set the element's <a href=#non-blocking id=script-processing-model:non-blocking-4>"non-blocking"</a> flag to
    false.</p>

   </li><li id=script-processing-start>

    <p>Set the element's <a href=#already-started id=script-processing-model:already-started-2>"already started"</a> flag.</p>

   </li><li>

    <p>If the element is flagged as <a href=#parser-inserted id=script-processing-model:parser-inserted-6>"parser-inserted"</a>, but the element's
    <a id=script-processing-model:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> is not the <code id=script-processing-model:document><a href=dom.html#document>Document</a></code> of the parser that created the
    element, then return.</p>

   </li><li id=script-processing-noscript>

    <p>If <a href=webappapis.html#concept-n-noscript id=script-processing-model:concept-n-noscript>scripting is disabled</a> for the <code id=script-processing-model:the-script-element-28><a href=#the-script-element>script</a></code>
    element, then return. The script is not executed.</p>

    <p class=note>The definition of <a href=webappapis.html#concept-n-noscript id=script-processing-model:concept-n-noscript-2>scripting is disabled</a>
    means that, amongst others, the following scripts will not execute: scripts in
    <code id=script-processing-model:xmlhttprequest><a data-x-internal=xmlhttprequest href=https://triple-underscore.github.io/XHR-ja.html#xmlhttprequest>XMLHttpRequest</a></code>'s <code id=script-processing-model:dom-xmlhttprequest-responsexml><a data-x-internal=dom-xmlhttprequest-responsexml href=https://triple-underscore.github.io/XHR-ja.html#dom-xmlhttprequest-responsexml>responseXML</a></code>
    documents, scripts in <code id=script-processing-model:domparser><a data-x-internal=domparser href=https://w3c.github.io/DOM-Parsing/#the-domparser-interface>DOMParser</a></code>-created documents, scripts in documents created by
    <code id=script-processing-model:xsltprocessor><a href=infrastructure.html#xsltprocessor>XSLTProcessor</a></code>'s <code id=script-processing-model:dom-xsltprocessor-transformtodocument><a href=infrastructure.html#dom-xsltprocessor-transformtodocument>transformToDocument</a></code> feature, and scripts
    that are first inserted by a script into a <code id=script-processing-model:document-2><a href=dom.html#document>Document</a></code> that was created using the
    <code id=script-processing-model:dom-domimplementation-createdocument><a data-x-internal=dom-domimplementation-createdocument href=https://triple-underscore.github.io/DOM4-ja.htmlcreatedocument>createDocument()</a></code> API. <a href=references.html#refsXHR>[XHR]</a>
    <a href=references.html#refsDOMPARSING>[DOMPARSING]</a> <a href=references.html#refsXSLTP>[XSLTP]</a> <a href=references.html#refsDOM>[DOM]</a></p>


   </li><li>

   <p>If the <code id=script-processing-model:the-script-element-29><a href=#the-script-element>script</a></code> element has a <code id=script-processing-model:attr-script-nomodule><a href=#attr-script-nomodule>nomodule</a></code>
   content attribute and <a href=#concept-script-type id=script-processing-model:concept-script-type-4>the script's type</a> is "<code>classic</code>", then return. The script is not executed.</p>

   <p class=note>This means specifying <code id=script-processing-model:attr-script-nomodule-2><a href=#attr-script-nomodule>nomodule</a></code> on a
   <a id=script-processing-model:module-script href=webappapis.html#module-script>module script</a> has no effect; the algorithm continues onward.</p>

   </li><li id=script-processing-csp><p>If the <code id=script-processing-model:the-script-element-30><a href=#the-script-element>script</a></code> element does not have a <code id=script-processing-model:attr-script-src-4><a href=#attr-script-src>src</a></code> content attribute, and the <a id="script-processing-model:should-element's-inline-behavior-be-blocked-by-content-security-policy" href=https://triple-underscore.github.io/CSP3-ja.html#should-block-inline data-x-internal="should-element's-inline-behavior-be-blocked-by-content-security-policy">Should element's inline
   behavior be blocked by Content Security Policy?</a> algorithm returns "<code>Blocked</code>" when executed upon the <code id=script-processing-model:the-script-element-31><a href=#the-script-element>script</a></code> element, "<code>script</code>", and the <code id=script-processing-model:the-script-element-32><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:child-text-content href=https://dom.spec.whatwg.org/#concept-child-text-content data-x-internal=child-text-content>child text content</a>,
   then return. The script is not executed. <a href=references.html#refsCSP>[CSP]</a></li><li id=script-processing-for>

    <p>If the <code id=script-processing-model:the-script-element-33><a href=#the-script-element>script</a></code> element has an <code id=script-processing-model:attr-script-event><a href=obsolete.html#attr-script-event>event</a></code>
    attribute and a <code id=script-processing-model:attr-script-for><a href=obsolete.html#attr-script-for>for</a></code> attribute, and <a href=#concept-script-type id=script-processing-model:concept-script-type-5>the script's type</a> is "<code>classic</code>",
    then:</p>

    <ol><li><p>Let <var>for</var> be the value of the <code id=script-processing-model:attr-script-for-2><a href=obsolete.html#attr-script-for>for</a></code>
     attribute.</li><li><p>Let <var>event</var> be the value of the <code id=script-processing-model:attr-script-event-2><a href=obsolete.html#attr-script-event>event</a></code> attribute.</li><li><p><a id=script-processing-model:strip-leading-and-trailing-ascii-whitespace-2 href=https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>Strip leading and trailing ASCII whitespace</a> from <var>event</var> and
     <var>for</var>.</li><li><p>If <var>for</var> is not an <a id=script-processing-model:ascii-case-insensitive-3 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for the
     string "<code>window</code>", then return. The script is not executed.</li><li><p>If <var>event</var> is not an <a id=script-processing-model:ascii-case-insensitive-4 href=https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for
     either the string "<code>onload</code>" or the string "<code>onload()</code>", then return. The script is not executed.</li></ol>

   </li><li id=script-processing-encoding>

    <p>If the <code id=script-processing-model:the-script-element-34><a href=#the-script-element>script</a></code> element has a <code id=script-processing-model:attr-script-charset><a href=obsolete.html#attr-script-charset>charset</a></code>
    attribute, then let <var>encoding</var> be the result of <a id=script-processing-model:getting-an-encoding href=https://triple-underscore.github.io/Encoding-ja.html#concept-encoding-get data-x-internal=getting-an-encoding>getting an encoding</a> from
    the value of the <code id=script-processing-model:attr-script-charset-2><a href=obsolete.html#attr-script-charset>charset</a></code> attribute.</p>

    <p>If the <code id=script-processing-model:the-script-element-35><a href=#the-script-element>script</a></code> element does not have a <code id=script-processing-model:attr-script-charset-3><a href=obsolete.html#attr-script-charset>charset</a></code> attribute, or if <a id=script-processing-model:getting-an-encoding-2 href=https://triple-underscore.github.io/Encoding-ja.html#concept-encoding-get data-x-internal=getting-an-encoding>getting an encoding</a>
    failed, let <var>encoding</var> be the same as <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-document-encoding id="script-processing-model:document's-character-encoding" data-x-internal="document's-character-encoding">the
    encoding</a> of the <code id=script-processing-model:the-script-element-36><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:node-document-3 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>.</p>

    <p class=note>If <a href=#concept-script-type id=script-processing-model:concept-script-type-6>the script's type</a> is "<code>module</code>", this encoding will be ignored.</p>

   </li><li><p>Let <var>CORS setting</var> be the current state of the element's <code id=script-processing-model:attr-script-crossorigin><a href=#attr-script-crossorigin>crossorigin</a></code> content attribute.</li><li>
    <p>Let <var>module script credentials mode</var> be determined by switching on <var>CORS
    setting</var>:</p>

    <dl class=switch><dt><a href=urls-and-fetching.html#attr-crossorigin-none id=script-processing-model:attr-crossorigin-none>No CORS</a><dd>"<code>omit</code>"<dt><a href=urls-and-fetching.html#attr-crossorigin-anonymous id=script-processing-model:attr-crossorigin-anonymous>Anonymous</a><dd>"<code>same-origin</code>"<dt><a href=urls-and-fetching.html#attr-crossorigin-none id=script-processing-model:attr-crossorigin-none-2>Use Credentials</a><dd>"<code>include</code>"</dl>
   </li><li><p>Let <var>cryptographic nonce</var> be the element's <a id=script-processing-model:cryptographicnonce href=urls-and-fetching.html#cryptographicnonce>[[CryptographicNonce]]</a>
   internal slot's value.</li><li>

    <p>If the <code id=script-processing-model:the-script-element-37><a href=#the-script-element>script</a></code> element has an <code id=script-processing-model:attr-script-integrity><a href=#attr-script-integrity>integrity</a></code> attribute, then let <var>integrity
    metadata</var> be that attribute's value.</p>

    <p>Otherwise, let <var>integrity metadata</var> be the empty string.</p>

   </li><li><p>Let <var>parser metadata</var> be "<code>parser-inserted</code>" if the
   <code id=script-processing-model:the-script-element-38><a href=#the-script-element>script</a></code> element has been flagged as <a href=#parser-inserted id=script-processing-model:parser-inserted-7>"parser-inserted"</a>, and
   "<code>not-parser-inserted</code>" otherwise.</li><li><p>Let <var>options</var> be a <a id=script-processing-model:script-fetch-options href=webappapis.html#script-fetch-options>script fetch options</a> whose <a href=webappapis.html#concept-script-fetch-options-nonce id=script-processing-model:concept-script-fetch-options-nonce>cryptographic nonce</a> is <var>cryptographic
   nonce</var>, <a href=webappapis.html#concept-script-fetch-options-integrity id=script-processing-model:concept-script-fetch-options-integrity>integrity metadata</a> is
   <var>integrity metadata</var>, <a href=webappapis.html#concept-script-fetch-options-parser id=script-processing-model:concept-script-fetch-options-parser>parser
   metadata</a> is <var>parser metadata</var>, and <a href=webappapis.html#concept-script-fetch-options-credentials id=script-processing-model:concept-script-fetch-options-credentials>credentials mode</a> is <var>module script
   credentials mode</var>.</p>

   </li><li><p>Let <var>settings object</var> be the element's <a id=script-processing-model:node-document-4 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s
   <code id=script-processing-model:window><a href=window-object.html#window>Window</a></code> object's <a id=script-processing-model:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>.</li><li id=script-processing-src-prepare>

    <p>If the element has a <code id=script-processing-model:attr-script-src-5><a href=#attr-script-src>src</a></code> content attribute, then:</p>

    <ol><li><p>Let <var>src</var> be the value of the element's <code id=script-processing-model:attr-script-src-6><a href=#attr-script-src>src</a></code> attribute.</li><li><p>If <var>src</var> is the empty string, <a id=script-processing-model:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=script-processing-model:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=script-processing-model:event-error><a href=indices.html#event-error>error</a></code>
     at the element, and return.</li><li><p>Set the element's <a href=#concept-script-external id=script-processing-model:concept-script-external>from an external file</a>
     flag.</li><li><p><a href=urls-and-fetching.html#parse-a-url id=script-processing-model:parse-a-url>Parse</a> <var>src</var> relative to the element's
     <a id=script-processing-model:node-document-5 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>.</li><li><p>If the previous step failed, <a id=script-processing-model:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=script-processing-model:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named <code id=script-processing-model:event-error-2><a href=indices.html#event-error>error</a></code>
     at the element, and return. Otherwise, let <var>url</var> be the <a id=script-processing-model:resulting-url-record href=urls-and-fetching.html#resulting-url-record>resulting URL
     record</a>.</li><li>
      <p>Switch on <a href=#concept-script-type id=script-processing-model:concept-script-type-7>the script's type</a>:</p>

      <dl class=switch><dt>"<code>classic</code>"<dd>
        <p><a id=script-processing-model:fetch-a-classic-script href=webappapis.html#fetch-a-classic-script>Fetch a classic script</a> given <var>url</var>, <var>settings object</var>,
        <var>options</var>, <var>CORS setting</var>, and <var>encoding</var>.</p>
       <dt>"<code>module</code>"<dd>
        <p><a id=script-processing-model:fetch-a-module-script-tree href=webappapis.html#fetch-a-module-script-tree>Fetch a module script graph</a> given <var>url</var>, <var>settings
        object</var>, "<code>script</code>", and <var>options</var>.</p>
       </dl>

      <p>When the chosen algorithm asynchronously completes, set <a href=#concept-script-script id=script-processing-model:concept-script-script>the script's script</a> to the result. At that time,
      <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-2>the script is ready</a>.</p>

      <p>For performance reasons, user agents may start fetching the classic script or module graph
      (as defined above) as soon as the <code id=script-processing-model:attr-script-src-7><a href=#attr-script-src>src</a></code> attribute is set,
      instead, in the hope that the element will be inserted into the document (and that the <code id=script-processing-model:attr-script-crossorigin-2><a href=#attr-script-crossorigin>crossorigin</a></code> attribute won't change value in the
      meantime). Either way, once the element is <a href=infrastructure.html#insert-an-element-into-a-document id=script-processing-model:insert-an-element-into-a-document>inserted into the document</a>, the load must have started as described in this
      step. If the UA performs such prefetching, but the element is never inserted in the document,
      or the <code id=script-processing-model:attr-script-src-8><a href=#attr-script-src>src</a></code> attribute is dynamically changed, or the <code id=script-processing-model:attr-script-crossorigin-3><a href=#attr-script-crossorigin>crossorigin</a></code> attribute is dynamically changed, then the
      user agent will not execute the script so obtained, and the fetching process will have been
      effectively wasted.</p>

     </li></ol>

   </li><li id=establish-script-block-source>

    <p>If the element does not have a <code id=script-processing-model:attr-script-src-9><a href=#attr-script-src>src</a></code> content attribute,
    run these substeps:</p>

    <ol><li><p>Let <var>source text</var> be the value of the <code id=script-processing-model:dom-script-text><a href=#dom-script-text>text</a></code> IDL attribute.</li><li><p>Let <var>base URL</var> be the <code id=script-processing-model:the-script-element-39><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:node-document-6 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node
     document</a>'s <a id=script-processing-model:document-base-url href=urls-and-fetching.html#document-base-url>document base URL</a>.</li><li>
      <p>Switch on <a href=#concept-script-type id=script-processing-model:concept-script-type-8>the script's type</a>:</p>

      <dl class=switch><dt>"<code>classic</code>"<dd>
        <ol><li><p>Let <var>script</var> be the result of <a id=script-processing-model:creating-a-classic-script href=webappapis.html#creating-a-classic-script>creating a classic script</a> using
         <var>source text</var>, <var>settings object</var>, <var>base URL</var>, and
         <var>options</var>.</li><li><p>Set <a href=#concept-script-script id=script-processing-model:concept-script-script-2>the script's script</a> to
         <var>script</var>.</li><li><p><a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-3>The script is ready</a>.</li></ol>
       <dt>"<code>module</code>"<dd>
        <ol><li><p>Let <var>script</var> be the result of <a id=script-processing-model:creating-a-module-script href=webappapis.html#creating-a-module-script>creating a module script</a> using
         <var>source text</var>, <var>settings object</var>, <var>base URL</var>, and
         <var>options</var>.</li><li><p>If this returns null, set <a href=#concept-script-script id=script-processing-model:concept-script-script-3>the script's
         script</a> to null and abort these substeps; <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-4>the script is ready</a>.</li><li><p><a href=webappapis.html#fetch-the-descendants-of-and-instantiate-a-module-script id=script-processing-model:fetch-the-descendants-of-and-instantiate-a-module-script>Fetch the
         descendants of and instantiate</a> <var>script</var>, given the destination "<code>script</code>". When this asynchronously completes, set <a href=#concept-script-script id=script-processing-model:concept-script-script-4>the script's script</a> to the result. At that time,
         <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-5>the script is ready</a>.</li></ol>
       </dl>
     </li></ol>
   </li><li>

    <p>Then, follow the first of the following options that describes the situation:</p>

    <dl class=switch><dt id=script-processing-defer>If <a href=#concept-script-type id=script-processing-model:concept-script-type-9>the script's
     type</a> is "<code>classic</code>", and the element has a <code id=script-processing-model:attr-script-src-10><a href=#attr-script-src>src</a></code> attribute, and the element has a <code id=script-processing-model:attr-script-defer><a href=#attr-script-defer>defer</a></code> attribute, and the element has been flagged as
     <a href=#parser-inserted id=script-processing-model:parser-inserted-8>"parser-inserted"</a>, and the element does not have an <code id=script-processing-model:attr-script-async-4><a href=#attr-script-async>async</a></code> attribute<dt id=script-processing-module-noasync-parser-inserted>If <a href=#concept-script-type id=script-processing-model:concept-script-type-10>the script's type</a> is "<code>module</code>", and
     the element has been flagged as <a href=#parser-inserted id=script-processing-model:parser-inserted-9>"parser-inserted"</a>, and the element does not have
     an <code id=script-processing-model:attr-script-async-5><a href=#attr-script-async>async</a></code> attribute<dd>

      <p>Add the element to the end of the <dfn id=list-of-scripts-that-will-execute-when-the-document-has-finished-parsing>list of scripts that will execute when the document
      has finished parsing</dfn> associated with the <code id=script-processing-model:document-3><a href=dom.html#document>Document</a></code> of the parser that
      created the element.</p>

      <p>When <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-6>the script is ready</a>, set the element's <a href=#ready-to-be-parser-executed id=script-processing-model:ready-to-be-parser-executed>"ready to be
      parser-executed"</a> flag. The parser will handle executing the script.</p>

     <dt id=script-processing-parser-inserted>If <a href=#concept-script-type id=script-processing-model:concept-script-type-11>the script's
     type</a> is "<code>classic</code>", and the element has a <code id=script-processing-model:attr-script-src-11><a href=#attr-script-src>src</a></code> attribute, and the element has been flagged as
     <a href=#parser-inserted id=script-processing-model:parser-inserted-10>"parser-inserted"</a>, and the element does not have an <code id=script-processing-model:attr-script-async-6><a href=#attr-script-async>async</a></code> attribute<dd>

      <p>The element is the <a href=#pending-parsing-blocking-script id=script-processing-model:pending-parsing-blocking-script>pending parsing-blocking script</a> of the
      <code id=script-processing-model:document-4><a href=dom.html#document>Document</a></code> of the parser that created the element. (There can only be one such
      script per <code id=script-processing-model:document-5><a href=dom.html#document>Document</a></code> at a time.)</p>

      <p>When <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-7>the script is ready</a>, set the element's <a href=#ready-to-be-parser-executed id=script-processing-model:ready-to-be-parser-executed-2>"ready to be
      parser-executed"</a> flag. The parser will handle executing the script.</p>

     <dt id=script-processing-src-sync>If <a href=#concept-script-type id=script-processing-model:concept-script-type-12>the script's
     type</a> is "<code>classic</code>", and the element has a <code id=script-processing-model:attr-script-src-12><a href=#attr-script-src>src</a></code> attribute, and the element does not have an <code id=script-processing-model:attr-script-async-7><a href=#attr-script-async>async</a></code> attribute, and the element does not have the
     <a href=#non-blocking id=script-processing-model:non-blocking-5>"non-blocking"</a> flag set<dt id=script-processing-module-noasync>If <a href=#concept-script-type id=script-processing-model:concept-script-type-13>the script's
     type</a> is "<code>module</code>", and the element does not have an <code id=script-processing-model:attr-script-async-8><a href=#attr-script-async>async</a></code> attribute, and the element does not have the
     <a href=#non-blocking id=script-processing-model:non-blocking-6>"non-blocking"</a> flag set<dd>

      <p>Add the element to the end of the <dfn id=list-of-scripts-that-will-execute-in-order-as-soon-as-possible>list of scripts that will execute in order as soon
      as possible</dfn> associated with the <a id=script-processing-model:node-document-7 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> of the <code id=script-processing-model:the-script-element-40><a href=#the-script-element>script</a></code>
      element at the time the <a href=#prepare-a-script id=script-processing-model:prepare-a-script-5>prepare a script</a> algorithm started.</p>

      <p>When <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-8>the script is ready</a>, run the following steps:</p>

      <ol><li><p>If the element is not now the first element in the <a href=#list-of-scripts-that-will-execute-in-order-as-soon-as-possible id=script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible>list of scripts that will
       execute in order as soon as possible</a> to which it was added above, then mark the
       element as ready but return without executing the script yet.</li><li><p><i>Execution</i>: <a href=#execute-the-script-block id=script-processing-model:execute-the-script-block>Execute the script block</a> corresponding to the first
       script element in this <a href=#list-of-scripts-that-will-execute-in-order-as-soon-as-possible id=script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-2>list of scripts that will execute in order as soon as
       possible</a>.</li><li><p>Remove the first element from this <a href=#list-of-scripts-that-will-execute-in-order-as-soon-as-possible id=script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-3>list of scripts that will execute in order as
       soon as possible</a>.</li><li><p>If this <a href=#list-of-scripts-that-will-execute-in-order-as-soon-as-possible id=script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-4>list of scripts that will execute in order as soon as possible</a> is
       still not empty and the first entry has already been marked as ready, then jump back to the
       step labeled <i>execution</i>.</li></ol>

     <dt id=script-processing-src>If <a href=#concept-script-type id=script-processing-model:concept-script-type-14>the script's type</a>
     is "<code>classic</code>", and the element has a <code id=script-processing-model:attr-script-src-13><a href=#attr-script-src>src</a></code> attribute<dt id=script-processing-module-async>If <a href=#concept-script-type id=script-processing-model:concept-script-type-15>the script's
     type</a> is "<code>module</code>"<dd>

      <p>The element must be added to the <dfn id=set-of-scripts-that-will-execute-as-soon-as-possible>set of scripts that will execute as soon as
      possible</dfn> of the <a id=script-processing-model:node-document-8 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> of the <code id=script-processing-model:the-script-element-41><a href=#the-script-element>script</a></code> element at the
      time the <a href=#prepare-a-script id=script-processing-model:prepare-a-script-6>prepare a script</a> algorithm started.</p>

      <p>When <a href=#the-script-is-ready id=script-processing-model:the-script-is-ready-9>the script is ready</a>, <a href=#execute-the-script-block id=script-processing-model:execute-the-script-block-2>execute the script block</a> and then
      remove the element from the <a href=#set-of-scripts-that-will-execute-as-soon-as-possible id=script-processing-model:set-of-scripts-that-will-execute-as-soon-as-possible>set of scripts that will execute as soon as
      possible</a>.</p>

     <dt id=script-processing-style-delayed>If the element does not have a <code id=script-processing-model:attr-script-src-14><a href=#attr-script-src>src</a></code> attribute, and the element has been flagged as
     <a href=#parser-inserted id=script-processing-model:parser-inserted-11>"parser-inserted"</a>, and either the parser that created the <code id=script-processing-model:the-script-element-42><a href=#the-script-element>script</a></code> is
     an <a id=script-processing-model:xml-parser-3 href=xhtml.html#xml-parser>XML parser</a> or it's an <a id=script-processing-model:html-parser-3 href=parsing.html#html-parser>HTML parser</a> whose <a id=script-processing-model:script-nesting-level href=parsing.html#script-nesting-level>script nesting
     level</a> is not greater than one, and the <code id=script-processing-model:document-6><a href=dom.html#document>Document</a></code> of the <a id=script-processing-model:html-parser-4 href=parsing.html#html-parser>HTML
     parser</a> or <a id=script-processing-model:xml-parser-4 href=xhtml.html#xml-parser>XML parser</a> that created the <code id=script-processing-model:the-script-element-43><a href=#the-script-element>script</a></code> element <a id=script-processing-model:has-a-style-sheet-that-is-blocking-scripts href=semantics.html#has-a-style-sheet-that-is-blocking-scripts>has
     a style sheet that is blocking scripts</a><dd>

      <p>The element is the <a href=#pending-parsing-blocking-script id=script-processing-model:pending-parsing-blocking-script-2>pending parsing-blocking script</a> of the
      <code id=script-processing-model:document-7><a href=dom.html#document>Document</a></code> of the parser that created the element. (There can only be one such
      script per <code id=script-processing-model:document-8><a href=dom.html#document>Document</a></code> at a time.)</p>

      <p>Set the element's <a href=#ready-to-be-parser-executed id=script-processing-model:ready-to-be-parser-executed-3>"ready to be parser-executed"</a> flag. The parser will handle
      executing the script.</p>

     <dt id=script-processing-inline>そうでなければ<dd><a id=script-processing-model:immediately-2 href=infrastructure.html#immediately>Immediately</a> <a href=#execute-the-script-block id=script-processing-model:execute-the-script-block-3>execute the script block</a>, even if other scripts are
     already executing.</dl>

   </li></ol>

  <p>The <dfn id=pending-parsing-blocking-script>pending parsing-blocking script</dfn> of a <code id=script-processing-model:document-9><a href=dom.html#document>Document</a></code> is used by the
  <code id=script-processing-model:document-10><a href=dom.html#document>Document</a></code>'s parser(s).</p>

  <p class=note>If a <code id=script-processing-model:the-script-element-44><a href=#the-script-element>script</a></code> element that blocks a parser gets moved to another
  <code id=script-processing-model:document-11><a href=dom.html#document>Document</a></code> before it would normally have stopped blocking that parser, it nonetheless
  continues blocking that parser until the condition that causes it to be blocking the parser no
  longer applies (e.g. if the script is a <a href=#pending-parsing-blocking-script id=script-processing-model:pending-parsing-blocking-script-3>pending parsing-blocking script</a> because there
  was <a id=script-processing-model:a-style-sheet-that-is-blocking-scripts href=semantics.html#a-style-sheet-that-is-blocking-scripts>a style sheet that is blocking scripts</a> when it was parsed, but then the script is
  moved to another <code id=script-processing-model:document-12><a href=dom.html#document>Document</a></code> before the style sheet loads, the script still blocks the
  parser until the style sheets are all loaded, at which time the script executes and the parser is
  unblocked).</p>

  

  <p>When the user agent is required to <dfn id=execute-the-script-block>execute a script
  block</dfn>, it must run the following steps.</p>

  <ol><li>

    <p>If the element is flagged as <a href=#parser-inserted id=script-processing-model:parser-inserted-12>"parser-inserted"</a>, but the element's
    <a id=script-processing-model:node-document-9 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> is not the <code id=script-processing-model:document-13><a href=dom.html#document>Document</a></code> of the parser that created the element,
    then return.</p>

   </li><li>

    <p>If <a href=#concept-script-script id=script-processing-model:concept-script-script-5>the script's script</a> is null, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=script-processing-model:concept-event-fire-3 data-x-internal=concept-event-fire>fire an event</a> named <code id=script-processing-model:event-error-3><a href=indices.html#event-error>error</a></code>
    at the element, and return.</p>

   </li><li>

    <p>If the script is <a href=#concept-script-external id=script-processing-model:concept-script-external-2>from an external file</a>, or
    <a href=#concept-script-type id=script-processing-model:concept-script-type-16>the script's type</a> is "<code>module</code>",
    then increment the <a id=script-processing-model:ignore-destructive-writes-counter href=dynamic-markup-insertion.html#ignore-destructive-writes-counter>ignore-destructive-writes counter</a> of the <code id=script-processing-model:the-script-element-45><a href=#the-script-element>script</a></code>
    element's <a id=script-processing-model:node-document-10 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>. Let <var>neutralized doc</var> be that
    <code id=script-processing-model:document-14><a href=dom.html#document>Document</a></code>.</p>

   </li><li>

    <p>Let <var>old script element</var> be the value to which the <code id=script-processing-model:the-script-element-46><a href=#the-script-element>script</a></code>
    element's <a id=script-processing-model:node-document-11 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=script-processing-model:dom-document-currentscript><a href=dom.html#dom-document-currentscript>currentScript</a></code> object was most recently
    set.</p>

   </li><li>

    <p>Switch on <a href=#concept-script-type id=script-processing-model:concept-script-type-17>the script's type</a>:</p>

    <dl class=switch><dt>"<code>classic</code>"<dd>
      <ol><li>
        <p>If the <code id=script-processing-model:the-script-element-47><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:root href=https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root data-x-internal=root>root</a> is <em>not</em> a <a id=script-processing-model:shadow-root href=https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-root data-x-internal=shadow-root>shadow
        root</a>, then set the <code id=script-processing-model:the-script-element-48><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:node-document-12 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=script-processing-model:dom-document-currentscript-2><a href=dom.html#dom-document-currentscript>currentScript</a></code> attribute to the
        <code id=script-processing-model:the-script-element-49><a href=#the-script-element>script</a></code> element. Otherwise, set it to null.</p>

        <p class=note>This does not use the <a id=script-processing-model:in-a-document-tree href=https://triple-underscore.github.io/DOM4-ja.html#in-a-document data-x-internal=in-a-document-tree>in a document tree</a> check, as the
        <code id=script-processing-model:the-script-element-50><a href=#the-script-element>script</a></code> element could have been removed from the document prior to execution,
        and in that scenario <code id=script-processing-model:dom-document-currentscript-3><a href=dom.html#dom-document-currentscript>currentScript</a></code> still
        needs to point to it.</p>
       </li><li><p><a href=webappapis.html#run-a-classic-script id=script-processing-model:run-a-classic-script>Run the classic script</a> given by <a href=#concept-script-script id=script-processing-model:concept-script-script-6>the script's script</a>.</li></ol>
     <dt>"<code>module</code>"<dd>
      <ol><li><p>Set the <code id=script-processing-model:the-script-element-51><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:node-document-13 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=script-processing-model:dom-document-currentscript-4><a href=dom.html#dom-document-currentscript>currentScript</a></code> attribute to null.</li><li><p><a href=webappapis.html#run-a-module-script id=script-processing-model:run-a-module-script>Run the module script</a> given by <a href=#concept-script-script id=script-processing-model:concept-script-script-7>the script's script</a>.</li></ol>
     </dl>

   </li><li>

    <p>Set the <code id=script-processing-model:the-script-element-52><a href=#the-script-element>script</a></code> element's <a id=script-processing-model:node-document-14 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=script-processing-model:dom-document-currentscript-5><a href=dom.html#dom-document-currentscript>currentScript</a></code> attribute to <var>old script
    element</var>.</p>

   </li><li>

    <p>Decrement the <a id=script-processing-model:ignore-destructive-writes-counter-2 href=dynamic-markup-insertion.html#ignore-destructive-writes-counter>ignore-destructive-writes counter</a> of <var>neutralized doc</var>, if it was incremented in the earlier step.</p>

   </li><li>

    <p>If the script is <a href=#concept-script-external id=script-processing-model:concept-script-external-3>from an external file</a>, then
    <a href=https://dom.spec.whatwg.org/#concept-event-fire id=script-processing-model:concept-event-fire-4 data-x-internal=concept-event-fire>fire an event</a> named <code id=script-processing-model:event-load><a href=indices.html#event-load>load</a></code> at the <code id=script-processing-model:the-script-element-53><a href=#the-script-element>script</a></code> element.</p>

   </li></ol>

  


  <h5 id=scriptingLanguages><span class=secno>4.12.1.2</span> スクリプト言語<a href=#scriptingLanguages class=self-link></a></h5>

  <p><dfn id=javascript-mime-type data-export="">JavaScript MIMEタイプ</dfn>は、次のいずれかである<a id=scriptingLanguages:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>の文字列であり、JavaScriptを指す<a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a>：</p>

  <ul class=brief><li><code id=scriptingLanguages:application/ecmascript><a href=indices.html#application/ecmascript>application/ecmascript</a></code>
   </li><li><code id=scriptingLanguages:application/javascript><a href=indices.html#application/javascript>application/javascript</a></code>
   </li><li><code id=scriptingLanguages:application/x-ecmascript><a href=indices.html#application/x-ecmascript>application/x-ecmascript</a></code>
   </li><li><code id=scriptingLanguages:application/x-javascript><a href=indices.html#application/x-javascript>application/x-javascript</a></code>
   </li><li><code id=scriptingLanguages:text/ecmascript><a href=indices.html#text/ecmascript>text/ecmascript</a></code>
   </li><li><code id=scriptingLanguages:text/javascript><a href=indices.html#text/javascript>text/javascript</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.0><a href=indices.html#text/javascript1.0>text/javascript1.0</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.1><a href=indices.html#text/javascript1.1>text/javascript1.1</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.2><a href=indices.html#text/javascript1.2>text/javascript1.2</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.3><a href=indices.html#text/javascript1.3>text/javascript1.3</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.4><a href=indices.html#text/javascript1.4>text/javascript1.4</a></code>
   </li><li><code id=scriptingLanguages:text/javascript1.5><a href=indices.html#text/javascript1.5>text/javascript1.5</a></code>
   </li><li><code id=scriptingLanguages:text/jscript><a href=indices.html#text/jscript>text/jscript</a></code>
   </li><li><code id=scriptingLanguages:text/livescript><a href=indices.html#text/livescript>text/livescript</a></code>
   </li><li><code id=scriptingLanguages:text/x-ecmascript><a href=indices.html#text/x-ecmascript>text/x-ecmascript</a></code>
   </li><li><code id=scriptingLanguages:text/x-javascript><a href=indices.html#text/x-javascript>text/x-javascript</a></code>
  </li></ul>

  <p>Servers should use <code id=scriptingLanguages:text/javascript-2><a href=indices.html#text/javascript>text/javascript</a></code> for JavaScript resources. Servers should not
  use other <a href=#javascript-mime-type id=scriptingLanguages:javascript-mime-type>JavaScript MIME types</a> for JavaScript
  resources, and must not use non-<a href=#javascript-mime-type id=scriptingLanguages:javascript-mime-type-2>JavaScript MIME
  types</a>.</p>

  

  <p>User agents are not required to support JavaScript. This standard needs to be updated if a
  language other than JavaScript comes along and gets similar wide adoption by web browsers. Until
  such a time, implementing other languages is in conflict with this standard, given the processing
  model defined for the <code id=scriptingLanguages:the-script-element><a href=#the-script-element>script</a></code> element.</p>

  <p>For external JavaScript resources, MIME type parameters in `<code id=scriptingLanguages:content-type><a href=urls-and-fetching.html#content-type>Content-Type</a></code>` headers
  are generally ignored. (In some cases the `<code>charset</code>` parameter has an
  effect.) However, for the <code id=scriptingLanguages:the-script-element-2><a href=#the-script-element>script</a></code> element's <code id=scriptingLanguages:attr-script-type><a href=#attr-script-type>type</a></code> attribute they are significant.</p>

  <p class=note>For example, scripts with their <code id=scriptingLanguages:attr-script-type-2><a href=#attr-script-type>type</a></code>
  attribute set to "<code>text/javascript; charset=utf-8</code>" will not be
  evaluated.</p>

  <p>Furthermore, again for external JavaScript resources, special considerations apply around
  `<code id=scriptingLanguages:content-type-2><a href=urls-and-fetching.html#content-type>Content-Type</a></code>` header processing as detailed in the <a href=#prepare-a-script id=scriptingLanguages:prepare-a-script>prepare a script</a>
  algorithm and the WHATWG Fetch standard. <a href=references.html#refsFETCH>[FETCH]</a>

  </p>


  <h5 id=restrictions-for-contents-of-script-elements><span class=secno>4.12.1.3</span> <dfn>Restrictions for contents of <code>script</code> elements</dfn><a href=#restrictions-for-contents-of-script-elements class=self-link></a></h5>

  <p class=note>この節で説明される多少奇妙な制約を回避する最も簡単で安全な方法は、以下のシーケンスが（たとえば文字列、正規表現、またはコメントなど）スクリプト内でリテラルに表示され、かつ式の中でこのような構造体を使用してコードを記述を避けるようにする際に、"<code>&lt;!--</code>"を"<code>&lt;\!--</code>"として、"<code>&lt;script</code>"を"<code>&lt;\script</code>"として、および"<code>&lt;/script</code>"を"<code>&lt;\/script</code>"として常にエスケープすることである。この節の制限がトリガーになりやすい落とし穴を回避する：すなわち、歴史的な理由のために、HTMLにおける<code id=restrictions-for-contents-of-script-elements:the-script-element><a href=#the-script-element>script</a></code>ブロックの解析は、これらのシーケンスを考えた場合に直観的でない働きをする奇妙で風変わりな慣習である。</p>

  <p><code id=restrictions-for-contents-of-script-elements:the-script-element-2><a href=#the-script-element>script</a></code>要素の<code id=restrictions-for-contents-of-script-elements:textcontent><a data-x-internal=textcontent href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-textcontent>textContent</a></code>は、Unicodeである文字セットである、以下のABNFで<code>script</code>生成物と対等でなければならない。<a href=references.html#refsABNF>[ABNF]</a></p>

  <pre>script        = outer *( comment-open inner comment-close outer )

outer         = &lt; any string that doesn't contain a substring that matches not-in-outer &gt;
not-in-outer  = comment-open
inner         = &lt; any string that doesn't contain a substring that matches not-in-inner &gt;
not-in-inner  = comment-close / script-open

comment-open  = "&lt;!--"
comment-close = "--&gt;"
script-open   = "&lt;" s c r i p t tag-end

s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T

tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION (tab)
tag-end       =/ %x000A ; U+000A LINE FEED (LF)
tag-end       =/ %x000C ; U+000C FORM FEED (FF)
tag-end       =/ %x0020 ; U+0020 SPACE
tag-end       =/ %x002F ; U+002F SOLIDUS (/)
tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)</pre>

  <p><code id=restrictions-for-contents-of-script-elements:the-script-element-3><a href=#the-script-element>script</a></code>要素が<a href=#inline-documentation-for-external-scripts id=restrictions-for-contents-of-script-elements:inline-documentation-for-external-scripts>スクリプト文書</a>を含む場合、以下の節で記述されるように、要素のコンテンツのさらなる制約がある。</p>

  <div class=example>

   <p>以下のスクリプトは、この問題を示している。このように、文字列が含まれているスクリプトがあるとする：</p>

   <pre>var example = 'Consider this string: &lt;!-- &lt;script&gt;';
console.log(example);</pre>

   <p>これが<code id=restrictions-for-contents-of-script-elements:the-script-element-4><a href=#the-script-element>script</a></code>ブロックで直接この文字列を入れていた場合、上記の制限に違反しない。</p>

   <pre>&lt;script&gt;
  var example = 'Consider this string: &lt;!-- &lt;script&gt;';
  console.log(example);
&lt;/script&gt;</pre>

   <p>しかし、より大きな問題かつ、スクリプトがそれらの制限に違反しない理由は、実際にスクリプトが奇妙に解析されるだろうということである。<em>上記のスクリプトブロックは終了していない</em>。それは、実際には依然として<code id=restrictions-for-contents-of-script-elements:the-script-element-5><a href=#the-script-element>script</a></code>ブロックの一部であるこのスニペットにおいて"<code>&lt;/script&gt;</code>"終了タグのように見えるものである。（スクリプトが終了していないため）スクリプトは実行しない。スクリプトが何らかの形で実行した場合、以下のようにマークアップが見えた場合、（ここで強調される）スクリプトが妥当なJavaScriptでないので、スクリプトは失敗するだろう：</p>

   <pre>&lt;script&gt;<mark>
  var example = 'Consider this string: &lt;!-- &lt;script&gt;';
  console.log(example);
&lt;/script&gt;
&lt;!-- despite appearances, this is actually part of the script still! --&gt;
&lt;script&gt;
 ... // this is the same script block still...
</mark>&lt;/script&gt;</pre>

   <p>ここで起こっていることはレガシーな理由のために、HTMLにおける<code id=restrictions-for-contents-of-script-elements:the-script-element-6><a href=#the-script-element>script</a></code>要素で"<code>&lt;!--</code>"および"<code>&lt;script</code>"文字列は、パーサがブロックを閉じる検討するためにバランスをとる必要がある。</p>

   <p>この節の最初に述べたように、問題の文字列をエスケープすることによって、問題は完全に回避されている：</p>

   <pre>&lt;script&gt;<mark>
  var example = 'Consider this string: &lt;\!-- &lt;\script&gt;';
  console.log(example);
</mark>&lt;/script&gt;
&lt;!-- this is just a comment between script blocks --&gt;
&lt;script&gt;<mark>
 ... // this is a new script block
</mark>&lt;/script&gt;</pre>

   <p>次の例のように、これらのシーケンスは自然にスクリプト式で出現可能である：</p>

   <pre>if (x&lt;!--y) { ... }
if ( player&lt;script ) { ... }</pre>

   <p>このような場合、文字はエスケープすることはできないが、シーケンスが発生しないように式は次のように書き換えることができる：</p>

   <pre>if (x &lt; !--y) { ... }
if (!--y &gt; x) { ... }
if (!(--y) &gt; x) { ... }
if (player &lt; script) { ... }
if (script &gt; player) { ... }</pre>

   <p>これを行うとはまた、同様に様々な落とし穴を回避する：関連する歴史的な理由のために、<a href=webappapis.html#classic-script id=restrictions-for-contents-of-script-elements:classic-script>クラシックスクリプト</a>で文字列"&lt;!--"は、"//"のように、実際には行コメントの開始として扱われる。</p>

  </div>


  <h5 id=inline-documentation-for-external-scripts><span class=secno>4.12.1.4</span> <dfn>Inline documentation for external scripts</dfn><a href=#inline-documentation-for-external-scripts class=self-link></a></h5>

  <p><code id=inline-documentation-for-external-scripts:the-script-element><a href=#the-script-element>script</a></code>要素の<code id=inline-documentation-for-external-scripts:attr-script-src><a href=#attr-script-src>src</a></code>属性が指定される場合、もしあれば、<code id=inline-documentation-for-external-scripts:the-script-element-2><a href=#the-script-element>script</a></code>要素のコンテンツは、要素のコンテンツから分割されるような<code id=inline-documentation-for-external-scripts:dom-script-text><a href=#dom-script-text>text</a></code> IDL属性値でなければならず、文字セットがUnicodeである下記のABNFで<code>documentation</code>生成物と一致しなければならない。<a href=references.html#refsABNF>[ABNF]</a></p>

  <pre>documentation = *( *( space / tab / comment ) [ line-comment ] newline )
comment       = slash star *( not-star / star not-slash ) 1*star slash
line-comment  = slash slash *not-newline

; characters
tab           = %x0009 ; U+0009 CHARACTER TABULATION (tab)
newline       = %x000A ; U+000A LINE FEED (LF)
space         = %x0020 ; U+0020 SPACE
star          = %x002A ; U+002A ASTERISK (*)
slash         = %x002F ; U+002F SOLIDUS (/)
not-newline   = %x0000-0009 / %x000B-10FFFF
                ; a <a id=inline-documentation-for-external-scripts:scalar-value href=https://triple-underscore.github.io/infra-ja.html#scalar-value data-x-internal=scalar-value>scalar value</a> other than U+000A LINE FEED (LF)
not-star      = %x0000-0029 / %x002B-10FFFF
                ; a <a id=inline-documentation-for-external-scripts:scalar-value-2 href=https://triple-underscore.github.io/infra-ja.html#scalar-value data-x-internal=scalar-value>scalar value</a> other than U+002A ASTERISK (*)
not-slash     = %x0000-002E / %x0030-10FFFF
                ; a <a id=inline-documentation-for-external-scripts:scalar-value-3 href=https://triple-underscore.github.io/infra-ja.html#scalar-value data-x-internal=scalar-value>scalar value</a> other than U+002F SOLIDUS (/)</pre>

  <p class=note>これは、JavaScriptのコメントで要素のコンテンツを設置するものと一致する。</p>

  <p class=note>この要求は、<code id=inline-documentation-for-external-scripts:the-script-element-3><a href=#the-script-element>script</a></code>要素のコンテンツの構文上に先の制約に加えて存在する。</p>

  <div class=example>

   <p>以下は、依然として外部スクリプトファイルを参照する間に文書内で、著者がライセンス情報やAPI情報のような文書を含むことを許可する。<code id=inline-documentation-for-external-scripts:attr-script-src-2><a href=#attr-script-src>src</a></code>属性を提供する一方で、偶然にも著者が有効なスクリプトのように見えるものが含まないように、構文は制約される。</p>

   <pre>&lt;script src="cool-effects.js"&gt;
 // create new instances using:
 //    var e = new Effect();
 // start the effect using .play, stop using .stop:
 //    e.play();
 //    e.stop();
&lt;/script&gt;</pre>

  </div>


  

  <h5 id=scriptTagXSLT><span class=secno>4.12.1.5</span> Interaction of <code id=scriptTagXSLT:the-script-element><a href=#the-script-element>script</a></code> elements and XSLT<a href=#scriptTagXSLT class=self-link></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>This specification does not define how XSLT interacts with the <code id=scriptTagXSLT:the-script-element-2><a href=#the-script-element>script</a></code> element.
  However, in the absence of another specification actually defining this, here are some guidelines
  for implementers, based on existing implementations:</p>

  <ul><li><p>When an XSLT transformation program is triggered by an <code><?xml-stylesheet?></code> processing instruction and the browser implements a
   direct-to-DOM transformation, <code id=scriptTagXSLT:the-script-element-3><a href=#the-script-element>script</a></code> elements created by the XSLT processor need to
   be marked <a href=#parser-inserted id=scriptTagXSLT:parser-inserted>"parser-inserted"</a> and run in document order (modulo scripts marked <code id=scriptTagXSLT:attr-script-defer><a href=#attr-script-defer>defer</a></code> or <code id=scriptTagXSLT:attr-script-async><a href=#attr-script-async>async</a></code>),
   <a id=scriptTagXSLT:immediately href=infrastructure.html#immediately>immediately</a>, as the transformation is occurring.</li><li><p>The <code id=scriptTagXSLT:dom-xsltprocessor-transformtodocument><a href=infrastructure.html#dom-xsltprocessor-transformtodocument>XSLTProcessor.transformToDocument()</a></code> method
   adds elements to a <code id=scriptTagXSLT:document><a href=dom.html#document>Document</a></code> that does not have a <a href=browsers.html#concept-document-bc id=scriptTagXSLT:concept-document-bc>browsing context</a>, and, accordingly, any <code id=scriptTagXSLT:the-script-element-4><a href=#the-script-element>script</a></code>
   elements they create need to have their <a href=#already-started id=scriptTagXSLT:already-started>"already started"</a> flag set in the
   <a href=#prepare-a-script id=scriptTagXSLT:prepare-a-script>prepare a script</a> algorithm and never get executed (<a href=webappapis.html#concept-bc-noscript id=scriptTagXSLT:concept-bc-noscript>scripting is disabled</a>). Such <code id=scriptTagXSLT:the-script-element-5><a href=#the-script-element>script</a></code> elements
   still need to be marked <a href=#parser-inserted id=scriptTagXSLT:parser-inserted-2>"parser-inserted"</a>, though, such that their <code id=scriptTagXSLT:dom-script-async><a href=#dom-script-async>async</a></code> IDL attribute will return false in the absence of an <code id=scriptTagXSLT:attr-script-async-2><a href=#attr-script-async>async</a></code> content attribute.</li><li><p>The <code id=scriptTagXSLT:dom-xsltprocessor-transformtofragment><a href=infrastructure.html#dom-xsltprocessor-transformtofragment>XSLTProcessor.transformToFragment()</a></code> method
   needs to create a fragment that is equivalent to one built manually by creating the elements
   using <code id=scriptTagXSLT:dom-document-createelementns><a data-x-internal=dom-document-createelementns href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelementns>document.createElementNS()</a></code>. For instance,
   it needs to create <code id=scriptTagXSLT:the-script-element-6><a href=#the-script-element>script</a></code> elements that aren't <a href=#parser-inserted id=scriptTagXSLT:parser-inserted-3>"parser-inserted"</a> and
   that don't have their <a href=#already-started id=scriptTagXSLT:already-started-2>"already started"</a> flag set, so that they will execute when the
   fragment is inserted into a document.</li></ul>

  <p>The main distinction between the first two cases and the last case is that the first two
  operate on <code id=scriptTagXSLT:document-2><a href=dom.html#document>Document</a></code>s and the last operates on a fragment.</p>

  



  <h4 id=the-noscript-element><span class=secno>4.12.2</span> <dfn><code>noscript</code></dfn>要素<a href=#the-noscript-element class=self-link></a></h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-noscript-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-noscript-element:metadata-content-2 href=dom.html#metadata-content-2>メタデータコンテンツ</a>。<dd><a id=the-noscript-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-noscript-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-noscript-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd>先祖<code id=the-noscript-element:the-noscript-element><a href=#the-noscript-element>noscript</a></code>要素が存在しない場合、<a href=https://triple-underscore.github.io/DOM4-ja.html#html-document id=the-noscript-element:html-documents data-x-internal=html-documents>HTML文書</a>の<code id=the-noscript-element:the-head-element><a href=semantics.html#the-head-element>head</a></code>要素内。<dd>先祖<code id=the-noscript-element:the-noscript-element-2><a href=#the-noscript-element>noscript</a></code>要素が存在しない場合、<a id=the-noscript-element:html-documents-2 href=https://triple-underscore.github.io/DOM4-ja.html#html-document data-x-internal=html-documents>HTML文書</a>で<a id=the-noscript-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-noscript-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=webappapis.html#concept-n-noscript id=the-noscript-element:concept-n-noscript>スクリプトが無効</a>の場合、<code id=the-noscript-element:the-head-element-2><a href=semantics.html#the-head-element>head</a></code>要素内で：任意の順で、0個以上の<code id=the-noscript-element:the-link-element><a href=semantics.html#the-link-element>link</a></code>要素、ゼロ個以上の<code id=the-noscript-element:the-style-element><a href=semantics.html#the-style-element>style</a></code>要素、0個以上の<code id=the-noscript-element:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code>要素。<dd><a href=webappapis.html#concept-n-noscript id=the-noscript-element:concept-n-noscript-2>スクリプトが無効</a>の場合、<code id=the-noscript-element:the-head-element-3><a href=semantics.html#the-head-element>head</a></code>要素外で：<a id=the-noscript-element:transparent href=dom.html#transparent>透過的</a>。ただし、<code id=the-noscript-element:the-noscript-element-3><a href=#the-noscript-element>noscript</a></code>要素の子孫を持ってはならない。<dd>そうでなければ：文で与えられる要件に適合するテキスト。<dt><a href=dom.html#concept-element-tag-omission id=the-noscript-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-noscript-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-noscript-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dt><a href=dom.html#concept-element-dom id=the-noscript-element:concept-element-dom>DOMインターフェイス</a>：<dd><code id=the-noscript-element:htmlelement><a href=dom.html#htmlelement>HTMLElement</a></code>を使用する。</dl>

  <p><code id=the-noscript-element:the-noscript-element-4><a href=#the-noscript-element>noscript</a></code>要素は、<a href=webappapis.html#concept-n-script id=the-noscript-element:concept-n-script>スクリプトが有効である</a>場合は何も<a id=the-noscript-element:represents href=dom.html#represents>表さ</a>ず、<a href=webappapis.html#concept-n-noscript id=the-noscript-element:concept-n-noscript-3>スクリプトが無効である</a>場合は要素の子を<a id=the-noscript-element:represents-2 href=dom.html#represents>表す</a>。これは、文書が解析される方法に影響を与えることによって、スクリプトをサポートするユーザーエージェントとサポートしないユーザーエージェントに異なるマークアップを提示するために使用される。</p>

  <p><a id=the-noscript-element:html-documents-3 href=https://triple-underscore.github.io/DOM4-ja.html#html-document data-x-internal=html-documents>HTML文書</a>で使用する場合、許可されるコンテンツモデルは次のとおり：</p>

  <dl><dt><a href=webappapis.html#concept-n-noscript id=the-noscript-element:concept-n-noscript-4>スクリプトが無効である</a>場合、<code id=the-noscript-element:the-head-element-4><a href=semantics.html#the-head-element>head</a></code>要素内の<code id=the-noscript-element:the-noscript-element-5><a href=#the-noscript-element>noscript</a></code>要素に対して<dd><p><code id=the-noscript-element:the-noscript-element-6><a href=#the-noscript-element>noscript</a></code>要素は、<code id=the-noscript-element:the-link-element-2><a href=semantics.html#the-link-element>link</a></code>、<code id=the-noscript-element:the-style-element-2><a href=semantics.html#the-style-element>style</a></code>、および<code id=the-noscript-element:the-meta-element-2><a href=semantics.html#the-meta-element>meta</a></code>要素のみを含まなければならない。<dt><a href=webappapis.html#concept-n-script id=the-noscript-element:concept-n-script-2>スクリプトが有効である</a>場合、<code id=the-noscript-element:the-head-element-5><a href=semantics.html#the-head-element>head</a></code>要素内の<code id=the-noscript-element:the-noscript-element-7><a href=#the-noscript-element>noscript</a></code>要素に対して<dd><p><code id=the-noscript-element:the-noscript-element-8><a href=#the-noscript-element>noscript</a></code>要素は、テキストのみを含まなければならない。ただし、<var id=the-noscript-element:concept-frag-parse-context><a href=parsing.html#concept-frag-parse-context>context</a></var>要素として<code id=the-noscript-element:the-noscript-element-9><a href=#the-noscript-element>noscript</a></code>要素をもつ<a id=the-noscript-element:html-fragment-parsing-algorithm href=parsing.html#html-fragment-parsing-algorithm>HTML断片解析アルゴリズム</a>を呼び出すものかつ<var>input</var>のようなテキストコンテンツが<code id=the-noscript-element:the-noscript-element-10><a href=#the-noscript-element>noscript</a></code>要素の子であった場合、<code id=the-noscript-element:the-link-element-3><a href=semantics.html#the-link-element>link</a></code>、<code id=the-noscript-element:the-style-element-3><a href=semantics.html#the-style-element>style</a></code>、<code id=the-noscript-element:the-meta-element-3><a href=semantics.html#the-meta-element>meta</a></code>要素のみからなるノードのリストをもたらさなければならない場合を除く。そして<a href=parsing.html#parse-errors id=the-noscript-element:parse-errors>解析エラー</a>でない。<dt><a href=webappapis.html#concept-n-noscript id=the-noscript-element:concept-n-noscript-5>スクリプトが無効である</a>場合、<code id=the-noscript-element:the-head-element-6><a href=semantics.html#the-head-element>head</a></code>要素外の<code id=the-noscript-element:the-noscript-element-11><a href=#the-noscript-element>noscript</a></code>要素に対して<dd><p><code id=the-noscript-element:the-noscript-element-12><a href=#the-noscript-element>noscript</a></code>要素のコンテンツモデルは<a id=the-noscript-element:transparent-2 href=dom.html#transparent>透過的</a>であり、同時に<code id=the-noscript-element:the-noscript-element-13><a href=#the-noscript-element>noscript</a></code>要素が<code id=the-noscript-element:the-noscript-element-14><a href=#the-noscript-element>noscript</a></code>要素を持ってはならない（<code id=the-noscript-element:the-noscript-element-15><a href=#the-noscript-element>noscript</a></code>要素を入れ子にできない）追加制限がある。<dt><a href=webappapis.html#concept-n-script id=the-noscript-element:concept-n-script-3>スクリプトが有効である</a>場合、<code id=the-noscript-element:the-head-element-7><a href=semantics.html#the-head-element>head</a></code>要素外の<code id=the-noscript-element:the-noscript-element-16><a href=#the-noscript-element>noscript</a></code>要素に対して<dd>

    <p><code id=the-noscript-element:the-noscript-element-17><a href=#the-noscript-element>noscript</a></code>要素はテキストのみを含まなければならない。ただしテキストは、以下のアルゴリズムが<code id=the-noscript-element:the-noscript-element-18><a href=#the-noscript-element>noscript</a></code>要素および<code id=the-noscript-element:the-script-element><a href=#the-script-element>script</a></code>要素をもたない適合文書をもたらすものでなければならず、アルゴリズムでステップは例外を投げるまたは<a id=the-noscript-element:html-parser href=parsing.html#html-parser>HTMLパーサ</a>に<a id=the-noscript-element:parse-errors-2 href=parsing.html#parse-errors>解析エラー</a>を起こさないようにしなければならない：</p>
    

    <ol><li>文書からすべての<code id=the-noscript-element:the-script-element-2><a href=#the-script-element>script</a></code>要素を取り除く。</li><li>文書においてすべての<code id=the-noscript-element:the-noscript-element-19><a href=#the-noscript-element>noscript</a></code>要素のリストを作る。そのリストの各<code id=the-noscript-element:the-noscript-element-20><a href=#the-noscript-element>noscript</a></code>要素に対して、以下のステップを実行する：

      <ol><li><var>s</var>を<code id=the-noscript-element:the-noscript-element-21><a href=#the-noscript-element>noscript</a></code>要素要素の<a id=the-noscript-element:child-text-content href=https://dom.spec.whatwg.org/#concept-child-text-content data-x-internal=child-text-content>子テキストコンテンツ</a>とする。</li><li><code id=the-noscript-element:the-noscript-element-22><a href=#the-noscript-element>noscript</a></code>要素の<code id=the-noscript-element:dom-outerhtml><a data-x-internal=dom-outerhtml href=https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml>outerHTML</a></code>属性を<var>s</var>の値に設定する。（これは、副作用として<code id=the-noscript-element:the-noscript-element-23><a href=#the-noscript-element>noscript</a></code>要素を文書から除去させる。）<a href=references.html#refsDOMPARSING>[DOMPARSING]</a></li></ol>

     </li></ol>

   </dl>

  <p class=note>歴史的な理由により、パーサが呼び出されたときに<a href=parsing.html#scripting-flag id=the-noscript-element:scripting-flag>スクリプトが有効にされたかどうか</a>に基づく<a id=the-noscript-element:html-parser-2 href=parsing.html#html-parser>HTMLパーサ</a>によって<code id=the-noscript-element:the-noscript-element-24><a href=#the-noscript-element>noscript</a></code>要素が異なる方法で処理されるので、これらのすべてのこじつけが必要とされる。</p>

  <p><code id=the-noscript-element:the-noscript-element-25><a href=#the-noscript-element>noscript</a></code>は<a id=the-noscript-element:xml-documents href=https://triple-underscore.github.io/DOM4-ja.html#xml-document data-x-internal=xml-documents>XML文書</a>で使用してはならない。</p>

  <p class=note><code id=the-noscript-element:the-noscript-element-26><a href=#the-noscript-element>noscript</a></code>要素は<a id=the-noscript-element:syntax href=syntax.html#syntax>HTML構文</a>でのみ有効だが、<a id=the-noscript-element:the-xhtml-syntax href=xhtml.html#the-xhtml-syntax>XML構文</a>では効果がない。スクリプトが有効である場合、この要素が動作する方法は、基本的にパーサを"オフ"にすることであり、要素の内容は、実際の要素としてではなく純粋にテキストとして扱われているのである。XMLは、これを実行するためのメカニズムを定義しない。</p>

  

  <p>The <code id=the-noscript-element:the-noscript-element-27><a href=#the-noscript-element>noscript</a></code> element has no other requirements. In particular, children of the
  <code id=the-noscript-element:the-noscript-element-28><a href=#the-noscript-element>noscript</a></code> element are not exempt from <a id=the-noscript-element:form-submission-2 href=form-control-infrastructure.html#form-submission-2>form submission</a>, scripting, and so
  forth, even when <a href=webappapis.html#concept-n-script id=the-noscript-element:concept-n-script-4>scripting is enabled</a> for the element.</p>

  

  <div class=example>

   <p>次の例において、<code id=the-noscript-element:the-noscript-element-29><a href=#the-noscript-element>noscript</a></code>要素は、スクリプトのフォールバックを提供するために使用される。</p>

   <pre>&lt;form action="calcSquare.php"&gt;
 &lt;p&gt;
  &lt;label for=x&gt;Number&lt;/label&gt;:
  &lt;input id="x" name="x" type="number"&gt;
 &lt;/p&gt;
 &lt;script&gt;
  var x = document.getElementById('x');
  var output = document.createElement('p');
  output.textContent = 'Type a number; it will be squared right then!';
  x.form.appendChild(output);
  x.form.onsubmit = function () { return false; }
  x.oninput = function () {
    var v = x.valueAsNumber;
    output.textContent = v + ' squared is ' + v * v;
  };
 &lt;/script&gt;
 &lt;noscript&gt;
  &lt;input type=submit value="Calculate Square"&gt;
 &lt;/noscript&gt;
&lt;/form&gt;</pre>

   <p>スクリプトが無効である場合、ボタンは、サーバー側で計算を行うために表示される。スクリプトが有効である場合、代わりに値がその場で計算される。</p>

   <p><code id=the-noscript-element:the-noscript-element-30><a href=#the-noscript-element>noscript</a></code>要素は鈍器である。時には、スクリプトを有効にするかもしれないが、何らかの理由でページのスクリプトが失敗するかもしれない。このような理由から、次の例のように、<code id=the-noscript-element:the-noscript-element-31><a href=#the-noscript-element>noscript</a></code>要素の使用を避ける代わりに、その場でスクリプトのないページからスクリプト化されたページにページを変更するスクリプトを設計することが一般により良い：</p>

   <pre>&lt;form action="calcSquare.php"&gt;
 &lt;p&gt;
  &lt;label for=x&gt;Number&lt;/label&gt;:
  &lt;input id="x" name="x" type="number"&gt;
 &lt;/p&gt;
 <strong>&lt;input id="submit" type=submit value="Calculate Square"&gt;</strong>
 &lt;script&gt;
  var x = document.getElementById('x');
  var output = document.createElement('p');
  output.textContent = 'Type a number; it will be squared right then!';
  x.form.appendChild(output);
  x.form.onsubmit = function () { return false; }
  x.oninput = function () {
    var v = x.valueAsNumber;
    output.textContent = v + ' squared is ' + v * v;
  };
<strong>  var submit = document.getElementById('submit');
  submit.parentNode.removeChild(submit);</strong>
 &lt;/script&gt;
&lt;/form&gt;</pre>

   <p>上記の手法は、<code id=the-noscript-element:the-noscript-element-32><a href=#the-noscript-element>noscript</a></code>が許可されていないため、<a id=the-noscript-element:xml-documents-2 href=https://triple-underscore.github.io/DOM4-ja.html#xml-document data-x-internal=xml-documents>XML文書</a>でも役に立つ。</p>

  </div>


  <h4 id=the-template-element><span class=secno>4.12.3</span> <dfn><code>template</code></dfn>要素<a href=#the-template-element class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> template<span class="and_chr yes"><span>Chrome for Android</span> <span>62+</span></span><span class="chrome yes"><span>Chrome</span> <span>35+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>9.0+</span></span><span class="firefox yes"><span>Firefox</span> <span>22+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>9+</span></span><span class="edge partial"><span>Edge (limited)</span> <span>13+</span></span><span class="android yes"><span>Android Browser</span> <span>4.4+</span></span><span class="opera yes"><span>Opera</span> <span>22+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=template">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-template-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-template-element:metadata-content-2 href=dom.html#metadata-content-2>メタデータコンテンツ</a>。<dd><a id=the-template-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-template-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a href=dom.html#script-supporting-elements-2 id=the-template-element:script-supporting-elements-2>スクリプトサポート要素</a>。<dt><a href=dom.html#concept-element-contexts id=the-template-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-template-element:metadata-content-2-2 href=dom.html#metadata-content-2>メタデータコンテンツ</a>が期待される場所。<dd><a id=the-template-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所。<dd><a id=the-template-element:script-supporting-elements-2-2 href=dom.html#script-supporting-elements-2>スクリプトサポート要素</a>が期待される場所。<dd><code id=the-template-element:attr-colgroup-span><a href=tables.html#attr-colgroup-span>span</a></code>属性を持たない<code id=the-template-element:the-colgroup-element><a href=tables.html#the-colgroup-element>colgroup</a></code>要素の子として。<dt><a href=dom.html#concept-element-content-model id=the-template-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-template-element:concept-content-nothing>Nothing</a> (for clarification, <a href=#template-example>see example</a>).<dt><a href=dom.html#concept-element-tag-omission id=the-template-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-template-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-template-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dt><a href=dom.html#concept-element-dom id=the-template-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-template-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmltemplateelement>HTMLTemplateElement</dfn> : <a id=the-template-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  readonly attribute <a id=the-template-element:documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment data-x-internal=documentfragment>DocumentFragment</a> <a href=#dom-template-content id=the-template-element:dom-template-content>content</a>;
};</pre>
</dl>

  <p><code id=the-template-element:the-template-element><a href=#the-template-element>template</a></code>要素は、複製され、スクリプトによって文書に挿入できるHTMLの断片を宣言するために使用される。</p>

  <p>レンダリングにおいて、<code id=the-template-element:the-template-element-2><a href=#the-template-element>template</a></code>要素は何も<a id=the-template-element:represents href=dom.html#represents>表さ</a>ない。</p>

  <p>The <a href=#template-contents id=the-template-element:template-contents>template contents</a> of a <code id=the-template-element:the-template-element-3><a href=#the-template-element>template</a></code> element <a href=syntax.html#template-syntax>are not children of the element itself</a>.</p>

  <p class=note>It is also possible, as a result of DOM manipulation, for a <code id=the-template-element:the-template-element-4><a href=#the-template-element>template</a></code>
  element to contain <code id=the-template-element:text><a data-x-internal=text href=https://triple-underscore.github.io/DOM4-ja.html#interface-text>Text</a></code> nodes and element nodes; however, having any is a violation
  of the <code id=the-template-element:the-template-element-5><a href=#the-template-element>template</a></code> element's content model, since its content model is defined as <a href=dom.html#concept-content-nothing id=the-template-element:concept-content-nothing-2>nothing</a>.</p>

  <div id=template-example class=example>

   <p>たとえば、次の文書を考えてみる：</p>

   

   <pre>&lt;!doctype html&gt;
&lt;html lang="en"&gt;
 &lt;head&gt;
  &lt;title&gt;Homework&lt;/title&gt;
 &lt;body&gt;
  &lt;template id="template"&gt;&lt;p&gt;Smile!&lt;/p&gt;&lt;/template&gt;
  &lt;script&gt;
   let num = 3;
   const fragment = document.getElementById('template').content.cloneNode(true);
   while (num-- &gt; 1) {
     fragment.firstChild.before(fragment.firstChild.cloneNode(true));
     fragment.firstChild.textContent += fragment.lastChild.textContent;
   }
   document.body.appendChild(fragment);
  &lt;/script&gt;
&lt;/html&gt;</pre>

   <p><code id=the-template-element:the-template-element-6><a href=#the-template-element>template</a></code>における<code id=the-template-element:the-p-element><a href=grouping-content.html#the-p-element>p</a></code>要素は、DOM内の<code id=the-template-element:the-template-element-7><a href=#the-template-element>template</a></code>の子では<em>ない</em>。<code id=the-template-element:the-template-element-8><a href=#the-template-element>template</a></code>要素の<code id=the-template-element:dom-template-content-2><a href=#dom-template-content>content</a></code> IDL属性によって返される<code id=the-template-element:documentfragment-2><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code>の子である。</p>

   <p>スクリプトが<code id=the-template-element:the-template-element-9><a href=#the-template-element>template</a></code>要素の<code id=the-template-element:dom-node-appendchild><a data-x-internal=dom-node-appendchild href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-appendchild>appendChild()</a></code>を呼び出すと、（他の要素の場合と同様に）<code id=the-template-element:the-template-element-10><a href=#the-template-element>template</a></code>要素に子要素が追加される。しかし、そのようにすることは、<code id=the-template-element:the-template-element-11><a href=#the-template-element>template</a></code>要素のコンテンツモデルに違反することになる。</p>

  </div>

  <dl class=domintro><dt><var>template</var> . <code id=dom-template-content-dev><a href=#dom-template-content>content</a></code><dd>

    <p>Returns the <a href=#template-contents id=the-template-element:template-contents-2>template contents</a> (a <code id=the-template-element:documentfragment-3><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code>).</p>

   </dl>

  

  <p>Each <code id=the-template-element:the-template-element-12><a href=#the-template-element>template</a></code> element has an associated <code id=the-template-element:documentfragment-4><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code> object that
  is its <dfn id=template-contents>template contents</dfn>. The <a href=#template-contents id=the-template-element:template-contents-3>template contents</a> have <a href=dom.html#no-browsing-context>no conformance requirements</a>. When a <code id=the-template-element:the-template-element-13><a href=#the-template-element>template</a></code> element
  is created, the user agent must run the following steps to establish the <a href=#template-contents id=the-template-element:template-contents-4>template
  contents</a>:</p>

  <ol><li><p>Let <var>doc</var> be the <code id=the-template-element:the-template-element-14><a href=#the-template-element>template</a></code> element's <a id=the-template-element:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <a href=#appropriate-template-contents-owner-document id=the-template-element:appropriate-template-contents-owner-document>appropriate template contents owner
   document</a>.</li><li><p>Create a <code id=the-template-element:documentfragment-5><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code> object whose <a id=the-template-element:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> is
   <var>doc</var> and <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host id=the-template-element:concept-documentfragment-host data-x-internal=concept-documentfragment-host>host</a> is the
   <code id=the-template-element:the-template-element-15><a href=#the-template-element>template</a></code> element.</li><li><p>Set the <code id=the-template-element:the-template-element-16><a href=#the-template-element>template</a></code> element's <a href=#template-contents id=the-template-element:template-contents-5>template contents</a> to the newly
   created <code id=the-template-element:documentfragment-6><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code> object.</li></ol>

  <p>A <code id=the-template-element:document><a href=dom.html#document>Document</a></code> <var>doc</var>'s <dfn id=appropriate-template-contents-owner-document>appropriate template contents owner
  document</dfn> is the <code id=the-template-element:document-2><a href=dom.html#document>Document</a></code> returned by the following algorithm:</p>

  <ol><li>

    <p>If <var>doc</var> is not a <code id=the-template-element:document-3><a href=dom.html#document>Document</a></code> created by this algorithm, then:</p>

    <ol><li>

      <p>If <var>doc</var> does not yet have an <dfn id=associated-inert-template-document>associated inert template document</dfn>,
      then:</p>

      <ol><li><p>Let <var>new doc</var> be a new <code id=the-template-element:document-4><a href=dom.html#document>Document</a></code> (that does not have a
       <a href=browsers.html#concept-document-bc id=the-template-element:concept-document-bc>browsing context</a>). This is "a
       <code id=the-template-element:document-5><a href=dom.html#document>Document</a></code> created by this algorithm" for the purposes of the step
       above.</li><li><p>If <var>doc</var> is an <a href=https://triple-underscore.github.io/DOM4-ja.html#html-document id=the-template-element:html-documents data-x-internal=html-documents>HTML document</a>, mark
       <var>new doc</var> as an <a href=https://triple-underscore.github.io/DOM4-ja.html#html-document id=the-template-element:html-documents-2 data-x-internal=html-documents>HTML document</a>
       also.</li><li><p>Let <var>doc</var>'s <a href=#associated-inert-template-document id=the-template-element:associated-inert-template-document>associated inert template document</a> be <var>new doc</var>.</li></ol>

     </li><li><p>Set <var>doc</var> to <var>doc</var>'s <a href=#associated-inert-template-document id=the-template-element:associated-inert-template-document-2>associated inert
     template document</a>.</li></ol>

    <p class=note>Each <code id=the-template-element:document-6><a href=dom.html#document>Document</a></code> not created by this algorithm thus gets a single
    <code id=the-template-element:document-7><a href=dom.html#document>Document</a></code> to act as its proxy for owning the <a href=#template-contents id=the-template-element:template-contents-6>template contents</a> of all
    its <code id=the-template-element:the-template-element-17><a href=#the-template-element>template</a></code> elements, so that they aren't in a <a id=the-template-element:browsing-context href=browsers.html#browsing-context>browsing context</a> and
    thus remain inert (e.g. scripts do not run). Meanwhile, <code id=the-template-element:the-template-element-18><a href=#the-template-element>template</a></code> elements inside
    <code id=the-template-element:document-8><a href=dom.html#document>Document</a></code> objects that <em>are</em> created by this algorithm just reuse the same
    <code id=the-template-element:document-9><a href=dom.html#document>Document</a></code> owner for their contents.</p>

   </li><li><p>Return <var>doc</var>.</li></ol>

  <p id=template-adopting-steps>The <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt-ext id=the-template-element:concept-node-adopt-ext data-x-internal=concept-node-adopt-ext>adopting steps</a>
  (with <var>node</var> and <var>oldDocument</var> as parameters) for <code id=the-template-element:the-template-element-19><a href=#the-template-element>template</a></code> elements
  are the following:</p>

  <ol><li>

    <p>Let <var>doc</var> be <var>node</var>'s <a id=the-template-element:node-document-3 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s
    <a href=#appropriate-template-contents-owner-document id=the-template-element:appropriate-template-contents-owner-document-2>appropriate template contents owner document</a>.</p>

    <p class=note><var>node</var>'s <a id=the-template-element:node-document-4 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> is the <code id=the-template-element:document-10><a href=dom.html#document>Document</a></code> object
    that <var>node</var> was just adopted <em>into</em>.</p>

   </li><li><p><a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt id=the-template-element:concept-node-adopt data-x-internal=concept-node-adopt>Adopt</a> <var>node</var>'s
   <a href=#template-contents id=the-template-element:template-contents-7>template contents</a> (a <code id=the-template-element:documentfragment-7><a data-x-internal=documentfragment href=https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment>DocumentFragment</a></code> object) into <var>doc</var>.</li></ol>

  <p>The <dfn id=dom-template-content><code>content</code></dfn> IDL attribute must return the
  <code id=the-template-element:the-template-element-20><a href=#the-template-element>template</a></code> element's <a href=#template-contents id=the-template-element:template-contents-8>template contents</a>.</p>

  <hr>

  <p>The <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone-ext id=the-template-element:concept-node-clone-ext data-x-internal=concept-node-clone-ext>cloning steps</a> for a <code id=the-template-element:the-template-element-21><a href=#the-template-element>template</a></code>
  element <var>node</var> being cloned to a copy <var>copy</var> must run the
  following steps:</p>

  <ol><li><p>If the <var>clone children flag</var> is not set in the calling <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone id=the-template-element:concept-node-clone data-x-internal=concept-node-clone>clone</a> algorithm, return.</li><li><p>Let <var>copied contents</var> be the result of <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone id=the-template-element:concept-node-clone-2 data-x-internal=concept-node-clone>cloning</a> all the children of <var>node</var>'s
   <a href=#template-contents id=the-template-element:template-contents-9>template contents</a>, with <var>document</var> set to <var>copy</var>'s <a href=#template-contents id=the-template-element:template-contents-10>template contents</a>'s <a id=the-template-element:node-document-5 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node
   document</a>, and with the <var>clone children
   flag</var> set.</li><li><p>Append <var>copied contents</var> to <var>copy</var>'s <a href=#template-contents id=the-template-element:template-contents-11>template
   contents</a>.</li></ol>

  

  <div class=example>

   <p>この例において、スクリプトは、手動でマークアップから構造を生成する代わりに要素構造を提供するために<code id=the-template-element:the-template-element-22><a href=#the-template-element>template</a></code>を使用して、データ構造からデータをもつテーブル4列に投入する。</p>

   <pre>&lt;!DOCTYPE html&gt;
&lt;html lang='en'&gt;
&lt;title&gt;Cat data&lt;/title&gt;
&lt;script&gt;
 // Data is hard-coded here, but could come from the server
 var data = [
   { name: 'Pillar', color: 'Ticked Tabby', sex: 'Female (neutered)', legs: 3 },
   { name: 'Hedral', color: 'Tuxedo', sex: 'Male (neutered)', legs: 4 },
 ];
&lt;/script&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th&gt;Name &lt;th&gt;Color &lt;th&gt;Sex &lt;th&gt;Legs
 &lt;tbody&gt;
  &lt;template id="row"&gt;
   &lt;tr&gt;&lt;td&gt;&lt;td&gt;&lt;td&gt;&lt;td&gt;
  &lt;/template&gt;
&lt;/table&gt;
&lt;script&gt;
 var template = document.querySelector('#row');
 for (var i = 0; i &lt; data.length; i += 1) {
   var cat = data[i];
   var clone = template.content.cloneNode(true);
   var cells = clone.querySelectorAll('td');
   cells[0].textContent = cat.name;
   cells[1].textContent = cat.color;
   cells[2].textContent = cat.sex;
   cells[3].textContent = cat.legs;
   template.parentNode.appendChild(clone);
 }
&lt;/script&gt;</pre>

   <p>この例は、<code id=the-template-element:the-template-element-23><a href=#the-template-element>template</a></code>のコンテンツに<code id=the-template-element:dom-node-clonenode><a data-x-internal=dom-node-clonenode href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-clonenode>cloneNode()</a></code>を使用する。それは、同じことをする<code id=the-template-element:dom-document-importnode><a data-x-internal=dom-document-importnode href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-importnode>document.importNode()</a></code>を等価的に使用することもできる。<a id=the-template-element:node-document-6 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>ノード文書</a>が更新される際に、この2つのAPIの唯一の違いがある。ノードが<code id=the-template-element:dom-node-appendchild-2><a data-x-internal=dom-node-appendchild href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-appendchild>appendChild()</a></code>で付加される場合に<code id=the-template-element:dom-node-clonenode-2><a data-x-internal=dom-node-clonenode href=https://triple-underscore.github.io/DOM4-ja.html#dom-node-clonenode>cloneNode()</a></code>とともに更新され、ノードがクローン化される際に、<code id=the-template-element:dom-document-importnode-2><a data-x-internal=dom-document-importnode href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-importnode>document.importNode()</a></code>とともに更新される。</p>

  </div>



  

  <h5 id=template-XSLT-XPath><span class=secno>4.12.3.1</span> Interaction of <code id=template-XSLT-XPath:the-template-element><a href=#the-template-element>template</a></code> elements with XSLT and XPath<a href=#template-XSLT-XPath class=self-link></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>This specification does not define how XSLT and XPath interact with the <code id=template-XSLT-XPath:the-template-element-2><a href=#the-template-element>template</a></code>
  element. However, in the absence of another specification actually defining this, here are some
  guidelines for implementers, which are intended to be consistent with other processing described
  in this specification:</p>

  <ul><li><p>An XSLT processor based on an XML parser that acts <a href=xhtml.html#xml-parser id=template-XSLT-XPath:xml-parser>as described
   in this specification</a> needs to act as if <code id=template-XSLT-XPath:the-template-element-3><a href=#the-template-element>template</a></code> elements contain as
   descendants their <a href=#template-contents id=template-XSLT-XPath:template-contents>template contents</a> for the purposes of the transform.</li><li><p>An XSLT processor that outputs a DOM needs to ensure that nodes that would go into a
   <code id=template-XSLT-XPath:the-template-element-4><a href=#the-template-element>template</a></code> element are instead placed into the element's <a href=#template-contents id=template-XSLT-XPath:template-contents-2>template
   contents</a>.</li><li><p>XPath evaluation using the XPath DOM API when applied to a <code id=template-XSLT-XPath:document><a href=dom.html#document>Document</a></code> parsed
   using the <a id=template-XSLT-XPath:html-parser href=parsing.html#html-parser>HTML parser</a> or the <a id=template-XSLT-XPath:xml-parser-2 href=xhtml.html#xml-parser>XML parser</a> described in this specification
   needs to ignore <a href=#template-contents id=template-XSLT-XPath:template-contents-3>template contents</a>.</p>

  </li></ul>

  



  <h4 id=the-slot-element><span class=secno>4.12.4</span> <dfn><code>slot</code></dfn>要素<a href=#the-slot-element class=self-link></a></h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-slot-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-slot-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-slot-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-slot-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-slot-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-slot-element:concept-element-content-model>コンテンツモデル</a>：<dd><a id=the-slot-element:transparent href=dom.html#transparent>透過的</a><dt><a href=dom.html#concept-element-tag-omission id=the-slot-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-slot-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-slot-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-slot-element:attr-slot-name><a href=#attr-slot-name>name</a></code> — シャドウツリースロットの名前<dt><a href=dom.html#concept-element-dom id=the-slot-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-slot-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmlslotelement>HTMLSlotElement</dfn> : <a id=the-slot-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  [<a id=the-slot-element:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-slot-name id=the-slot-element:dom-slot-name>name</a>;
  sequence&lt;Node&gt; <a href=#dom-slot-assignednodes id=the-slot-element:dom-slot-assignednodes>assignedNodes</a>(optional <a href=#assignednodesoptions id=the-slot-element:assignednodesoptions>AssignedNodesOptions</a> options);
};

dictionary <dfn id=assignednodesoptions>AssignedNodesOptions</dfn> {
  boolean flatten = false;
};</pre>
   </dl>

  <p><code id=the-slot-element:the-slot-element><a href=#the-slot-element>slot</a></code>要素は、<a href=https://triple-underscore.github.io/DOM4-ja.html#concept-slot id=the-slot-element:concept-slot data-x-internal=concept-slot>スロット</a>を定義する。典型的に<a id=the-slot-element:shadow-tree href=https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-tree data-x-internal=shadow-tree>シャドウツリー</a>に使用される。もしあれば、<code id=the-slot-element:the-slot-element-2><a href=#the-slot-element>slot</a></code>要素はその<a id=the-slot-element:assigned-nodes href=https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes data-x-internal=assigned-nodes>割り当てられるノード</a>を<a id=the-slot-element:represents href=dom.html#represents>表し</a>、そうでなければそのコンテンツを表す。</p>

  <p><dfn id=attr-slot-name><code>name</code></dfn>コンテンツ属性は、任意の文字列値を含んでもよい。これは<a href=https://triple-underscore.github.io/DOM4-ja.html#concept-slot id=the-slot-element:concept-slot-2 data-x-internal=concept-slot>スロット</a>の<a href=https://triple-underscore.github.io/DOM4-ja.html#slot-name id=the-slot-element:slot-name data-x-internal=slot-name>名前</a>を表す。</p>

  <p class=note><code id=the-slot-element:attr-slot-name-2><a href=#attr-slot-name>slot</a></code>属性は、別の要素に<a href=https://dom.spec.whatwg.org/#assign-a-slot id=the-slot-element:assign-a-slot data-x-internal=assign-a-slot>スロットを割り当てる</a>ために使用される：<code id=the-slot-element:attr-slot-name-3><a href=#attr-slot-name>name</a></code>属性をもつ<code id=the-slot-element:the-slot-element-3><a href=#the-slot-element>slot</a></code>要素は、その要素がその<code id=the-slot-element:attr-slot-name-4><a href=#attr-slot-name>name</a></code>属性の値と一致する値を持つ<code id=the-slot-element:attr-slot><a href=dom.html#attr-slot>slot</a></code>属性を持ち、かつ<code id=the-slot-element:the-slot-element-4><a href=#the-slot-element>slot</a></code>要素がその対応する<code id=the-slot-element:attr-slot-2><a href=dom.html#attr-slot>slot</a></code>属性値を持つ<a id=the-slot-element:root href=https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root data-x-internal=root>ルート</a>の<a href=https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host id=the-slot-element:concept-documentfragment-host data-x-internal=concept-documentfragment-host>ホスト</a>を持つ<a id=the-slot-element:shadow-tree-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-tree data-x-internal=shadow-tree>シャドウツリー</a>の子である場合、任意の要素が<a href=https://dom.spec.whatwg.org/#assign-a-slot id=the-slot-element:assign-a-slot-2 data-x-internal=assign-a-slot>割り当てられる</a>名前付き<a href=https://triple-underscore.github.io/DOM4-ja.html#concept-slot id=the-slot-element:concept-slot-3 data-x-internal=concept-slot>スロット</a>を作成する。</p>

  <dl class=domintro><dt><var>slot</var> . <code id=dom-slot-name-dev><a href=#dom-slot-name>name</a></code><dd><var>slot</var>の<a href=https://triple-underscore.github.io/DOM4-ja.html#slot-name id=the-slot-element:slot-name-2 data-x-internal=slot-name>名前</a>を取得し設定することが可能である。<dt><var>slot</var> . <code id=dom-slot-assignednodes-dev><a href=#dom-slot-assignednodes>assignedNodes</a></code>()<dd><var>slot</var>の<a id=the-slot-element:assigned-nodes-2 href=https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes data-x-internal=assigned-nodes>割り当てられるノード</a>を返す。<dt><var>slot</var> . <code id=the-slot-element:dom-slot-assignednodes-2><a href=#dom-slot-assignednodes>assignedNodes</a></code>({ flatten: true })<dd>もしあれば、<var>slot</var>の<a id=the-slot-element:assigned-nodes-3 href=https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes data-x-internal=assigned-nodes>割り当てられるノード</a>を返し、そうでなければ<var>slot</var>の子を返し、かつ<code id=the-slot-element:the-slot-element-6><a href=#the-slot-element>slot</a></code>要素が存在しなくなるまで、再帰的に、<code id=the-slot-element:the-slot-element-5><a href=#the-slot-element>slot</a></code>要素に遭遇するのと同じものを返す。</dl>

  <p><dfn id=dom-slot-name><code>name</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id=the-slot-element:reflect href=common-dom-interfaces.html#reflect>反映</a>しなければならない。</p>

  <p>呼び出される場合、<dfn id=dom-slot-assignednodes><code>assignedNodes(<var>options</var>)</code></dfn>メソッドは次の手順を実行しなければならない：</p>

  <ol><li><p><var>options</var>の<code>flatten</code>メンバーの値がfalseである場合、この要素の<a id=the-slot-element:assigned-nodes-4 href=https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes data-x-internal=assigned-nodes>割り当てられたノード</a>を返す。</li><li><p>この要素をもつ<a id=the-slot-element:finding-flattened-slotables href=https://triple-underscore.github.io/DOM4-ja.html#find-flattened-slotables data-x-internal=finding-flattened-slotables>finding flattened slotables</a>の結果を返す。</li></ol>



  <nav><a href=interactive-elements.html>← 4.11 インタラクティブ要素</a> — <a href=./>目次</a> — <a href=canvas.html>4.12.5 canvas要素 →</a></nav>
</body></html>