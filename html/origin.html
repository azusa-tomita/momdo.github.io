<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/spec.css"><link rel="stylesheet" href="https://resources.whatwg.org/standard.css"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css"><link href="https://resources.whatwg.org/logo.svg" rel="icon"><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script><style>
   .bad, .bad *:not(.X\58X) { color: gray; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix, .equations { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('https://html.spec.whatwg.org/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('https://html.spec.whatwg.org/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('https://html.spec.whatwg.org/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('https://html.spec.whatwg.org/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style><body>
  
  <script src="https://html.spec.whatwg.org/html-dfn.js" async=""></script>
  <script data-file-issue-url="https://github.com/momdo/momdo.github.io/issues/new" async="" src="https://resources.whatwg.org/file-issue.js"></script>
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img alt="WHATWG" src="https://resources.whatwg.org/logo.svg" width="100" height="100"></a><hgroup><h1 class="allcaps">HTML</h1><h2 id="living-standard" class="no-num no-toc">Living Standard — Last Updated <span class="pubdate">7 August 2019</span></h2></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="window-object.html">← 7.3 Windowオブジェクト</a> — <a href="./">目次</a> — <a href="history.html">7.7 セッション履歴およびナビゲーション →</a></nav><ol class="toc"><li id="toc-browsers"><ol><li><a href="origin.html#origin"><span class="secno">7.5</span> 生成元</a><ol><li><a href="origin.html#relaxing-the-same-origin-restriction"><span class="secno">7.5.1</span> 同一生成元制限を緩和する</a></ol><li><a href="origin.html#sandboxing"><span class="secno">7.6</span> サンドボックス</a></ol></ol><h3 id="origin"><span class="secno">7.5</span> 生成元<a href="#origin" class="self-link"></a></h3>
  

  <p>生成元は、ウェブのセキュリティーモデルの基本的な通貨である。生成元を共有するウェブプラットフォーム内の2つの当事者が互いに信頼し、同一の権限を有すると仮定される。異なる生成元をもつ当事者は、互いに潜在的に悪意があると見なされ、互いから程度を変化させるよう隔離される。</p>

  <p class="example">たとえば、<code>bank.example.com</code>でホストされるExample Bankのウェブサイトは、<code>charity.example.org</code>でホストExample CharityのウェブサイトのDOMを検査しようとすると、<a id="origin:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="origin:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> が発生する。</p>

  <hr>

  <aside class="mdn before"><input onclick="toggleStatus(this)" value="⋰" type="button"><div><b>MDN</b><details><summary><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/origin" title="The Document.origin read-only property returns the document's origin. In most cases, this property is equivalent to document.defaultView.location.origin.">Document/origin</a></summary><p class="mdnsupport"><span class="chrome no"><span>Chrome</span><span>No</span></span><span class="chrome_android no"><span>Chrome Android</span><span>No</span></span><span class="edge unknown"><span>Edge</span><span>?</span></span><span class="edge_mobile unknown"><span>Edge Mobile</span><span>?</span></span><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="firefox_android no"><span>Firefox Android</span><span>No</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span></details></div></aside><p id="origin-2"><dfn data-export="" id="concept-origin">生成元</dfn>は次のいずれかである：</p>

  <dl><dt>An <dfn id="concept-origin-opaque" data-export="">opaque origin</dfn><dd><p>An internal value, with no serialization it can be recreated from (it is serialized as "<code>null</code>" per <a href="#ascii-serialisation-of-an-origin" id="origin:ascii-serialisation-of-an-origin">serialization of an origin</a>), for which the only meaningful operation is testing for equality.<dt>A <dfn id="concept-origin-tuple" data-export="">tuple origin</dfn><dd><p>A <a href="#concept-origin-tuple" id="origin:concept-origin-tuple">tuple</a> consists of:<ul class="brief"><li>A <dfn data-dfn-for="origin" id="concept-origin-scheme" data-export="">scheme</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-scheme" id="origin:concept-url-scheme" data-x-internal="concept-url-scheme">scheme</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-host" data-export="">host</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="origin:concept-host" data-x-internal="concept-host">host</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-port" data-export="">port</dfn> (a <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-port" id="origin:concept-url-port" data-x-internal="concept-url-port">port</a>).<li>A <dfn data-dfn-for="origin" id="concept-origin-domain" data-export="">domain</dfn> (null or a <a href="https://triple-underscore.github.io/URL-ja.html#concept-domain" id="origin:concept-domain" data-x-internal="concept-domain">domain</a>). Null unless stated otherwise.</ul>
   </dl>

  <p class="note"><a href="#concept-origin" id="origin:concept-origin">Origins</a> can be shared, e.g., among multiple <code id="origin:document"><a href="dom.html#document">Document</a></code> objects. Furthermore, <a href="#concept-origin" id="origin:concept-origin-2">origins</a> are generally immutable. Only the <a href="#concept-origin-domain" id="origin:concept-origin-domain">domain</a> of a <a href="#concept-origin-tuple" id="origin:concept-origin-tuple-2">tuple origin</a> can be changed, and only through the <code id="origin:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> API.</p>

  <p>The <dfn id="concept-origin-effective-domain" data-export="">effective domain</dfn> of an <a href="#concept-origin" id="origin:concept-origin-3">origin</a> <var>origin</var> is computed as follows:</p>

  <ol><li><p>If <var>origin</var> is an <a href="#concept-origin-opaque" id="origin:concept-origin-opaque">opaque origin</a>, then return null.<li><p>If <var>origin</var>'s <a href="#concept-origin-domain" id="origin:concept-origin-domain-2">domain</a> is non-null, then return <var>origin</var>'s <a href="#concept-origin-domain" id="origin:concept-origin-domain-3">domain</a>.<li><p>Return <var>origin</var>'s <a href="#concept-origin-host" id="origin:concept-origin-host">host</a>.</ol>

  

  <p>Various specification objects are defined to have an <a href="#concept-origin" id="origin:concept-origin-4">origin</a>. These <a href="#concept-origin" id="origin:concept-origin-5">origins</a> are determined as follows:</p>

  <dl><dt>For <code id="origin:document-2"><a href="dom.html#document">Document</a></code> objects<dd><p>The <a href="browsers.html#creating-a-new-browsing-context" id="origin:creating-a-new-browsing-context">create a new browsing context</a> and <a href="browsing-the-web.html#navigate" id="origin:navigate">navigation</a> algorithms assign the <a href="#concept-origin" id="origin:concept-origin-6">origin</a> at construction time. Otherwise, the default default behavior as defined in <cite>DOM</cite> applies. <a href="references.html#refsDOM">[DOM]</a></p>
   <dt>For images of <code id="origin:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> elements<dd><dl class="switch"><dt>If the <a href="images.html#img-req-data" id="origin:img-req-data">image data</a> is <a id="origin:cors-cross-origin" href="urls-and-fetching.html#cors-cross-origin">CORS-cross-origin</a><dd><p>A unique <a href="#concept-origin-opaque" id="origin:concept-origin-opaque-2">opaque origin</a> assigned when the image is created.<dt>If the <a href="images.html#img-req-data" id="origin:img-req-data-2">image data</a> is <a id="origin:cors-same-origin" href="urls-and-fetching.html#cors-same-origin">CORS-same-origin</a><dd><p>The <code id="origin:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element's <a id="origin:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="#concept-origin" id="origin:concept-origin-7">origin</a>.</dl>

   <dt>For <code id="origin:the-audio-element"><a href="media.html#the-audio-element">audio</a></code> and <code id="origin:the-video-element"><a href="media.html#the-video-element">video</a></code> elements<dd><dl class="switch"><dt>If the <a id="origin:media-data" href="media.html#media-data">media data</a> is <a id="origin:cors-cross-origin-2" href="urls-and-fetching.html#cors-cross-origin">CORS-cross-origin</a><dd><p>A unique <a href="#concept-origin-opaque" id="origin:concept-origin-opaque-3">opaque origin</a> assigned when the <a id="origin:media-data-2" href="media.html#media-data">media data</a> is fetched.<dt>If the <a id="origin:media-data-3" href="media.html#media-data">media data</a> is <a id="origin:cors-same-origin-2" href="urls-and-fetching.html#cors-same-origin">CORS-same-origin</a><dd><p>The <a id="origin:media-element" href="media.html#media-element">media element</a>'s <a id="origin:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="#concept-origin" id="origin:concept-origin-8">origin</a>.</dl>

   </dl>

  <p>Other specifications can override the above definitions by themselves specifying the origin of a particular <code id="origin:document-3"><a href="dom.html#document">Document</a></code> object, image, or <a id="origin:media-element-2" href="media.html#media-element">media element</a>.</p>

  <hr>

  <p>The <dfn id="ascii-serialisation-of-an-origin" data-lt="serialization of an origin|ASCII serialization of an origin" data-export="">serialization of an origin</dfn> is the string obtained by applying the following algorithm to the given <a href="#concept-origin" id="origin:concept-origin-9">origin</a> <var>origin</var>:</p>

  <ol><li><p>If <var>origin</var> is an <a href="#concept-origin-opaque" id="origin:concept-origin-opaque-4">opaque origin</a>, then return "<code>null</code>".<li><p>Otherwise, let <var>result</var> be <var>origin</var>'s <a href="#concept-origin-scheme" id="origin:concept-origin-scheme">scheme</a>.<li><p>Append "<code>://</code>" to <var>result</var>.<li><p>Append <var>origin</var>'s <a href="#concept-origin-host" id="origin:concept-origin-host-2">host</a>, <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-serializer" id="origin:host-serializer" data-x-internal="host-serializer">serialized</a>, to <var>result</var>.<li><p>If <var>origin</var>'s <a href="#concept-origin-port" id="origin:concept-origin-port">port</a> is non-null, append a U+003A COLON character (:), and <var>origin</var>'s <a href="#concept-origin-port" id="origin:concept-origin-port-2">port</a>, <a href="https://triple-underscore.github.io/URL-ja.html#serialize-an-integer" id="origin:serialize-an-integer" data-x-internal="serialize-an-integer">serialized</a>, to <var>result</var>.<li><p>Return <var>result</var>.</ol>

  <p class="example">The <a href="#ascii-serialisation-of-an-origin" id="origin:ascii-serialisation-of-an-origin-2">serialization</a> of ("<code>https</code>", "<code>xn--maraa-rta.example</code>", null, null) is "<code>https://xn--maraa-rta.example</code>".</p>

  <p id="unicode-serialisation-of-an-origin" class="note">There used to also be a <i>Unicode serialization of an origin</i>. However, it was never widely adopted.</p>

  <hr>

  <p>Two <a href="#concept-origin" id="origin:concept-origin-10">origins</a>, <var>A</var> and <var>B</var>, are said to be <dfn id="same-origin" data-export="">same origin</dfn> if the following algorithm returns true:</p>

  <ol><li><p>If <var>A</var> and <var>B</var> are the same <a href="#concept-origin-opaque" id="origin:concept-origin-opaque-5">opaque origin</a>, then return true.<li><p>If <var>A</var> and <var>B</var> are both <a href="#concept-origin-tuple" id="origin:concept-origin-tuple-3">tuple origins</a> and their <a href="#concept-origin-scheme" id="origin:concept-origin-scheme-2">schemes</a>, <a href="#concept-origin-host" id="origin:concept-origin-host-3">hosts</a>, and <a href="#concept-origin-port" id="origin:concept-origin-port-3">port</a> are identical, then return true.<li><p>Return false.</ol>

  <p>Two <a href="#concept-origin" id="origin:concept-origin-11">origins</a>, <var>A</var> and <var>B</var>, are said to be <dfn id="same-origin-domain" data-export="">same origin-domain</dfn> if the following algorithm returns true:</p>

  <ol><li><p>If <var>A</var> and <var>B</var> are the same <a href="#concept-origin-opaque" id="origin:concept-origin-opaque-6">opaque origin</a>, then return true.<li><p>If <var>A</var> and <var>B</var> are both <a href="#concept-origin-tuple" id="origin:concept-origin-tuple-4">tuple origins</a>, run these substeps:</p>

    <ol><li><p>If <var>A</var> and <var>B</var>'s <a href="#concept-origin-scheme" id="origin:concept-origin-scheme-3">schemes</a> are identical, and their <a href="#concept-origin-domain" id="origin:concept-origin-domain-4">domains</a> are identical and non-null, then return true.<li><p>Otherwise, if <var>A</var> and <var>B</var> are <a href="#same-origin" id="origin:same-origin">same origin</a> and their <a href="#concept-origin-domain" id="origin:concept-origin-domain-5">domains</a> are identical and null, then return true.</ol>

   <li><p>Return false.</ol>

  <div class="example"><table><tr><th><var>A</var><th><var>B</var><th><a href="#same-origin" id="origin:same-origin-2">same origin</a><th><a href="#same-origin-domain" id="origin:same-origin-domain">same origin-domain</a><tr><td>("<code>https</code>", "<code>example.org</code>", null, null)<td>("<code>https</code>", "<code>example.org</code>", null, null)<td>✅<td>✅<tr><td>("<code>https</code>", "<code>example.org</code>", 314, null)<td>("<code>https</code>", "<code>example.org</code>", 420, null)<td>❌<td>❌<tr><td>("<code>https</code>", "<code>example.org</code>", 314, "<code>example.org</code>")<td>("<code>https</code>", "<code>example.org</code>", 420, "<code>example.org</code>")<td>❌<td>✅<tr><td>("<code>https</code>", "<code>example.org</code>", null, null)<td>("<code>https</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>✅<td>❌<tr><td>("<code>https</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>("<code>http</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>❌<td>❌</table>
  </div>

  


  <aside class="mdn before"><input onclick="toggleStatus(this)" value="⋰" type="button"><div><b>MDN</b><details><summary><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/domain" title="The domain property of the Document interface gets/sets the domain portion of the origin of the current document, as used by the same origin policy.">Document/domain</a></summary><p class="mdnsupport"><span class="chrome yes"><span>Chrome</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>12+</span></span><span class="edge_mobile unknown"><span>Edge Mobile</span><span>?</span></span><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><h4 id="relaxing-the-same-origin-restriction"><span class="secno">7.5.1</span> 同一生成元制限を緩和する<a href="#relaxing-the-same-origin-restriction" class="self-link"></a></h4>

  <dl class="domintro"><dt><var>document</var> . <code id="dom-document-domain-dev"><a href="#dom-document-domain">domain</a></code> [ = <var>domain</var> ]<dd><p>セキュリティーチェックのために使用される現在のドメインを返す。</p>

    <p>Can be set to a value that removes subdomains, to change the <a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin">origin</a>'s <a href="#concept-origin-domain" id="relaxing-the-same-origin-restriction:concept-origin-domain">domain</a> to allow pages on other subdomains of the same domain (if they do the same thing) to access each other. （サンドボックス化された<code id="relaxing-the-same-origin-restriction:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>において設定できない。）</p>

   </dl>

  

  <p>To determine if a string <var>hostSuffixString</var> <dfn id="is-a-registrable-domain-suffix-of-or-is-equal-to" data-lt="is a
  registrable domain suffix of or is equal to|is not a registrable domain suffix of and is not equal
  to" data-export="">is a registrable domain suffix of or is equal to</dfn> a <a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="relaxing-the-same-origin-restriction:concept-host" data-x-internal="concept-host">host</a> <var>originalHost</var>, run these steps:</p>
  

  <ol><li><p>If <var>hostSuffixString</var> is the empty string, then return false.<li><p>Let <var>host</var> be the result of <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-parser" id="relaxing-the-same-origin-restriction:host-parser" data-x-internal="host-parser">parsing</a> <var>hostSuffixString</var>.<li><p>If <var>host</var> is failure, then return false.<li><p>If <var>host</var> does not <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-equals" id="relaxing-the-same-origin-restriction:host-equals" data-x-internal="host-equals">equal</a> <var>originalHost</var>, then:</p>

    <ol><li><p>If <var>host</var> or <var>originalHost</var> is not a <a href="https://triple-underscore.github.io/URL-ja.html#concept-domain" id="relaxing-the-same-origin-restriction:concept-domain" data-x-internal="concept-domain">domain</a>, then return false.</p>

      <p class="note">This excludes <a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="relaxing-the-same-origin-restriction:concept-host-2" data-x-internal="concept-host">hosts</a> that are an <a id="relaxing-the-same-origin-restriction:ipv4-address" href="https://triple-underscore.github.io/URL-ja.html#concept-ipv4" data-x-internal="ipv4-address">IPv4 address</a> or an <a id="relaxing-the-same-origin-restriction:ipv6-address" href="https://triple-underscore.github.io/URL-ja.html#concept-ipv6" data-x-internal="ipv6-address">IPv6 address</a>.</p>
     <li><p>If <var>host</var>, prefixed by a U+002E FULL STOP (.), does not exactly match the end of <var>originalHost</var>, then return false.<li><p>If <var>host</var> <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-equals" id="relaxing-the-same-origin-restriction:host-equals-2" data-x-internal="host-equals">equals</a> <var>host</var>'s <a id="relaxing-the-same-origin-restriction:public-suffix" href="https://url.spec.whatwg.org/#host-public-suffix" data-x-internal="public-suffix">public suffix</a>, then return false. <a href="references.html#refsURL">[URL]</a></ol>
   <li><p>Return true.</ol>

  <p>The <dfn id="dom-document-domain"><code>domain</code></dfn> attribute's getter must run these steps:</p>

  <ol><li><p>Let <var>effectiveDomain</var> be this <code id="relaxing-the-same-origin-restriction:document"><a href="dom.html#document">Document</a></code> object's <a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin-2">origin</a>'s <a href="#concept-origin-effective-domain" id="relaxing-the-same-origin-restriction:concept-origin-effective-domain">effective domain</a>.<li><p>If <var>effectiveDomain</var> is null, then return the empty string.<li><p>Return <var>effectiveDomain</var>, <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-serializer" id="relaxing-the-same-origin-restriction:host-serializer" data-x-internal="host-serializer">serialized</a>.</ol>

  <p>The <code id="relaxing-the-same-origin-restriction:dom-document-domain"><a href="#dom-document-domain">domain</a></code> attribute's setter must run these steps:</p>

  <ol><li><p>If this <code id="relaxing-the-same-origin-restriction:document-2"><a href="dom.html#document">Document</a></code> object's <a href="browsers.html#concept-document-bc" id="relaxing-the-same-origin-restriction:concept-document-bc">browsing context</a> is null, then throw a <a id="relaxing-the-same-origin-restriction:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="relaxing-the-same-origin-restriction:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If this <code id="relaxing-the-same-origin-restriction:document-3"><a href="dom.html#document">Document</a></code> object's <a href="#active-sandboxing-flag-set" id="relaxing-the-same-origin-restriction:active-sandboxing-flag-set">active sandboxing flag set</a> has its <a href="#sandboxed-document.domain-browsing-context-flag" id="relaxing-the-same-origin-restriction:sandboxed-document.domain-browsing-context-flag">sandboxed <code>document.domain</code> browsing context flag</a> set, then throw a <a id="relaxing-the-same-origin-restriction:securityerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="relaxing-the-same-origin-restriction:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If this <code id="relaxing-the-same-origin-restriction:document-4"><a href="dom.html#document">Document</a></code> object is not <a id="relaxing-the-same-origin-restriction:allowed-to-use" href="iframe-embed-object.html#allowed-to-use">allowed to use</a> the "<code id="relaxing-the-same-origin-restriction:document-domain-feature"><a href="infrastructure.html#document-domain-feature">document-domain</a></code>" feature, then throw a <a id="relaxing-the-same-origin-restriction:securityerror-3" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="relaxing-the-same-origin-restriction:domexception-3"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>Let <var>effectiveDomain</var> be this <code id="relaxing-the-same-origin-restriction:document-5"><a href="dom.html#document">Document</a></code> object's <a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin-3">origin</a>'s <a href="#concept-origin-effective-domain" id="relaxing-the-same-origin-restriction:concept-origin-effective-domain-2">effective domain</a>.<li><p>If <var>effectiveDomain</var> is null, then throw a <a id="relaxing-the-same-origin-restriction:securityerror-4" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="relaxing-the-same-origin-restriction:domexception-4"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If the given value <a href="#is-a-registrable-domain-suffix-of-or-is-equal-to" id="relaxing-the-same-origin-restriction:is-a-registrable-domain-suffix-of-or-is-equal-to">is not a registrable domain suffix of and is not equal to</a> <var>effectiveDomain</var>, then throw a <a id="relaxing-the-same-origin-restriction:securityerror-5" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="relaxing-the-same-origin-restriction:domexception-5"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>Set this <code id="relaxing-the-same-origin-restriction:document-6"><a href="dom.html#document">Document</a></code> object's <a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin-4">origin</a>'s <a href="#concept-origin-domain" id="relaxing-the-same-origin-restriction:concept-origin-domain-2">domain</a> to the result of <a href="https://triple-underscore.github.io/URL-ja.html#concept-host-parser" id="relaxing-the-same-origin-restriction:host-parser-2" data-x-internal="host-parser">parsing</a> the given value.</ol>

  

  <p class="note"><code id="relaxing-the-same-origin-restriction:dom-document-domain-2"><a href="#dom-document-domain"> domain</a></code>属性は、ドメインの異なるホスト上の有効なページに互いのDOMをアクセスするために使用される。</p>

  <p class="warning">共有ホスティングを使用する際<code id="relaxing-the-same-origin-restriction:dom-document-domain-3"><a href="#dom-document-domain">document.domain</a></code>の属性を使用しない。信頼できない第三者が同じIPアドレスだが別のポート上でHTTPサーバーをホストできる場合、<code id="relaxing-the-same-origin-restriction:dom-document-domain-4"><a href="#dom-document-domain">document.domain</a></code>属性が使用された後に生成元を比較する際にポートは無視されるように、通常同じホスト上の2つの異なるサイトを保護する同一生成元の保護は失敗するだろう。</p>




  <h3 id="sandboxing"><span class="secno">7.6</span> サンドボックス<a href="#sandboxing" class="self-link"></a></h3>

  <p><dfn id="sandboxing-flag-set" data-export="">サンドボックスフラグ設定</dfn>は、潜在的に信頼されないリソースが持つ能力を制限するために使用される、以下のフラグに属するゼロ個以上のセットである：</p>

  <dl><dt><dfn id="sandboxed-navigation-browsing-context-flag" data-export="">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>This flag <a href="browsing-the-web.html#sandboxLinks">prevents content from navigating browsing contexts other than the sandboxed browsing context itself</a> (or browsing contexts further nested inside it), <a href="browsers.html#auxiliary-browsing-context" id="sandboxing:auxiliary-browsing-context">auxiliary browsing contexts</a> (which are protected by the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag">sandboxed auxiliary navigation browsing context flag</a> defined next), and the <a id="sandboxing:top-level-browsing-context" href="browsers.html#top-level-browsing-context">top-level browsing context</a> (which is protected by the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag">sandboxed top-level navigation without user activation browsing context flag</a> and <a href="#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag">sandboxed top-level navigation with user activation browsing context flag</a> defined below).</p>

    <p><a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-2">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a>が設定されない場合、それにもかかわらず一定の場合における制限はポップアップ（新しい<a href="browsers.html#top-level-browsing-context" id="sandboxing:top-level-browsing-context-2">トップレベルブラウジングコンテキスト</a>）を開くことができる。これらの<a href="browsers.html#browsing-context" id="sandboxing:browsing-context">ブラウジングコンテキスト</a>は常に、<dfn id="one-permitted-sandboxed-navigator">1つの許可されたサンドボックス化されたナビゲーター</dfn>を持ち、実際に移動するために作成した<a id="sandboxing:browsing-context-2" href="browsers.html#browsing-context">ブラウジングコンテキスト</a>を許可する、ブラウジングコンテキストが作成される際に設定を持つ。（そうでなければ、<a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a>は、それらが開かれた場合であってもナビゲートされていくのを防ぐだろう。）</p>

   <dt><dfn id="sandboxed-auxiliary-navigation-browsing-context-flag" data-export="">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>This flag <a href="browsers.html#sandboxWindowOpen">prevents content from creating new auxiliary browsing contexts</a>, e.g. using the <code id="sandboxing:attr-hyperlink-target"><a href="links.html#attr-hyperlink-target">target</a></code> attribute or the <code id="sandboxing:dom-open"><a href="window-object.html#dom-open">window.open()</a></code> method.</p>

   <dt>The <dfn id="sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" data-export="">sandboxed top-level navigation without user activation browsing context flag</dfn><dd><p>このフラグは、<a href="browsing-the-web.html#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="window-object.html#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。It is consulted only from algorithms that are <em>not</em> <a id="sandboxing:triggered-by-user-activation" href="interaction.html#triggered-by-user-activation">triggered by user activation</a>.</p>

    <p>When the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-2">sandboxed top-level navigation without user activation browsing context flag</a> is <em>not</em> set, content can navigate its <a id="sandboxing:top-level-browsing-context-3" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, but other <a href="browsers.html#browsing-context" id="sandboxing:browsing-context-3">browsing contexts</a> are still protected by the <a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag-2">sandboxed navigation browsing context flag</a> and possibly the <a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-3">sandboxed auxiliary navigation browsing context flag</a>.</p>

   <dt>The <dfn id="sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" data-export="">sandboxed top-level navigation with user activation browsing context flag</dfn><dd><p>このフラグは、<a href="browsing-the-web.html#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="window-object.html#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。It is consulted only from algorithms that <em>are</em> <a id="sandboxing:triggered-by-user-activation-2" href="interaction.html#triggered-by-user-activation">triggered by user activation</a>.</p>

    <p>As with the <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-3">sandboxed top-level navigation without user activation browsing context flag</a>, this flag only affects the <a id="sandboxing:top-level-browsing-context-4" href="browsers.html#top-level-browsing-context">top-level browsing context</a>; if it is not set, other <a href="browsers.html#browsing-context" id="sandboxing:browsing-context-4">browsing contexts</a> might still be protected by other flags.</p>

   <dt><dfn id="sandboxed-plugins-browsing-context-flag" data-export="">サンドボックス化されたプラグインブラウジングコンテキストフラグ</dfn><dd><p>This flag prevents content from instantiating <a href="infrastructure.html#plugin" id="sandboxing:plugin">plugins</a>, whether using <a href="iframe-embed-object.html#sandboxPluginEmbed">the <code>embed</code> element</a>, <a href="iframe-embed-object.html#sandboxPluginObject">the <code>object</code> element</a>, or through <a href="browsing-the-web.html#sandboxPluginNavigate">navigation</a> of a <a id="sandboxing:nested-browsing-context" href="browsers.html#nested-browsing-context">nested browsing context</a>, unless those <a href="infrastructure.html#plugin" id="sandboxing:plugin-2">plugins</a> can be <a href="infrastructure.html#concept-plugin-secure" id="sandboxing:concept-plugin-secure">secured</a>.</p>

   <dt><dfn id="sandboxed-origin-browsing-context-flag" data-export="">サンドボックス化された生成元ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="browsers.html#sandboxOrigin">一意な生成元にコンテンツを強制する</a>。したがって、同一<a href="#concept-origin" id="sandboxing:concept-origin">生成元</a>から他のコンテンツにアクセスすることを防止する。</p>

    <p>このフラグはまた、<a href="dom.html#sandboxCookies"><code>document.cookie</code> IDL属性からの読み取りまたは書き込みをするスクリプトを防止し</a>、<code id="sandboxing:dom-localstorage"><a href="webstorage.html#dom-localstorage">localStorage</a></code>へのアクセスをブロックする。</p>

   <dt><dfn id="sandboxed-forms-browsing-context-flag" data-export="">サンドボックス化されたフォームブラウジングコンテキストフラグ</dfn><dd><p>このフラグは<a href="form-control-infrastructure.html#sandboxSubmitBlocked">フォーム送信をブロックする</a>。</p>

   <dt><dfn id="sandboxed-pointer-lock-browsing-context-flag" data-export="">サンドボックス化されたポインターロックブラウジングコンテキストフラグ</dfn><dd><p>このフラグはPointer Lock APIを無効にする。<a href="references.html#refsPOINTERLOCK">[POINTERLOCK]</a></p>

   <dt><dfn id="sandboxed-scripts-browsing-context-flag" data-export="">サンドボックス化されたスクリプトブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="webappapis.html#sandboxScriptBlocked">スクリプトの実行をブロックする</a>。</p>

   <dt><dfn id="sandboxed-automatic-features-browsing-context-flag" data-export="">サンドボックス化された自動機能ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="media.html#attr-media-autoplay" id="sandboxing:attr-media-autoplay">自動ビデオ再生</a>や<a href="form-control-infrastructure.html#attr-fe-autofocus" id="sandboxing:attr-fe-autofocus">自動フォームコントロールフォーカス</a>などの、自動的に切り替える機能をブロックする。</p>

   <dt><dfn id="sandboxed-document.domain-browsing-context-flag" data-export="">サンドボックス化された<code>document.domain</code>ブラウジングコンテキストフラグ</dfn>。<dd><p>This flag prevents content from using the <code id="sandboxing:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> setter.</p>

   <dt>The <dfn id="sandbox-propagates-to-auxiliary-browsing-contexts-flag" data-export="">sandbox propagates to auxiliary browsing contexts flag</dfn><dd><p>This flag prevents content from escaping the sandbox by ensuring that any <a id="sandboxing:auxiliary-browsing-context-2" href="browsers.html#auxiliary-browsing-context">auxiliary browsing context</a> it creates inherits the content's <a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set">active sandboxing flag set</a>.</p>

   <dt>The <dfn id="sandboxed-modals-flag" data-export="">sandboxed modals flag</dfn><dd><p>This flag prevents content from using any of the following features to produce modal dialogs:</p>

    <ul><li><code id="sandboxing:dom-alert"><a href="timers-and-user-prompts.html#dom-alert">window.alert()</a></code><li><code id="sandboxing:dom-confirm"><a href="timers-and-user-prompts.html#dom-confirm">window.confirm()</a></code><li><code id="sandboxing:dom-print"><a href="timers-and-user-prompts.html#dom-print">window.print()</a></code><li><code id="sandboxing:dom-prompt"><a href="timers-and-user-prompts.html#dom-prompt">window.prompt()</a></code><li>the <code id="sandboxing:event-beforeunload"><a href="indices.html#event-beforeunload">beforeunload</a></code> event</ul>

   <dt>The <dfn id="sandboxed-orientation-lock-browsing-context-flag" data-export="">sandboxed orientation lock browsing context flag</dfn><dd><p>This flag disables the ability to lock the screen orientation. <a href="references.html#refsSCREENORIENTATION">[SCREENORIENTATION]</a></p>

   <dt>The <dfn id="sandboxed-presentation-browsing-context-flag" data-export="">sandboxed presentation browsing context flag</dfn><dd><p>This flag disables the Presentation API. <a href="references.html#refsPRESENTATION">[PRESENTATION]</a></p>

   </dl>

  <p>When the user agent is to <dfn id="parse-a-sandboxing-directive" data-export="">parse a sandboxing directive</dfn>, given a string <var>input</var>, a <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set">sandboxing flag set</a> <var>output</var>, it must run the following steps:</p>

  <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#split-on-ascii-whitespace" id="sandboxing:split-a-string-on-spaces" data-x-internal="split-a-string-on-spaces">Split <var>input</var> on ASCII whitespace</a>, to obtain <var>tokens</var>.<li><p><var>output</var>を空にする。<li><p><var>output</var>に次のフラグを追加する：</p>

    <ul><li><p><a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag-3">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-popups"><code>allow-popups</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-4">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a><li><p>The <a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-4">sandboxed top-level navigation without user activation browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-top-navigation"><code>allow-top-navigation</code></dfn> keyword.<li><p>The <a href="#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag-2">sandboxed top-level navigation with user activation browsing context flag</a>, unless <var>tokens</var> contains either the <dfn id="attr-iframe-sandbox-allow-top-navigation-by-user-activation"><code>allow-top-navigation-by-user-activation</code></dfn> keyword or the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code> keyword.</p>

      <p class="note">This means that if the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation-2"><a href="#attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</a></code> is present, the <code id="sandboxing:attr-iframe-sandbox-allow-top-navigation-by-user-activation"><a href="#attr-iframe-sandbox-allow-top-navigation-by-user-activation">allow-top-navigation-by-user-activation</a></code> keyword will have no effect. For this reason, specifying both is a document conformance error.</p>
     <li><p><a href="#sandboxed-plugins-browsing-context-flag" id="sandboxing:sandboxed-plugins-browsing-context-flag">サンドボックス化されたプラグインブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-same-origin"><code>allow-same-origin</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-origin-browsing-context-flag" id="sandboxing:sandboxed-origin-browsing-context-flag">サンドボックス化された生成元ブラウジングコンテキストフラグ</a></p>

      <div class="note"><p><code id="sandboxing:attr-iframe-sandbox-allow-same-origin"><a href="#attr-iframe-sandbox-allow-same-origin">allow-same-origin</a></code>キーワードは2つの例を対象とする。</p>

       <p>1つ目は、依然としてサンドボックス化されたコンテンツのDOMへのアクセスを可能する一方で、スクリプトを無効にするためにサンドボックス化されるべき同じサイトからコンテンツを許可するために使用できる。</p>

       <p>2つ目は、サードパーティサイトからコンテンツを埋め込むために使用でき、データなどを格納するためにデータベースAPIを使用して、その元のサイトに戻る通信から埋め込まれたページを妨げることなく、ポップアップウィンドウなどを開いてから、そのサイトを防ぐためにサンドボックス化する。</p>

      </div>

     <li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-forms"><code>allow-forms</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-forms-browsing-context-flag" id="sandboxing:sandboxed-forms-browsing-context-flag">サンドボックス化されたフォームブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-pointer-lock"><code>allow-pointer-lock</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-pointer-lock-browsing-context-flag" id="sandboxing:sandboxed-pointer-lock-browsing-context-flag">サンドボックス化されたポインターロックブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が<dfn id="attr-iframe-sandbox-allow-scripts"><code>allow-scripts</code></dfn>キーワードを含む場合を除いて、<a href="#sandboxed-scripts-browsing-context-flag" id="sandboxing:sandboxed-scripts-browsing-context-flag">サンドボックス化されたスクリプトブラウジングコンテキストフラグ</a><li><p><var>tokens</var>が（上記で定義された）<code id="sandboxing:attr-iframe-sandbox-allow-scripts"><a href="#attr-iframe-sandbox-allow-scripts">allow-scripts</a></code>キーワードを含む場合を除いて、<a href="#sandboxed-automatic-features-browsing-context-flag" id="sandboxing:sandboxed-automatic-features-browsing-context-flag">サンドボックス化された自動機能ブラウジングコンテキストフラグ</a></p>

      <p class="note">このフラグは、サンドボックスの自動機能　これらの機能がとにかく些細なことも可能であるスクリプトが有効である場合、およびそれらが宣言機能を使用できるようにするよりむしろサンドボックス化された場合、著者がそれらを行うためのスクリプトを使用するよう強制することが不幸であるので、スクリプトと同じキーワードで緩和される。</p>

     <li><p><a href="#sandboxed-document.domain-browsing-context-flag" id="sandboxing:sandboxed-document.domain-browsing-context-flag">サンドボックス化された<code>document.domain</code>ブラウジングコンテキストフラグ</a>。<li><p>The <a href="#sandbox-propagates-to-auxiliary-browsing-contexts-flag" id="sandboxing:sandbox-propagates-to-auxiliary-browsing-contexts-flag">sandbox propagates to auxiliary browsing contexts flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-popups-to-escape-sandbox"><code>allow-popups-to-escape-sandbox</code></dfn> keyword.<li><p>The <a href="#sandboxed-modals-flag" id="sandboxing:sandboxed-modals-flag">sandboxed modals flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-modals"><code>allow-modals</code></dfn> keyword.<li><p>The <a href="#sandboxed-orientation-lock-browsing-context-flag" id="sandboxing:sandboxed-orientation-lock-browsing-context-flag">sandboxed orientation lock browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-orientation-lock"><code>allow-orientation-lock</code></dfn> keyword.<li><p>The <a href="#sandboxed-presentation-browsing-context-flag" id="sandboxing:sandboxed-presentation-browsing-context-flag">sandboxed presentation browsing context flag</a>, unless <var>tokens</var> contains the <dfn id="attr-iframe-sandbox-allow-presentation"><code>allow-presentation</code></dfn> keyword.</ul>

   </ol>

  <hr>

  <p>すべての<a id="sandboxing:top-level-browsing-context-5" href="browsers.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>は、<a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-2">サンドボックスフラグが設定</a>される、<dfn id="popup-sandboxing-flag-set">ポップアップサンドボックスフラグ設定</dfn>を持つ。<a id="sandboxing:browsing-context-5" href="browsers.html#browsing-context">ブラウジングコンテキスト</a>が作成される場合、その<a href="#popup-sandboxing-flag-set" id="sandboxing:popup-sandboxing-flag-set">ポップアップサンドフラグ設定</a>は空でなければならない。It is populated by <a id="sandboxing:the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name" href="browsers.html#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name">the rules for choosing a browsing context</a>.</p>

  <p>Every <a id="sandboxing:browsing-context-6" href="browsers.html#browsing-context">browsing context</a> that is a <a id="sandboxing:nested-browsing-context-2" href="browsers.html#nested-browsing-context">nested browsing context</a> has an <dfn id="iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</dfn>, which is a <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-3">sandboxing flag set</a>. Which flags in a <a id="sandboxing:nested-browsing-context-3" href="browsers.html#nested-browsing-context">nested browsing context</a>'s <a href="#iframe-sandboxing-flag-set" id="sandboxing:iframe-sandboxing-flag-set"><code>iframe</code> sandboxing flag set</a> are set at any particular time is determined by the <code id="sandboxing:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code> element's <code id="sandboxing:attr-iframe-sandbox"><a href="iframe-embed-object.html#attr-iframe-sandbox">sandbox</a></code> attribute.</p>

  <p>すべての<code id="sandboxing:document"><a href="dom.html#document">Document</a></code>は、<a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-4">サンドボックスフラグ設定</a>である、<dfn data-dfn-for="Document" id="active-sandboxing-flag-set" data-export="">アクティブサンドボックスフラグ設定</dfn>を持つ。<code id="sandboxing:document-2"><a href="dom.html#document">Document</a></code>が作成される場合、その<a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set-2">アクティブサンドボックスフラグ設定</a>が空でなければならない。それは、<a href="browsing-the-web.html#navigate" id="sandboxing:navigate">ナビゲーションアルゴリズム</a>によって追加される。</p>

  <p><a href="browsing-the-web.html#navigate" id="sandboxing:navigate-2">ナビゲーションアルゴリズム</a>によって得られるすべてのリソースは、<a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-5">サンドボックスフラグが設定</a>される、<dfn id="forced-sandboxing-flag-set" data-export="">強制サンドボックスフラグ設定</dfn>を持つ。デフォルトでリソースは、その<a href="#forced-sandboxing-flag-set" id="sandboxing:forced-sandboxing-flag-set">強制サンドボックスフラグセット</a>で設定されるフラグを持たないが、他の仕様は、特定のフラグが設定されていることを定義できる。</p>

  <p class="note">具体的には、<a href="#forced-sandboxing-flag-set" id="sandboxing:forced-sandboxing-flag-set-2">強制サンドボックスフラグセット</a>が<cite>Content Security Policy</cite>によって使用される。<a href="references.html#refsCSP">[CSP]</a></p>

  <hr>

  <p>To <dfn id="determining-active-sandboxing-flags">determine active sandboxing flags</dfn> for a <a href="browsers.html#concept-document-bc" id="sandboxing:concept-document-bc">browsing context</a> <var>browsing context</var> given an optional <var>navigationResource</var>, return the union of the flags that are present in the following <a href="#sandboxing-flag-set" id="sandboxing:sandboxing-flag-set-6">sandboxing flag sets</a>:</p>

  <ul><li><p>If <var>browsing context</var> is a <a id="sandboxing:top-level-browsing-context-6" href="browsers.html#top-level-browsing-context">top-level browsing context</a>, then: the flags set on the <a href="#popup-sandboxing-flag-set" id="sandboxing:popup-sandboxing-flag-set-2">popup sandboxing flag set</a>.<li><p>If <var>browsing context</var> is a <a id="sandboxing:nested-browsing-context-4" href="browsers.html#nested-browsing-context">nested browsing context</a>, then: the flags set on the <a href="#iframe-sandboxing-flag-set" id="sandboxing:iframe-sandboxing-flag-set-2"><code>iframe</code> sandboxing flag set</a>.<li><p>If <var>browsing context</var> is a <a id="sandboxing:nested-browsing-context-5" href="browsers.html#nested-browsing-context">nested browsing context</a>, then: the flags set on the <a id="sandboxing:parent-browsing-context" href="browsers.html#parent-browsing-context">parent browsing context</a>'s <a id="sandboxing:active-document" href="browsers.html#active-document">active document</a>'s <a href="#active-sandboxing-flag-set" id="sandboxing:active-sandboxing-flag-set-3">active sandboxing flag set</a>.<li><p>If <var>navigationResource</var> is given, then: the flags set on <var>navigationResource</var>'s <a href="#forced-sandboxing-flag-set" id="sandboxing:forced-sandboxing-flag-set-3">forced sandboxing flag set</a>.</ul>



  <aside class="mdn before"><input onclick="toggleStatus(this)" value="⋰" type="button"><div><b>MDN</b><details><summary><a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState" title="REDIRECT Manipulating the browser history: The pushState() method">History/pushState</a></summary><p class="mdnsupport"><span class="chrome yes"><span>Chrome</span><span>5+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="edge yes"><span>Edge</span><span>12+</span></span><span class="edge_mobile yes"><span>Edge Mobile</span><span>Yes</span></span><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><span class="opera yes"><span>Opera</span><span>11.5+</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>5+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>4.3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span></details></div></aside><nav><a href="window-object.html">← 7.3 Windowオブジェクト</a> — <a href="./">目次</a> — <a href="history.html">7.7 セッション履歴およびナビゲーション →</a></nav>
